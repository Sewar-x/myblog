# æ ‘

![image-20231022171502467](../images/æ•°æ®ç»“æ„-æ ‘.png)

## æ ‘ç»“æ„

ä¸åŒäºæˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„çº¿æ€§ç»“æ„ï¼Œæ ‘æ˜¯ä¸€ç§éçº¿æ€§ç»“æ„ã€‚

å›¾ï¼š

![å›¾ç‰‡](../images/tree.png)

å®ƒéµå¾ªï¼š

- ä»…æœ‰å”¯ä¸€ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ²¡æœ‰èŠ‚ç‚¹åˆ™ä¸ºç©ºæ ‘
- é™¤æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å¹¶ä»…æœ‰å”¯ä¸€ä¸€ä¸ªçˆ¶èŠ‚ç‚¹
- èŠ‚ç‚¹é—´ä¸èƒ½å½¢æˆé—­ç¯

è¿™å°±æ˜¯æ ‘ï¼

æ ‘æœ‰å‡ ä¸ªæ¦‚å¿µï¼š

- æ‹¥æœ‰ç›¸åŒçˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œäº’ç§°ä¸ºå…„å¼ŸèŠ‚ç‚¹
- **èŠ‚ç‚¹çš„æ·±åº¦** ï¼šä»æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹æ‰€ç»å†çš„è¾¹çš„ä¸ªæ•°
- **èŠ‚ç‚¹çš„é«˜åº¦** ï¼šèŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„
- æ ‘çš„é«˜åº¦ï¼šæ ¹èŠ‚ç‚¹çš„é«˜åº¦

![å›¾ç‰‡](../images/tree2.png)

Bã€Cã€Då°±äº’ç§°ä¸ºå…„å¼ŸèŠ‚ç‚¹ï¼Œå…¶ä¸­ï¼ŒèŠ‚ç‚¹Bçš„é«˜åº¦ä¸º2ï¼ŒèŠ‚ç‚¹Bçš„æ·±åº¦ä¸º 1ï¼Œæ ‘çš„é«˜åº¦ä¸º3

#### é«˜åº¦

æ ‘çš„é«˜åº¦è®¡ç®—å…¬å¼ï¼š

![å›¾ç‰‡](../images/äºŒå‰æ ‘-æ ‘é«˜åº¦è®¡ç®—.png)

ä¸‹å›¾æ¯ä¸ªèŠ‚ç‚¹å€¼éƒ½ä»£è¡¨æ¥å½“å‰èŠ‚ç‚¹çš„é«˜åº¦ï¼š

![å›¾ç‰‡](../images/tree3.png)

## äºŒå‰æ ‘

äºŒå‰æ ‘ï¼Œæ•…åæ€ä¹‰ï¼Œæœ€å¤šä»…æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„æ ‘ï¼ˆæœ€å¤šèƒ½åˆ†ä¸¤ä¸ªå‰çš„æ ‘ğŸ¤¦â€â™€ï¸ï¼‰ï¼š

å›¾ï¼š

![å›¾ç‰‡](../images/tree4.png)

## å¹³è¡¡äºŒå‰æ ‘

äºŒå‰æ ‘ä¸­ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦ç›¸å·®ä¸èƒ½å¤§äº 1ï¼Œç§°ä¸ºå¹³è¡¡äºŒå‰æ ‘ã€‚

![å›¾ç‰‡](../images/tree6.png)

å¦å¤–è¿˜æœ‰æ»¡äºŒå‰æ ‘ã€å®Œå…¨äºŒå‰æ ‘ç­‰ï¼š

- **æ»¡äºŒå‰æ ‘**ï¼šé™¤äº†å¶ç»“ç‚¹å¤–æ¯ä¸€ä¸ªç»“ç‚¹éƒ½æœ‰å·¦å³å­å¶ä¸”å¶å­ç»“ç‚¹éƒ½å¤„åœ¨æœ€åº•å±‚çš„äºŒå‰æ ‘
- **å®Œå…¨äºŒå‰æ ‘**ï¼šæ·±åº¦ä¸ºhï¼Œé™¤ç¬¬ h å±‚å¤–ï¼Œå…¶å®ƒå„å±‚ (1ï½h-1) çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬h å±‚æ‰€æœ‰çš„ç»“ç‚¹éƒ½è¿ç»­é›†ä¸­åœ¨æœ€å·¦è¾¹

## åœ¨ä»£ç ä¸­å¦‚ä½•å»è¡¨ç¤ºä¸€æ£µäºŒå‰æ ‘

### é“¾å¼å­˜å‚¨æ³•

äºŒå‰æ ‘çš„å­˜å‚¨å¾ˆç®€å•ï¼Œåœ¨äºŒå‰æ ‘ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸‰éƒ¨åˆ†ï¼š

- å½“å‰èŠ‚ç‚¹çš„ val
- å·¦å­èŠ‚ç‚¹ left
- å³å­èŠ‚ç‚¹ right

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªèŠ‚ç‚¹å®šä¹‰ä¸ºï¼š

```js
function Node(val) {
    // ä¿å­˜å½“å‰èŠ‚ç‚¹ key å€¼
    this.val = val
    // æŒ‡å‘å·¦å­èŠ‚ç‚¹
    this.left = null
    // æŒ‡å‘å³å­èŠ‚ç‚¹
    this.right = null
}
```

ä¸€æ£µäºŒå‰æ ‘å¯ä»¥ç”±æ ¹èŠ‚ç‚¹é€šè¿‡å·¦å³æŒ‡é’ˆè¿æ¥èµ·æ¥å½¢æˆä¸€ä¸ªæ ‘ã€‚

```js
function BinaryTree() {
  let Node = function (val) {
    this.val = val
    this.left = null
    this.right = null
  }
  let root = null
}
```

### æ•°ç»„å­˜å‚¨æ³•ï¼ˆé€‚ç”¨äºå®Œå…¨äºŒå‰æ ‘ï¼‰

ä¸‹å›¾å°±æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œ

å¦‚æœæˆ‘ä»¬æŠŠæ ¹èŠ‚ç‚¹å­˜æ”¾åœ¨ä½ç½® `i=1` çš„ä½ç½®ï¼Œåˆ™å®ƒçš„å·¦å­èŠ‚ç‚¹ä½ç½®ä¸º `2i = 2` ï¼Œå³å­èŠ‚ç‚¹ä½ç½®ä¸º `2i+1 = 3` ã€‚

å¦‚æœæˆ‘ä»¬é€‰å– B èŠ‚ç‚¹ `i=2` ï¼Œåˆ™å®ƒçˆ¶èŠ‚ç‚¹ä¸º `i/2 = 1` ï¼Œå·¦å­èŠ‚ç‚¹ `2i=4` ï¼Œå³å­èŠ‚ç‚¹  `2i+1=5` ã€‚

ä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬å‘ç°æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ»¡è¶³è¿™ä¸‰ç§å…³ç³»ï¼š

- ä½ç½®ä¸º i çš„èŠ‚ç‚¹ï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹ä½ç½®ä¸º `i/2`
- å®ƒçš„å·¦å­èŠ‚ç‚¹ `2i`
- å®ƒçš„å³å­èŠ‚ç‚¹  `2i+1`

å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®Œå…¨äºŒå‰æ ‘å­˜å‚¨åœ¨æ•°ç»„é‡Œï¼ˆä»ä¸‹æ ‡ä¸º 1 å¼€å§‹å­˜å‚¨ï¼‰ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡ä¸‹æ ‡æ‰¾åˆ°ä»»æ„èŠ‚ç‚¹çš„çˆ¶å­èŠ‚ç‚¹ã€‚ä»è€Œå®Œæ•´çš„æ„å»ºå‡ºè¿™ä¸ªå®Œå…¨äºŒå‰æ ‘ã€‚è¿™å°±æ˜¯æ•°ç»„å­˜å‚¨æ³•ã€‚

æ•°ç»„å­˜å‚¨æ³•ç›¸å¯¹äºé“¾å¼å­˜å‚¨æ³•ä¸éœ€è¦ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºå®ƒçš„å·¦å³æŒ‡é’ˆï¼Œæ›´ä¸ºèŠ‚çœå†…å­˜ã€‚

![å›¾ç‰‡](../images/å®Œå…¨äºŒå‰æ ‘.png)

## äºŒå‰æ ‘çš„éå†

äºŒå‰æ ‘çš„éå†å¯åˆ†ä¸ºï¼š

- å‰åºéå†
- ä¸­åºéå†
- ååºéå†

æ‰€è°“å‰ã€ä¸­ã€åï¼Œä¸è¿‡æ˜¯æ ¹çš„é¡ºåºï¼Œå³ä¹Ÿå¯ä»¥ç§°ä¸ºå…ˆæ ¹éå†ã€ä¸­æ ¹éå†ã€åæ ¹éå†

#### å‰åºéå†

å¯¹äºäºŒå‰æ ‘ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…ˆæ‰“å°è¯¥èŠ‚ç‚¹ï¼Œç„¶åæ˜¯å®ƒçš„å·¦å­æ ‘ï¼Œæœ€åå³å­æ ‘

![å›¾ç‰‡](../images/å‰åºéå†.png)

#### ä¸­åºéå†

å¯¹äºäºŒå‰æ ‘ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…ˆæ‰“å°å®ƒçš„å·¦å­æ ‘ï¼Œç„¶åæ˜¯è¯¥èŠ‚ç‚¹ï¼Œæœ€åå³å­æ ‘

![å›¾ç‰‡](../images/ä¸­åºéå†.png)

#### ååºéå†

å¯¹äºäºŒå‰æ ‘ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…ˆæ‰“å°å®ƒçš„å·¦å­æ ‘ï¼Œç„¶åæ˜¯å³å­æ ‘ï¼Œæœ€åè¯¥èŠ‚ç‚¹

![å›¾ç‰‡](../images/ååºéå†.png)



#### å‰åºéå†å®ç°

>  éå†äºŒå‰æ ‘çš„è¿‡ç¨‹ä¹Ÿå°±æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œä¾‹å¦‚å‰åºéå†ï¼Œå…ˆéå†æ ¹èŠ‚ç‚¹ï¼Œç„¶åæ˜¯æ ¹çš„å·¦å­æ ‘ï¼Œæœ€åå³å­æ ‘ï¼›éå†æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘çš„æ—¶å€™ï¼Œåˆæ˜¯å…ˆéå†å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œç„¶åå·¦å­æ ‘çš„å·¦å­æ ‘ï¼Œå·¦å­æ ‘çš„å³å­æ ‘â€¦â€¦.

##### é€’å½’å®ç°

```js
// å‰åºéå†
const preorderTraversal = (root) => {
    let result = []
    var preOrderTraverseNode = (node) => {
        if(node) {
            // å…ˆæ ¹èŠ‚ç‚¹
            result.push(node.val)
            // ç„¶åéå†å·¦å­æ ‘
            preOrderTraverseNode(node.left)
            // å†éå†å³å­æ ‘
            preOrderTraverseNode(node.right)
        }
    }
    preOrderTraverseNode(root)
    return result
};
```

##### è¿­ä»£å®ç°

>  åˆ©ç”¨æ ˆæ¥è®°å½•éå†çš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šï¼Œé€’å½’å°±ä½¿ç”¨äº†è°ƒç”¨æ ˆï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ˆæ¥æ¨¡æ‹Ÿé€’å½’çš„è¿‡ç¨‹
>
> - é¦–å…ˆæ ¹å…¥æ ˆ
> - å°†æ ¹èŠ‚ç‚¹å‡ºæ ˆï¼Œå°†æ ¹èŠ‚ç‚¹å€¼æ”¾å…¥ç»“æœæ•°ç»„ä¸­
> - ç„¶åéå†å·¦å­æ ‘ã€å³å­æ ‘ï¼Œå› ä¸ºæ ˆæ˜¯å…ˆå…¥åå‡ºï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆå³å­æ ‘å…¥æ ˆï¼Œç„¶åå·¦å­æ ‘å…¥æ ˆ
> - ç»§ç»­å‡ºæ ˆï¼ˆå·¦å­æ ‘è¢«å‡ºæ ˆï¼‰â€¦â€¦.
>
> ä¾æ¬¡å¾ªç¯å‡ºæ ˆéå†å…¥æ ˆï¼Œç›´åˆ°æ ˆä¸ºç©ºï¼Œéå†å®Œæˆ

```js
// å‰åºéå†
const preorderTraversal = (root) => {
    const list = [];
    const stack = [];
    
    // å½“æ ¹èŠ‚ç‚¹ä¸ä¸ºç©ºçš„æ—¶å€™ï¼Œå°†æ ¹èŠ‚ç‚¹å…¥æ ˆ
    if(root) stack.push(root)
    while(stack.length > 0) {
        const curNode = stack.pop()
        // ç¬¬ä¸€æ­¥çš„æ—¶å€™ï¼Œå…ˆè®¿é—®çš„æ˜¯æ ¹èŠ‚ç‚¹
        list.push(curNode.val)
        
        // æˆ‘ä»¬å…ˆæ‰“å°å·¦å­æ ‘ï¼Œç„¶åå³å­æ ‘
        // æ‰€ä»¥å…ˆåŠ å…¥æ ˆçš„æ˜¯å³å­æ ‘ï¼Œç„¶åå·¦å­æ ‘
        if(curNode.right !== null) {
            stack.push(curNode.right)
        }
        if(curNode.left !== null) {
            stack.push(curNode.left)
        }
    }
    return list
}
```

> ##### å¤æ‚åº¦åˆ†æï¼š
>
> ç©ºé—´å¤æ‚åº¦ï¼šO(n)
>
> æ—¶é—´å¤æ‚åº¦ï¼šO(n)



#### ä¸­åºéå†

> * éå†å·¦å­æ ‘
> * éå†å½“å‰èŠ‚ç‚¹
> * éå†å³å­æ ‘

##### é€’å½’å®ç°

````js
// ä¸­åºéå†
const indorderTraversal = (root) => {
    let result = []
    var indOrderTraverseNode = (node) => {
        if(node) {
             // éå†å·¦å­æ ‘
            indOrderTraverseNode(node.left)
            // æ ¹èŠ‚ç‚¹
            result.push(node.val)
            // å†éå†å³å­æ ‘
            indOrderTraverseNode(node.right)
        }
    }
    indorderTraversal(root)
    return result
};
````

##### è¿­ä»£å®ç°

> * å°†å½“å‰èŠ‚ç‚¹æŒ‡é’ˆæŒ‡å‘æ ¹èŠ‚ç‚¹ï¼Œå¾ªç¯å½“å‰èŠ‚ç‚¹ä¸ä¸ºç©ºæˆ–æ ˆä¸ä¸ºç©º
>   * å¾ªç¯æ‰¾æŸ¥æ‰¾å·¦å­æ ‘ï¼Œå¹¶å°†å·¦å­æ ‘å…¥æ ˆï¼Œç›´åˆ°å·¦å­æ ‘ä¸ºç©º
>   * æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œè®¿é—®å½“å‰èŠ‚ç‚¹
>   * å°†å½“å‰èŠ‚ç‚¹å³å­æ ‘å…¥æ ˆ

```js
const inorderTraversal = (root) => {
  const result = [];
  const stack = [];

  let current = root;

  while (current || stack.length > 0) {
    // å°†å·¦å­æ ‘çš„æ‰€æœ‰å·¦èŠ‚ç‚¹å…¥æ ˆ
    while (current) {
      stack.push(current);
      current = current.left;
    }

    // å¼¹å‡ºæ ˆé¡¶èŠ‚ç‚¹ï¼Œå¹¶å°†å…¶å€¼åŠ å…¥ç»“æœæ•°ç»„
    current = stack.pop();
    result.push(current.val);

    // å¤„ç†å³å­æ ‘
    current = current.right;
  }

  return result;
};
```



#### ååºéå†

> * éå†å·¦å­æ ‘
> * éå†å³å­æ ‘
> * éå†å½“å‰èŠ‚ç‚¹

##### é€’å½’å®ç°

```js
var postOrderTraversal = (root)=> {
	let result = [];
    var postOderTraverNode = (node)=> {
        if(node) {
            // éå†å·¦å­æ ‘
            postOderTraverNode(node.left);
            // éå†å³å­æ ‘
            postOderTraverNode(node.right);
            // éå†å½“å‰èŠ‚ç‚¹
            result.push(node.value)
        }
    }
    postOderTraverNode(root); 
    return result;
}
```



##### è¿­ä»£å®ç°

> * å°†å½“å‰èŠ‚ç‚¹æŒ‡é’ˆæŒ‡å‘æ ¹èŠ‚ç‚¹ï¼Œå¾ªç¯å½“å‰èŠ‚ç‚¹ä¸ä¸ºç©ºæˆ–æ ˆä¸ä¸ºç©º
>   * å¾ªç¯æŸ¥æ‰¾å·¦å­æ ‘ï¼Œå¹¶å°†å·¦å­æ ‘å…¥æ ˆï¼Œç›´åˆ°å·¦å­æ ‘ä¸ºç©º
>   * è®¿é—®å½“å‰èŠ‚ç‚¹æ ˆé¡¶å…ƒç´ 
>   * å¦‚æœ`current`çš„å³å­æ ‘ä¸ºç©ºæˆ–è€…å·²ç»éå†è¿‡å³å­æ ‘ï¼ˆé€šè¿‡å˜é‡`prev`è¿›è¡Œåˆ¤æ–­ï¼‰ï¼Œåˆ™å°†`current`çš„å€¼åŠ å…¥ç»“æœæ•°ç»„`result`ï¼Œå°†`current`å‡ºæ ˆï¼Œå°†`prev`æ›´æ–°ä¸º`root`ï¼Œå¹¶å°†`root`è®¾ä¸º`null`ï¼Œä»¥ä¾¿ç»§ç»­å¤„ç†æ ˆä¸­çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚
>   * å¦‚æœ`current`çš„å³å­æ ‘ä¸ä¸ºç©ºä¸”è¿˜æœªéå†è¿‡å³å­æ ‘ï¼Œåˆ™å°†`current`çš„å³å­æ ‘èµ‹å€¼ç»™`current`ï¼Œç»§ç»­éå†å³å­æ ‘ã€‚

```js
const postorderTraversal = (root) => {
  const result = [];
  const stack = [];

  let current = root;
  let prev = null;
  while (current || stack.length > 0) {
    // å°†å·¦å­æ ‘çš„æ‰€æœ‰å·¦èŠ‚ç‚¹å…¥æ ˆ
    while (current) {
      stack.push(current);
      current = current.left;
    }

    // è·å–æ ˆé¡¶å…ƒç´ 
    current = stack[stack.length-1]
     // å¦‚æœå³å­æ ‘ä¸ºç©ºæˆ–å·²ç»éå†è¿‡å³å­æ ‘
    if(!current.right || prev === current) {   
      result.push(current.val); // å°†å½“å‰èŠ‚ç‚¹å€¼åŠ å…¥ç»“æœæ•°ç»„
      stack.pop(); // å°†å½“å‰èŠ‚ç‚¹å‡ºæ ˆ
      prev = current; // è®°å½•ä¸Šä¸€ä¸ªå·²éå†çš„èŠ‚ç‚¹
      current = null; // ç»§ç»­éå†æ ˆä¸­çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
    }else {
        // å¤„ç†å³å­æ ‘
    	current = current.right;
    }
  }

  return result;
};
```



#### å±‚æ¬¡éå†

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼è‡ªåº•å‘ä¸Šçš„å±‚æ¬¡éå†ã€‚ï¼ˆå³æŒ‰ä»å¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„å±‚ï¼Œé€å±‚ä»å·¦å‘å³éå†ï¼‰

ä¾‹å¦‚ï¼šç»™å®šäºŒå‰æ ‘ `[3,9,20,null,null,15,7]` ,

```js
    3
   / \
  9  20
    /  \
   15   7
```

è¿”å›å…¶è‡ªåº•å‘ä¸Šçš„å±‚æ¬¡éå†ä¸ºï¼š

```js
[
  [15,7],
  [9,20],
  [3]
]
```

##### è§£æ³•ä¸€ï¼šBFSï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼‰

> BFS æ˜¯æŒ‰å±‚å±‚æ¨è¿›çš„æ–¹å¼ï¼Œéå†æ¯ä¸€å±‚çš„èŠ‚ç‚¹ã€‚é¢˜ç›®è¦æ±‚çš„æ˜¯è¿”å›æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼ï¼Œæ‰€ä»¥è¿™é¢˜ç”¨ BFS æ¥åšéå¸¸åˆé€‚ã€‚BFS éœ€è¦ç”¨é˜Ÿåˆ—ä½œä¸ºè¾…åŠ©ç»“æ„ï¼Œæˆ‘ä»¬å…ˆå°†æ ¹èŠ‚ç‚¹æ”¾åˆ°é˜Ÿåˆ—ä¸­ï¼Œç„¶åä¸æ–­éå†é˜Ÿåˆ—ã€‚
>
> * ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—å­˜å‚¨ï¼š
>   * å½“å‰éå†æ•°æ®é˜Ÿåˆ— `queue`ï¼šä¿å­˜å½“å‰éå†çš„æ•°æ®
>   * ä¸‹ä¸€å±‚æ•°æ®é˜Ÿåˆ— `tempQueue`: ä¿å­˜èŠ‚ç‚¹çš„å­èŠ‚ç‚¹
> * æ ¹èŠ‚ç‚¹å…¥é˜Ÿåˆ—ï¼Œå¾ªç¯éå†å½“å‰æ•°æ®é˜Ÿåˆ— queue:
>   * èŠ‚ç‚¹å‡ºé˜Ÿåˆ—ï¼Œè®¿é—®èŠ‚ç‚¹ï¼Œå°†èŠ‚ç‚¹å·¦å³å­èŠ‚ç‚¹å…¥  `tempQueue`ï¼›
>   * æ›¿æ¢å½“å‰ `queue` ä¸º `tempQueue`ï¼›

```js
const levelOrderBottom = function(root) {
    if(!root) return []
    let res = [], 
        queue = [root] 
    while(queue.length) {
        let curr = [], // æ¯å±‚æ•°ç»„
            tempQueue = [] // ä¸´æ—¶é˜Ÿåˆ—ï¼Œå­˜å‚¨ queue ä¸‹ä¸€å±‚æ•°æ®çš„é˜Ÿåˆ—
        while(queue.length) {
            let node = queue.shift()
            curr.push(node.val)
            if(node.left) tempQueue.push(node.left)
            if(node.right) tempQueue.push(node.right)
        }
        res.push(curr)
        queue = tempQueue // å°†å½“å‰é˜Ÿåˆ—æ›¿æ¢ä¸ºä¸‹ä¸€å±‚æ•°æ®çš„ä¸´æ—¶é˜Ÿåˆ—
    }
    return res.reverse()
};
```

> **å¤æ‚åº¦åˆ†æ**
>
> - æ—¶é—´å¤æ‚åº¦ï¼šO(n)
> - ç©ºé—´å¤æ‚åº¦ï¼šO(n)

##### è§£æ³•äºŒï¼šDFSï¼ˆæ·±åº¦ä¼˜å…ˆéå†ï¼‰

>  DFS æ˜¯æ²¿ç€æ ‘çš„æ·±åº¦éå†æ ‘çš„èŠ‚ç‚¹ï¼Œå°½å¯èƒ½æ·±åœ°æœç´¢æ ‘çš„åˆ†æ”¯
>
> DFS åšæœ¬é¢˜çš„ä¸»è¦é—®é¢˜æ˜¯ï¼šDFS ä¸æ˜¯æŒ‰ç…§å±‚æ¬¡éå†çš„ã€‚ä¸ºäº†è®©é€’å½’çš„è¿‡ç¨‹ä¸­åŒä¸€å±‚çš„èŠ‚ç‚¹æ”¾åˆ°åŒä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œåœ¨é€’å½’æ—¶è¦è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦ `depth` ã€‚é€’å½’åˆ°æ–°èŠ‚ç‚¹è¦æŠŠè¯¥èŠ‚ç‚¹æ”¾å…¥ `depth` å¯¹åº”åˆ—è¡¨çš„æœ«å°¾ã€‚
>
> å½“éå†åˆ°ä¸€ä¸ªæ–°çš„æ·±åº¦ `depth` ï¼Œè€Œæœ€ç»ˆç»“æœ `res` ä¸­è¿˜æ²¡æœ‰åˆ›å»º `depth` å¯¹åº”çš„åˆ—è¡¨æ—¶ï¼Œåº”è¯¥åœ¨ `res` ä¸­æ–°å»ºä¸€ä¸ªåˆ—è¡¨ç”¨æ¥ä¿å­˜è¯¥ `depth` çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚



```js
const levelOrderBottom = function(root) {
    const res = []
    var dep = function (node, depth){
        if(!node) return
        res[depth] = res[depth]||[]
        res[depth].push(node.val)
        dep(node.left, depth + 1)
        dep(node.right, depth + 1)
    }
    dep(root, 0)
    return res.reverse()   
};
```

> **å¤æ‚åº¦åˆ†æï¼š**
>
> - æ—¶é—´å¤æ‚åº¦ï¼šO(n)
> - ç©ºé—´å¤æ‚åº¦ï¼šO(h)ï¼Œhä¸ºæ ‘çš„é«˜åº¦

#### å±‚åºéå†

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¯·ä½ è¿”å›å…¶æŒ‰ **å±‚åºéå†** å¾—åˆ°çš„èŠ‚ç‚¹å€¼ã€‚ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚

**ç¤ºä¾‹ï¼š**äºŒå‰æ ‘ï¼š`[3,9,20,null,null,15,7]` ,

```js
    3
   / \
  9  20
    /  \
   15   7
```

è¿”å›å…¶å±‚æ¬¡éå†ç»“æœï¼š

```js
[
  [3],
  [9,20],
  [15,7]
]
```



è¿™é“é¢˜å’ŒäºŒå‰æ ‘çš„å±‚æ¬¡éå†ç›¸ä¼¼ï¼Œåªéœ€è¦æŠŠ `reverse()` å»é™¤å°±å¯ä»¥äº†

##### **BFS å¹¿åº¦ä¼˜å…ˆéå†**

```js
const levelOrder = function(root) {
    if(!root) return []
    let res = [], 
        queue = [root]
    while(queue.length) {
        let curr = [],
            temp = []
        while(queue.length) {
            let node = queue.shift()
            curr.push(node.val)
            if(node.left) temp.push(node.left)
            if(node.right) temp.push(node.right)
        }
        res.push(curr)
        queue = temp
    }
    return res
};
```

##### **DFS æ·±åº¦ä¼˜å…ˆéå†**

```js
const levelOrder = function(root) {
    const res = []
    var dep = function (node, depth){
        if(!node) return
        res[depth] = res[depth]||[]
        res[depth].push(node.val)
        dep(node.left, depth + 1)
        dep(node.right, depth + 1)
    }
    dep(root, 0)
    return res
}; 
```





### é‡æ„äºŒå‰æ ‘ï¼šä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘

è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·é‡å»ºè¯¥äºŒå‰æ ‘ã€‚å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚

**æ³¨æ„:**ä½ å¯ä»¥å‡è®¾æ ‘ä¸­æ²¡æœ‰é‡å¤çš„å…ƒç´ ã€‚

ä¾‹å¦‚ï¼Œç»™å‡º

```
å‰åºéå† preorder = [3,9,20,15,7]
ä¸­åºéå† inorder = [9,3,15,20,7]
```

è¿”å›å¦‚ä¸‹çš„äºŒå‰æ ‘ï¼š

```js
    3
   / \
  9  20
    /  \
   15   7
```

**é™åˆ¶ï¼š**

```
0 <= èŠ‚ç‚¹ä¸ªæ•° <= 5000
```

* è§£é¢˜æ€è·¯ï¼š

  >  ä»”ç»†åˆ†æå‰åºéå†å’Œä¸­åºéå†å¯ä»¥çŸ¥é“ï¼ˆä»¥é¢˜ç›®ä¸ºä¾‹ï¼‰ï¼š
  >
  > 1. å‰åºéå†çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸€å®šæ˜¯æ ¹èŠ‚ç‚¹ï¼Œè¿™é‡Œæ˜¯`3`
  > 2. æ‰¾åˆ°æ ¹èŠ‚ç‚¹ä¹‹åï¼Œæ ¹èŠ‚ç‚¹åœ¨ä¸­åºéå†ä¸­æŠŠæ•°ç»„ä¸€åˆ†ä¸ºäºŒï¼Œå³ä¸¤ä¸ªæ•°ç»„`[9]`å’Œ`[15, 20, 7]`ï¼Œè¿™ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«æ˜¯æ ¹èŠ‚ç‚¹`3`çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„ä¸­åºéå†ã€‚
  > 3. å‰åºéå†æ•°ç»„å»æ‰æ ¹èŠ‚ç‚¹ä¹‹åæ˜¯`[9,20,15,7]`ï¼Œè€Œè¿™ä¸ªæ•°ç»„çš„ç¬¬1é¡¹`[9]`ï¼ˆå·¦å­æ ‘çš„å¤§å°ï¼‰å’Œå3é¡¹`[20, 15, 7]`ï¼ˆå³å­æ ‘çš„å¤§å°ï¼‰åˆåˆ†åˆ«æ˜¯å·¦å­æ ‘å’Œå³å­æ ‘çš„å‰åºéå† åˆ°è¿™é‡Œå·²ç»å¾ˆæ˜æ˜¾äº†ï¼Œç”¨é€’å½’

  ```js
  function TreeNode(val) {
      this.val   =  val;
      this.left  =  null;
      this.right =  null;
  }
  const buildTree = function (preorder, inorder) {
      if (preorder.length) {
          let head = new TreeNode(preorder.shift());
          let index = inorder.indexOf(head.val);
          head.left = buildTree(
              preorder.slice(0, index),
              inorder.slice(0, index)
          );
          head.right = buildTree(preorder.slice(index), inorder.slice(index + 1));
          // è¿™é‡Œè¦æ³¨æ„ï¼Œpreorderå‰é¢shiftä¸€æ¬¡é•¿åº¦æ¯”inorderå°1
          return head;
      } else {
          return null;
      }
  };
  ```
  
  



###  äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚

äºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚

**è¯´æ˜:** å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ï¼š**ç»™å®šäºŒå‰æ ‘ `[3,9,20,null,null,15,7]` ï¼Œ

```
    3
   / \
  9  20
    /  \
   15   7
```

è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3



**è§£æ³•ä¸€ï¼šé€’å½’**

> * ä½¿ç”¨é€’å½’æ·±åº¦éå†å·¦å­æ ‘çš„é«˜åº¦å’Œå³å­æ ‘æ·±åº¦
> * æ¯”è¾ƒå·¦å­æ ‘å’Œå³å­æ ‘æ·±åº¦ï¼Œè·å–æœ€å¤§æ·±åº¦
> * è¿”å›æœ€å¤§æ·±åº¦åŠ 1ï¼›

```js
const maxDepth = function(root) {
    if(!root) return 0 
    return 1 + Math.max(maxDepth(root.left), maxDepth(root.right))
};
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)
- ç©ºé—´å¤æ‚åº¦ï¼šO(logâ¡n)

**è§£æ³•äºŒï¼šéé€’å½’ï¼Œå±‚æ¬¡éå†è·å–å±‚æ•°ï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰**

> äºŒå‰æ ‘å±‚æ¬¡å³ä¸ºäºŒå‰æ ‘æœ€å¤§æ·±åº¦ï¼Œä½¿ç”¨å±‚åºéå†ï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰çš„æ–¹å¼ï¼š
>
> * ä½¿ç”¨é˜Ÿåˆ—å­˜å‚¨æ¯ä¸€å±‚èŠ‚ç‚¹ï¼›
> * è·å–æ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°ï¼ˆé˜Ÿåˆ—é•¿åº¦å³ä¸ºèŠ‚ç‚¹æ•°ï¼‰ï¼›
> * éå†æ¯ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œå°†èŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘å…¥é˜Ÿåˆ—ï¼›
> * éå†å®Œæˆä¸€å±‚ï¼Œæ ‘æ·±åº¦åŠ 1ï¼›

```js
class TreeNode {
  constructor(value) {
    this.value = value;
    this.left = null;
    this.right = null;
  }
}

function maxDepth(root) {
  if (root === null) {
    return 0;
  }

  let depth = 0;
  const queue = [root]; //é˜Ÿåˆ—å­˜å‚¨æ¯ä¸€å±‚èŠ‚ç‚¹

  while (queue.length > 0) {
    // è·å–æ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°ï¼ˆé˜Ÿåˆ—é•¿åº¦å³ä¸ºèŠ‚ç‚¹æ•°ï¼‰
    const levelSize = queue.length;
	// éå†æ¯ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œå°†èŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘å…¥é˜Ÿåˆ—
    for (let i = 0; i < levelSize; i++) {
      const current = queue.shift();

      if (current.left !== null) {
        queue.push(current.left);
      }

      if (current.right !== null) {
        queue.push(current.right);
      }
    }
	// éå†å®Œæˆä¸€å±‚ï¼Œæ ‘æ·±åº¦åŠ 1
    depth++;
  }

  return depth;
}

// ç¤ºä¾‹ç”¨æ³•
// åˆ›å»ºäºŒå‰æ ‘
const root = new TreeNode(3);
root.left = new TreeNode(9);
root.right = new TreeNode(20);
root.right.left = new TreeNode(15);
root.right.right = new TreeNode(7);

const result = maxDepth(root);
console.log(result); // è¾“å‡º: 3
```



**è§£æ³•ä¸‰ï¼šéé€’å½’ï¼Œæ·±åº¦ä¼˜å…ˆæœç´¢**

> å…ˆåºéå†ï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰å­æ ‘ï¼Œå¹¶ä½¿ç”¨ maxDep è®°å½•æœ€å¤§æ·±åº¦
>
> * ä½¿ç”¨æ ˆä¿å­˜éå†çš„èŠ‚ç‚¹ï¼›
> * å¾ªç¯éå†æ ˆï¼Œç›´åˆ°æ ˆä¸ºç©ºï¼›
> * æ·±åº¦éå†å·¦å­æ ‘ï¼Œå°†å·¦å­æ ‘å…¥æ ˆï¼Œæ·±åº¦åŠ ä¸€ï¼Œå¹¶æ¯”è¾ƒå½“å‰æ·±åº¦æ˜¯å¦ä¸ºæœ€å¤§æ·±åº¦ï¼Œå¦‚æœæ˜¯ï¼Œä¿å­˜æœ€å¤§æ·±åº¦ï¼›
> * å‡ºæ ˆï¼Œæ·±åº¦å‡ä¸€ï¼ŒæŒ‡é’ˆæŒ‡å‘å³å­æ ‘

```js
const maxDepth = (root) => {
  if (!root) return 0;
  let stack = [];
  let cur = root;
  let dep = 0, maxDep = 0; // ä¿®æ­£åˆå§‹å€¼ä¸º0
  stack.push(root);
  while (stack.length) {
    while (cur) { // æ·±åº¦éå†å·¦å­æ ‘
      dep++; //æ·±åº¦åŠ 1
      if (dep > maxDep) { // æ›´æ–°maxDep
        maxDep = dep;
      }
      stack.push(cur.left);
      cur = cur.left;
    }
    cur = stack.pop(); // å‡ºæ ˆéå†èŠ‚ç‚¹å³èŠ‚ç‚¹
    dep--; //å‡ºæ ˆåæ·±åº¦å‡1
    cur = cur.right; // éå†èŠ‚ç‚¹å³èŠ‚ç‚¹
  }
  return maxDep;
};
```



### äºŒå‰æ ‘æœ€å°æ·±åº¦

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å°æ·±åº¦ã€‚

æœ€å°æ·±åº¦æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿‘å¶å­èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°é‡ã€‚

è¯´æ˜: å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

ç¤ºä¾‹:

ç»™å®šäºŒå‰æ ‘ `[3,9,20,null,null,15,7]`,

```js
    3
   / \
  9  20
    /  \
   15   7
```

è¿”å›å®ƒçš„æœ€å°æ·±åº¦ 2



**è§£æ³•ä¸€ï¼šé€’å½’**

> æ·±åº¦ä¼˜å…ˆ + åˆ†æ²»
>
> - å·¦å³å­æ ‘éƒ½ä¸ä¸ºç©ºï¼šå·¦å­æ ‘æ·±åº¦å’Œå³å­æ ‘æœ€å°æ·±åº¦çš„æœ€å°å€¼ + 1
> - å·¦æ ‘ä¸ºç©ºï¼šå³å­æ ‘æœ€å°æ·±åº¦çš„æœ€å°å€¼ + 1
> - å³æ ‘ä¸ºç©ºï¼šå·¦å­æ ‘æœ€å°æ·±åº¦ + 1

```js
    var minDepth = function (root) {
      if (!root) {
        return 0;
      }
      if (!root.left) {
        return 1 + minDepth(root.right);
      }
      if (!root.right) {
        return 1 + minDepth(root.left);
      }
      return Math.min(minDepth(root.left), minDepth(root.right)) + 1
    };

```



## äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBSTæ ‘ï¼‰

* äºŒå‰æŸ¥æ‰¾æ ‘æœ¨åˆç§°äºŒå‰æœç´¢æ ‘

* äºŒå‰æœç´¢æ ‘ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦æ»¡è¶³ï¼š

  - å·¦å­èŠ‚ç‚¹å€¼å°äºè¯¥èŠ‚ç‚¹å€¼

  - å³å­èŠ‚ç‚¹å€¼å¤§äºç­‰äºè¯¥èŠ‚ç‚¹å€¼


![å›¾ç‰‡](../images/äºŒå‰æ ‘æŸ¥æ‰¾.png)

åœ¨äºŒå‰æ ‘ä¸­ï¼Œæ‰€æœ‰å­èŠ‚ç‚¹å€¼éƒ½æ˜¯æ²¡æœ‰å›ºå®šè§„å¾‹çš„ï¼Œæ‰€ä»¥ä½¿ç”¨äºŒå‰æ ‘å­˜å‚¨ç»“æ„å­˜å‚¨æ•°æ®æ—¶ï¼ŒæŸ¥æ‰¾æ•°æ®çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œå› ä¸ºå®ƒè¦æŸ¥æ‰¾æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚

è€Œä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘å°±ä¸åŒäº†ï¼Œä¾‹å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å¦‚æœè¦æŸ¥æ‰¾ 6 ï¼Œå…ˆä»æ ¹èŠ‚ç‚¹ 10 æ¯”è¾ƒï¼Œ6 æ¯” 10 å°ï¼Œåˆ™æŸ¥æ‰¾å·¦å­æ ‘ï¼Œå†ä¸ 8 æ¯”è¾ƒï¼Œ6 æ¯” 8 å°ï¼Œç»§ç»­æŸ¥æ‰¾ 8 çš„å·¦å­æ ‘ï¼Œä¹Ÿå°±æ˜¯ 6ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å…ƒç´ ï¼Œç»“æŸã€‚







### åŸºæœ¬æ“ä½œ

```js
function BinarySearchTree() {
  let Node = function (key) {
    this.key = key
    this.left = null
    this.right = null
  }
  let root = null
  
  // æ’å…¥
  this.insert = function(key){}
  
  // æŸ¥æ‰¾
  this.search = function(key){}
  
  // åˆ é™¤
  this.remove = function(key){}
  
  // æœ€å¤§å€¼
  this.max = function(){}
  
  // æœ€å°å€¼
  this.min = function(){}
  
  // ä¸­åºéå†
  this.inOrderTraverse = function(){}
  
  // å…ˆåºéå†
  this.preOrderTraverse = function(){}
  
  // ååºéå†
  this.postOrderTraverse = function(){}
}
```

**æ’å…¥ï¼š**

- é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹
- åˆ¤æ–­æ ‘æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™è®¾ç½®æ’å…¥çš„èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹ï¼Œæ’å…¥æˆåŠŸï¼Œè¿”å›
- å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™æ¯”è¾ƒè¯¥èŠ‚ç‚¹ä¸æ ¹ç»“ç‚¹ï¼Œæ¯”æ ¹å°ï¼Œæ’å…¥å·¦å­æ ‘ï¼Œå¦åˆ™æ’å…¥å³å­æ ‘

```js
function insert(key) {
  // åˆ›å»ºæ–°èŠ‚ç‚¹
  let newNode = new Node(key)
  // åˆ¤æ–­æ˜¯å¦ä¸ºç©ºæ ‘
  if(root === null) {
    root = newNode
  } else {
    insertNode(root, newNode)
  }
}

// å°† insertNode æ’å…¥åˆ° node å­æ ‘ä¸Š
function insertNode(node, newNode) {
  if(newNode.key < node.key) {
    // æ’å…¥ node å·¦å­æ ‘
    if(node.left === null) {
      node.left = newNode
    } else {
      insertNode(node.left, newNode)
    }
  } else {
    // æ’å…¥ node å³å­æ ‘
    if(node.right === null) {
      node.right = newNode
    } else {
      insertNode(node.right, newNode)
    }
  }
}
```

**æœ€å€¼ï¼š**

æœ€å°å€¼ï¼šæ ‘æœ€å·¦ç«¯çš„èŠ‚ç‚¹

æœ€å¤§å€¼ï¼šæ ‘æœ€å³ç«¯çš„èŠ‚ç‚¹

```js
// æœ€å°å€¼
function min() {
  let node = root
  if(node) {
    while(node && node.left !== null) {
      node = node.left
    }
    return node.key
  }
  return null
}

// æœ€å¤§å€¼
function max() {
  let node = root
  if(node) {
    while(node && node.right !== null) {
      node = node.right
    }
    return node.key
  }
  return null
}
```

**æŸ¥æ‰¾ï¼š**

```js
function search(key) {
  return searchNode(root, key)
}

function searchNode(node, key) {
  if(node === null) 
    return false
  if(key < node.key) {
    return searchNode(node.left, key)
  } else if(key > node.key) {
    return searchNode(node.right, key)
  } else {
    return true
  }
}
```

**åˆ é™¤ï¼š**

* äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary Search Treeï¼ŒBSTï¼‰çš„åˆ é™¤èŠ‚ç‚¹æ“ä½œå¯ä»¥åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š
  1. åˆ é™¤çš„èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰ï¼šç›´æ¥åˆ é™¤å³å¯ã€‚
  
     > * ç¤ºä¾‹ï¼šåˆ é™¤å…ƒç´  27
     >
     > ![img](../images/äºŒå‰æŸ¥æ‰¾æ ‘-åˆ é™¤.gif)
  
  2. åˆ é™¤çš„èŠ‚ç‚¹æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼šå°†å­èŠ‚ç‚¹æ›¿ä»£è¦åˆ é™¤çš„èŠ‚ç‚¹ã€‚
  
     > * ç¤ºä¾‹ï¼šåˆ é™¤å…ƒç´  50
     >
     > ![img](../images/äºŒå‰æŸ¥æ‰¾æ ‘-åˆ é™¤1.gif)
  
  3. åˆ é™¤çš„èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼šéœ€è¦æ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹æˆ–å‰é©±èŠ‚ç‚¹æ¥æ›¿ä»£è¦åˆ é™¤çš„èŠ‚ç‚¹ã€‚
  
     > * å‰é©±èŠ‚ç‚¹ä¸åç»§èŠ‚ç‚¹ï¼š
     >
     >   * è¯¥èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ï¼šæ’åœ¨è¯¥èŠ‚ç‚¹å€¼çš„ä¸‹ä¸€ä¸ªä½ç½®çš„èŠ‚ç‚¹ï¼Œåœ¨è¯¥èŠ‚ç‚¹å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹ï¼ˆä¸Šå›¾ä¸­ 20 çš„åç»§èŠ‚ç‚¹æ˜¯29ï¼‰
     >   * è¯¥èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼šæ’åœ¨è¯¥èŠ‚ç‚¹å€¼çš„ä¸Šä¸€ä¸ªä½ç½®çš„èŠ‚ç‚¹ï¼Œåœ¨è¯¥èŠ‚ç‚¹å·¦å­æ ‘çš„æœ€å¤§èŠ‚ç‚¹ï¼ˆä¸Šå›¾ä¸­ 20 çš„å‰é©±èŠ‚ç‚¹æ˜¯13ï¼‰
     >
     > * ä½¿ç”¨åç»§èŠ‚ç‚¹ä»£æ›¿åˆ é™¤èŠ‚ç‚¹ï¼Œéœ€è¦è€ƒè™‘ä¸¤ç§æƒ…å†µï¼š
     >
     >   * åç»§èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼šç›´æ¥ä½¿ç”¨åç»§èŠ‚ç‚¹ä»£æ›¿å½“å‰èŠ‚ç‚¹ï¼Œååˆ é™¤åç»§èŠ‚ç‚¹ï¼›
     >
     >     ![å›¾ä¸€](../images/äºŒå‰æŸ¥æ‰¾æ ‘-åˆ é™¤2.gif)
     >
     >   * åç»§èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼šä½¿ç”¨åç»§èŠ‚ç‚¹ä»£æ›¿å½“å‰èŠ‚ç‚¹åï¼Œå°†åç»§èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä»£æ›¿åç»§èŠ‚ç‚¹
     >
     >     ![å›¾äºŒ](../images/äºŒå‰æŸ¥æ‰¾æ ‘-åˆ é™¤3.gif)
     >
     > 

```js
function remove(key) {
  root = removeNode(root, key)
}

function removeNode(node, key) {
  if(node === null) 
    return null
  if(key < node.key) {
    return removeNode(node.left, key)
  } else if(key > node.key) {
    return removeNode(node.right, key)
  } else {
    // key = node.key åˆ é™¤
    //å¶å­èŠ‚ç‚¹
    if(node.left === null && node.right === null) {
      node = null
      return node
    }
    // åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹
    if(node.left === null) {
      node = node.right
      return node
    }
    if(node.right === null) {
      node = node.left
      return node
    }
    // æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹
    // è·å–å‰é©±èŠ‚ç‚¹æ›¿ä»£å½“å‰èŠ‚ç‚¹ï¼šå³å­æ ‘çš„æœ€å°å€¼æ›¿æ¢å½“å‰èŠ‚ç‚¹
    let minRight = findMinNode(node.right)
    node.key = minRight.key
    node.right = removeNode(node.right, minRight.key)
    return node
  }
}

// è·å– node æ ‘æœ€å°èŠ‚ç‚¹
function findMinNode(node) {
  if(node) {
    while(node && node.right !== null) {
      node = node.right
    }
    return node
  }
  return null
}
```

### éå†

**ä¸­åºéå†ï¼š**

> ä¸­åºéå†å°±æ˜¯æŠŠæ ¹æ”¾åœ¨ä¸­é—´çš„éå†ï¼Œå³æŒ‰å…ˆå·¦èŠ‚ç‚¹ã€ç„¶åæ ¹èŠ‚ç‚¹ã€æœ€åå³èŠ‚ç‚¹ï¼ˆå·¦æ ¹å³ï¼‰çš„éå†æ–¹å¼ã€‚
>
> ç”±äºBSTæ ‘ä»»æ„èŠ‚ç‚¹éƒ½å¤§äºå·¦å­èŠ‚ç‚¹å€¼å°äºç­‰äºå³å­èŠ‚ç‚¹å€¼çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ **ä¸­åºéå†å…¶å®æ˜¯å¯¹ğŸŒ²è¿›è¡Œæ’åºæ“ä½œ** ï¼Œå¹¶ä¸”æ˜¯æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºæ’åºã€‚
>
> ![image-20231118102533992](../images/äºŒå‰æœç´¢æ ‘-ä¸­åºéå†.png)



```js
function inOrderTraverse(callback) {
  inOrderTraverseNode(root, callback)
}

function inOrderTraverseNode(node, callback) {
  if(node !== null) {
    // å…ˆéå†å·¦å­æ ‘
    inOrderTraverseNode(node.left, callback)
    // ç„¶åæ ¹èŠ‚ç‚¹
    callback(node.key)
    // å†éå†å³å­æ ‘
    inOrderTraverseNode(node.right, callback)
  }
}

// callback æ¯æ¬¡å°†éå†åˆ°çš„ç»“æœæ‰“å°åˆ°æ§åˆ¶å°
function callback(key) {
  console.log(key)
}
```

**å…ˆåºéå†ï¼š**

>  å·²ç»å®ç°çš„ä¸­åºéå†ï¼Œå…ˆåºéå†å°±å¾ˆç®€å•äº†ï¼Œå®ƒæ˜¯æŒ‰æ ¹å·¦å³çš„é¡ºåºéå†

```js
function preOrderTraverse() {
  preOrderTraverseNode(root, callback)
}

function preOrderTraverseNode(node, callback) {
  if(node !== null) {
    // å…ˆæ ¹èŠ‚ç‚¹
    callback(node.key)
    // ç„¶åéå†å·¦å­æ ‘
    preOrderTraverseNode(node.left, callback)
    // å†éå†å³å­æ ‘
    preOrderTraverseNode(node.right, callback)
  }
}

// callback æ¯æ¬¡å°†éå†åˆ°çš„ç»“æœæ‰“å°åˆ°æ§åˆ¶å°
function callback(key) {
  console.log(key)
}
```

**ååºéå†ï¼š**

> ååºéå†æŒ‰ç…§å·¦å³æ ¹çš„é¡ºåºéå†ï¼Œå®ç°ä¹Ÿå¾ˆç®€å•ã€‚

```js
function postOrderTraverse() {
  postOrderTraverseNode(root, callback)
}

function postOrderTraverseNode(node, callback) {
  if(node !== null) {
    // å…ˆéå†å·¦å­æ ‘
    postOrderTraverseNode(node.left, callback)
    // ç„¶åéå†å³å­æ ‘
    postOrderTraverseNode(node.right, callback)
    // æœ€åæ ¹èŠ‚ç‚¹
    callback(node.key)
  }
}

// callback æ¯æ¬¡å°†éå†åˆ°çš„ç»“æœæ‰“å°åˆ°æ§åˆ¶å°
function callback(key) {
  console.log(key)
}
```



### [**åˆ¤æ–­æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘**](https://www.nowcoder.com/practice/a69242b39baf45dea217815c7dedb52b?tpId=295&tqId=2288088&ru=/exam/oj&qru=/ta/format-top101/question-ranking&sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D295)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘æ ¹èŠ‚ç‚¹ï¼Œè¯·ä½ åˆ¤æ–­è¿™æ£µæ ‘æ˜¯ä¸æ˜¯äºŒå‰æœç´¢æ ‘ã€‚

äºŒå‰æœç´¢æ ‘æ»¡è¶³æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹å‡å°äºå½“å‰èŠ‚ç‚¹ä¸”å³å­æ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹å‡å¤§äºå½“å‰èŠ‚ç‚¹ã€‚

> ä¾‹1ï¼š
>
> ![img](../images/äºŒå‰æœç´¢æ ‘1.png)
>
> è¾“å…¥ï¼š
>
> ```
> {1,2,3}
> ```
>
> è¿”å›å€¼ï¼šfalse
>
> ![img](../images/äºŒå‰æœç´¢æ ‘2.png)
>
> è¾“å…¥ï¼š
>
> ```
> {2,1,3}
> ```
>
> è¿”å›å€¼ï¼štrue

**æ€è·¯ï¼š**

>  äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§å°±æ˜¯ä¸­åºéå†æ˜¯é€’å¢åºã€‚
>
>  æ—¢ç„¶æ˜¯åˆ¤æ–­æ˜¯å¦æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸­åºé€’å½’éå†ã€‚
>
>  åªè¦ä¹‹å‰çš„èŠ‚ç‚¹æ˜¯äºŒå‰æ ‘æœç´¢æ ‘ï¼Œé‚£ä¹ˆå¦‚æœå½“å‰çš„èŠ‚ç‚¹å°äºä¸Šä¸€ä¸ªèŠ‚ç‚¹å€¼é‚£ä¹ˆå°±å¯ä»¥å‘ä¸‹åˆ¤æ–­ã€‚

**é€’å½’:ä¸­åºéå†**

```js
/*
 * function TreeNode(x) {
 *   this.val = x;
 *   this.left = null;
 *   this.right = null;
 * }
 */
/**
 * ä»£ç ä¸­çš„ç±»åã€æ–¹æ³•åã€å‚æ•°åå·²ç»æŒ‡å®šï¼Œè¯·å‹¿ä¿®æ”¹ï¼Œç›´æ¥è¿”å›æ–¹æ³•è§„å®šçš„å€¼å³å¯
 *
 * 
 * @param root TreeNodeç±» 
 * @return boolå¸ƒå°”å‹
 */
function isValidBST( root ) {
    // write code here
    let preVal = Math.Infinity; //ä¿å­˜ä¸Šä¸€ä¸ªéå†èŠ‚ç‚¹çš„å€¼
    if(root == null) return true;
    if(!isValidBST(root.left)) return false; //é€’å½’éå†å·¦å­æ ‘ï¼Œåˆ¤æ–­å·¦å­æ ‘
    if(root.val < preVal) return false; //ä¸­åºéå†ä¸­å½“å‰èŠ‚ç‚¹æ˜¯å°äºå…ˆåºèŠ‚ç‚¹çš„å€¼ï¼Œåˆ™ä¸æ˜¯æœç´¢äºŒå‰æ ‘
    preVal =  root.val; //è®°å½•å½“å‰èŠ‚ç‚¹çš„å€¼
    return isValidBST(root.right);
}
module.exports = {
    isValidBST : isValidBST
};
```



### BSTæ ‘çš„å±€é™

* äºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾æ•ˆç‡å–å†³äºæ ‘çš„é«˜åº¦ï¼Œå› æ­¤ä¿æŒæ ‘çš„é«˜åº¦æœ€å°ï¼Œå³å¯ä¿è¯æ ‘çš„æŸ¥æ‰¾æ•ˆç‡ã€‚

* åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘æ¯å¤šä¸€å±‚ï¼Œå¯ä»¥å­˜å‚¨çš„å…ƒç´ éƒ½å¢åŠ ä¸€å€ã€‚ä¹Ÿå°±æ˜¯è¯´ n ä¸ªå…ƒç´ çš„äºŒå‰æœç´¢æ ‘ï¼Œå¯¹åº”çš„æ ‘é«˜ä¸º O(logn)ã€‚æ‰€ä»¥æˆ‘ä»¬æŸ¥æ‰¾å…ƒç´ ã€æ’å…¥å…ƒç´ çš„æ—¶é—´ä¹Ÿä¸º O(logn)ã€‚

* ä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¹¶ä¸æ˜¯é‚£ä¹ˆç†æƒ³ï¼Œä¾‹å¦‚ä¸€ç›´é€’å¢æˆ–é€’å‡çš„ç»™ä¸€ä¸ªäºŒå‰æŸ¥æ‰¾æ ‘æ’å…¥æ•°æ®ï¼Œé‚£ä¹ˆæ‰€æœ‰æ’å…¥çš„å…ƒç´ å°±ä¼šä¸€ç›´å‡ºç°åœ¨ä¸€ä¸ªæ ‘çš„å·¦èŠ‚ç‚¹ä¸Šï¼Œæ•°å‹ç»“æ„å°±ä¼šé€€åŒ–ä¸ºé“¾è¡¨ç»“æ„ï¼Œæ—¶é—´å¤æ‚åº¦å°±ä¼šè¶‹äº O(n)![image-20231119115742908](../images/äºŒå‰æŸ¥æ‰¾æ ‘-é€€åŒ–æˆå•é“¾è¡¨.png)

è€Œæˆ‘ä»¬ä¸Šé¢çš„å¹³è¡¡æ ‘å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ç”±æ­¤è¯ç”Ÿã€‚

## å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆAVLæ ‘ï¼‰

æ¦‚å¿µï¼šå·¦å³å­æ ‘é«˜åº¦å·®ä¸å¤§äº 1ï¼Œ ä»»æ„èŠ‚ç‚¹å€¼å¤§äºå®ƒçš„å·¦å­èŠ‚ç‚¹å€¼ï¼Œå°äºç­‰äºå®ƒçš„å³å­èŠ‚ç‚¹å€¼ã€‚

ç‰¹ç‚¹ï¼š

* **é«˜åº¦å¹³è¡¡**ï¼šå¹³è¡¡äºŒå‰æ ‘çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡1ï¼Œè¿™æ„å‘³ç€æ ‘çš„é«˜åº¦ç›¸å¯¹è¾ƒä½ï¼Œä½¿å¾—æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ç­‰æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥åœ¨è¾ƒä½çš„èŒƒå›´å†…ä¿æŒå¹³è¡¡ã€‚
* **å¿«é€ŸæŸ¥æ‰¾**ï¼šç”±äºå¹³è¡¡äºŒå‰æ ‘çš„ç»“æ„ç‰¹ç‚¹ï¼Œå¯ä»¥é€šè¿‡æ¯”è¾ƒæ ¹èŠ‚ç‚¹çš„å€¼ä¸ç›®æ ‡å€¼çš„å¤§å°æ¥ç¡®å®šå‘å·¦å­æ ‘æˆ–å³å­æ ‘è¿›è¡ŒæŸ¥æ‰¾ï¼Œä»è€Œåœ¨å¹³å‡æƒ…å†µä¸‹å®ç°å¿«é€Ÿçš„æŸ¥æ‰¾æ“ä½œã€‚
* **å¹³è¡¡æ€§ç»´æŠ¤**ï¼šå¹³è¡¡äºŒå‰æ ‘åœ¨æ’å…¥æˆ–åˆ é™¤èŠ‚ç‚¹æ—¶ä¼šè‡ªåŠ¨è¿›è¡Œå¹³è¡¡è°ƒæ•´ï¼Œé€šè¿‡æ—‹è½¬æ“ä½œå¯ä»¥ä¿æŒæ ‘çš„å¹³è¡¡æ€§ï¼Œé¿å…å‡ºç°æç«¯æƒ…å†µä¸‹æ ‘çš„é«˜åº¦è¿‡å¤§æˆ–è¿‡å°ï¼Œå¯¼è‡´æŸ¥æ‰¾æ€§èƒ½ä¸‹é™ã€‚
* **æ“ä½œå¤æ‚åº¦ä¿æŒè¾ƒä½**ï¼šåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­ï¼Œæ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾ç­‰æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œå…¶ä¸­næ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡ã€‚è¿™ä½¿å¾—å¹³è¡¡äºŒå‰æ ‘åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶å…·æœ‰è¾ƒé«˜çš„æ•ˆç‡ã€‚

![å›¾ç‰‡](../images/avlæ ‘.png)



#### å¹³è¡¡å› å­

**å®šä¹‰ï¼š**æŸèŠ‚ç‚¹çš„å·¦å­æ ‘ä¸å³å­æ ‘çš„é«˜åº¦(æ·±åº¦)å·®å³ä¸ºè¯¥èŠ‚ç‚¹çš„å¹³è¡¡å› å­ï¼ˆBF,Balance Factorï¼‰ï¼Œå¹³è¡¡äºŒå‰æ ‘ä¸­ä¸å­˜åœ¨å¹³è¡¡å› å­å¤§äº 1 çš„èŠ‚ç‚¹ã€‚åœ¨ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ä¸­ï¼ŒèŠ‚ç‚¹çš„å¹³è¡¡å› å­åªèƒ½å– 0 ã€1 æˆ–è€… -1 ï¼Œåˆ†åˆ«å¯¹åº”ç€å·¦å³å­æ ‘ç­‰é«˜ï¼Œå·¦å­æ ‘æ¯”è¾ƒé«˜ï¼Œå³å­æ ‘æ¯”è¾ƒé«˜

![image-20231119120102497](../images/å¹³è¡¡äºŒå‰æ ‘-å¹³è¡¡å› å­.png)![image-20231119120112702](../images/å¹³è¡¡äºŒå‰æ ‘-å¹³è¡¡å› å­1.png)![image-20231119120120522](../images/å¹³è¡¡äºŒå‰æ ‘-å¹³è¡¡å› å­2.png)

#### åˆ›å»ºå¹³è¡¡äºŒå‰æ ‘

æ€è·¯ï¼š

1. å®šä¹‰å¹³è¡¡äºŒå‰æ ‘èŠ‚ç‚¹çš„ç»“æ„ï¼šèŠ‚ç‚¹åº”åŒ…å«å€¼ã€å·¦å­æ ‘å’Œå³å­æ ‘çš„å¼•ç”¨ã€‚
2. å®ç°**è®¡ç®—èŠ‚ç‚¹é«˜åº¦çš„å‡½æ•°**ï¼šç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—èŠ‚ç‚¹çš„é«˜åº¦ï¼Œå³ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘çš„é«˜åº¦ã€‚èŠ‚ç‚¹çš„é«˜åº¦å¯ä»¥å®šä¹‰ä¸ºå·¦å­æ ‘å’Œå³å­æ ‘ä¸­è¾ƒé«˜çš„é‚£ä¸ªå­æ ‘çš„é«˜åº¦åŠ 1ã€‚
3. å®ç°**å¹³è¡¡å› å­è®¡ç®—å‡½æ•°**ï¼šå¹³è¡¡å› å­æ˜¯æŒ‡å·¦å­æ ‘é«˜åº¦ä¸å³å­æ ‘é«˜åº¦ä¹‹é—´çš„å·®å€¼ã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¹³è¡¡å› å­ï¼Œå³å·¦å­æ ‘é«˜åº¦å‡å»å³å­æ ‘é«˜åº¦ã€‚
4. å®ç°**èŠ‚ç‚¹æ—‹è½¬æ“ä½œ**ï¼šå¹³è¡¡äºŒå‰æ ‘é€šè¿‡æ—‹è½¬æ“ä½œæ¥ä¿æŒå¹³è¡¡ã€‚æ ¹æ®æƒ…å†µï¼Œå¯èƒ½éœ€è¦è¿›è¡Œå·¦æ—‹ã€å³æ—‹æˆ–åŒæ—‹è½¬ã€‚è¿™äº›æ—‹è½¬æ“ä½œå¯ä»¥é€šè¿‡è°ƒæ•´èŠ‚ç‚¹çš„æŒ‡é’ˆæ¥å®ç°ã€‚
5. å®ç°**æ’å…¥èŠ‚ç‚¹æ“ä½œ**ï¼šç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ’å…¥æ–°èŠ‚ç‚¹åˆ°å¹³è¡¡äºŒå‰æ ‘ä¸­ã€‚é¦–å…ˆï¼ŒæŒ‰ç…§äºŒå‰æŸ¥æ‰¾æ ‘çš„è§„åˆ™æ‰¾åˆ°æ’å…¥ä½ç½®ã€‚ç„¶åï¼Œé€šè¿‡æ—‹è½¬æ“ä½œæ¥è°ƒæ•´æ ‘çš„å¹³è¡¡æ€§ã€‚

```js
// å®šä¹‰å¹³è¡¡äºŒå‰æ ‘èŠ‚ç‚¹
class TreeNode {
  constructor(value) {
    this.value = value;
    this.left = null;
    this.right = null;
  }
}

// è®¡ç®—èŠ‚ç‚¹é«˜åº¦
function getHeight(node) {
  if (node === null) {
    return -1;
  }
  return Math.max(getHeight(node.left), getHeight(node.right)) + 1;
}

// è®¡ç®—å¹³è¡¡å› å­
function getBalanceFactor(node) {
  return getHeight(node.left) - getHeight(node.right);
}

// å·¦æ—‹è½¬æ“ä½œ
function rotateLeft(node) {
  const newRoot = node.right;
  node.right = newRoot.left;
  newRoot.left = node;
  return newRoot;
}

// å³æ—‹è½¬æ“ä½œ
function rotateRight(node) {
  const newRoot = node.left;
  node.left = newRoot.right;
  newRoot.right = node;
  return newRoot;
}

// æ’å…¥èŠ‚ç‚¹
function insertNode(root, value) {
  if (root === null) {
    return new TreeNode(value);
  }

  if (value < root.value) {
    root.left = insertNode(root.left, value);
  } else if (value > root.value) {
    root.right = insertNode(root.right, value);
  } else {
    // å€¼å·²å­˜åœ¨ï¼Œä¸è¿›è¡Œæ’å…¥
    return root;
  }
  // è®¡ç®—å¹³è¡¡å› å­
  const balanceFactor = getBalanceFactor(root);

  // å·¦å­æ ‘çš„å·¦ä¾§æ’å…¥æƒ…å†µï¼Œéœ€è¦è¿›è¡Œå³æ—‹è½¬
  if (balanceFactor > 1 && value < root.left.value) {
    return rotateRight(root);
  }

  // å³å­æ ‘çš„å³ä¾§æ’å…¥æƒ…å†µï¼Œéœ€è¦è¿›è¡Œå·¦æ—‹è½¬
  if (balanceFactor < -1 && value > root.right.value) {
    return rotateLeft(root);
  }

  // å·¦å­æ ‘çš„å³ä¾§æ’å…¥æƒ…å†µï¼Œéœ€è¦è¿›è¡Œå…ˆå·¦æ—‹åå³æ—‹
  if (balanceFactor > 1 && value > root.left.value) {
    root.left = rotateLeft(root.left);
    return rotateRight(root);
  }

  // å³å­æ ‘çš„å·¦ä¾§æ’å…¥æƒ…å†µï¼Œéœ€è¦è¿›è¡Œå…ˆå³æ—‹åå·¦æ—‹
  if (balanceFactor < -1 && value < root.right.value) {
    root.right = rotateRight(root.right);
    return rotateLeft(root);
  }

  return root;
}

// åˆ›å»ºå¹³è¡¡äºŒå‰æ ‘
function createBalancedBinaryTree(values) {
  let root = null;
  for (let i = 0; i < values.length; i++) {
    root = insertNode(root, values[i]);
  }
  return root;
}

// ç¤ºä¾‹ç”¨æ³•
const values = [3, 7, 4, 2, 1, 5, 6];
const root = createBalancedBinaryTree(values);
console.log(root);
```



#### åˆ¤æ–­å¹³è¡¡äºŒå‰æ ‘

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯é«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘ã€‚

ä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æ ‘å®šä¹‰ä¸ºï¼š

> ä¸€ä¸ªäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹ çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ã€‚

**ç¤ºä¾‹ 1:**

ç»™å®šäºŒå‰æ ‘ `[3,9,20,null,null,15,7]`

```
    3
   / \
  9  20
    /  \
   15   7
```

è¿”å› `true` ã€‚

**ç¤ºä¾‹ 2:**

ç»™å®šäºŒå‰æ ‘ `[1,2,2,3,3,null,null,4,4]`

```
      1
     / \
    2   2
   / \
  3   3
 / \
4   4
```

è¿”å› `false` ã€‚

**è§£ç­”ä¸€ï¼šè‡ªé¡¶å‘ä¸‹ï¼ˆé€’å½’+æ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰**

> **è§£é¢˜æ€è·¯ï¼š** 
>
> è‡ªé¡¶å‘ä¸‹çš„æ¯”è¾ƒæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æœ€å¤§é«˜åº¦å·®ï¼Œå¦‚æœäºŒå‰æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘æœ€å¤§é«˜åº¦å·®å°äºç­‰äº `1` ï¼Œå³æ¯ä¸ªå­æ ‘éƒ½å¹³è¡¡æ—¶ï¼Œæ­¤æ—¶äºŒå‰æ ‘æ‰æ˜¯å¹³è¡¡äºŒå‰æ ‘
>
> å…ˆè®¡ç®—æ·±åº¦ï¼Œå†åˆ¤æ–­æ˜¯å¦å¹³è¡¡

**ä»£ç å®ç°ï¼š**

```js
const isBalanced = function (root) {
  if(!root) return true
  //é€šè¿‡é€’å½’åœ°åˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æ·±åº¦å·®æ˜¯å¦å°äºç­‰äº1ï¼Œå¹¶ä¸”é€’å½’åœ°åˆ¤æ–­å·¦å³å­æ ‘æ˜¯å¦ä¹Ÿæ˜¯å¹³è¡¡çš„äºŒå‰æ ‘
  return Math.abs(depth(root.left) - depth(root.right)) <= 1
        && isBalanced(root.left)
        && isBalanced(root.right)
}
//è®¡ç®—å·¦å³èŠ‚ç‚¹çš„æ·±åº¦
const depth = function (node) {
    if(!node) return -1
    return 1 + Math.max(depth(node.left), depth(node.right))
}
```

> **å¤æ‚åº¦åˆ†æï¼š**
>
> - æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)ï¼Œè®¡ç®— `depth` å­˜åœ¨å¤§é‡å†—ä½™æ“ä½œ
> - ç©ºé—´å¤æ‚åº¦ï¼šO(n)

**è§£ç­”äºŒï¼šè‡ªåº•å‘ä¸Šï¼ˆé€’å½’è®¡ç®—ä¼˜åŒ–ï¼‰**

> **è§£é¢˜æ€è·¯ï¼š** 
>
> * åˆ©ç”¨åç»­éå†äºŒå‰æ ‘ï¼ˆå·¦å³æ ¹ï¼‰ï¼Œä»åº•è‡³é¡¶è¿”å›å­æ ‘æœ€å¤§é«˜åº¦ï¼Œåˆ¤å®šæ¯ä¸ªå­æ ‘æ˜¯ä¸æ˜¯å¹³è¡¡æ ‘ ï¼Œå¦‚æœå¹³è¡¡ï¼Œåˆ™ä½¿ç”¨å®ƒä»¬çš„é«˜åº¦åˆ¤æ–­çˆ¶èŠ‚ç‚¹æ˜¯å¦å¹³è¡¡ï¼Œå¹¶è®¡ç®—çˆ¶èŠ‚ç‚¹çš„é«˜åº¦ï¼Œå¦‚æœä¸å¹³è¡¡ï¼Œè¿”å› `-1` ã€‚
> * éå†æ¯”è¾ƒäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹ çš„å·¦å³å­æ ‘æ·±åº¦ï¼š
>   * æ¯”è¾ƒå·¦å³å­æ ‘çš„æ·±åº¦ï¼Œè‹¥å·®å€¼å¤§äº `1` åˆ™è¿”å›ä¸€ä¸ªæ ‡è®° `-1` ï¼Œè¡¨ç¤ºå½“å‰å­æ ‘ä¸å¹³è¡¡
>   * å·¦å³å­æ ‘æœ‰ä¸€ä¸ªä¸æ˜¯å¹³è¡¡çš„ï¼Œæˆ–å·¦å³å­æ ‘å·®å€¼å¤§äº `1` ï¼Œåˆ™äºŒå‰æ ‘ä¸å¹³è¡¡
>   * è‹¥å·¦å³å­æ ‘å¹³è¡¡ï¼Œè¿”å›å½“å‰æ ‘çš„æ·±åº¦ï¼ˆå·¦å³å­æ ‘çš„æ·±åº¦æœ€å¤§å€¼ `+1` ï¼‰
> * ä¼˜åŒ–åˆ†æï¼š
>   * è¯¥è§£æ³•ä¸­ï¼Œåœ¨è®¡ç®—æ·±åº¦çš„åŒæ—¶åˆ¤æ–­æ˜¯å¦å¹³è¡¡ï¼š
>     * å…ˆé€’å½’åœ°åˆ¤æ–­å·¦å³å­æ ‘æ˜¯å¦å¹³è¡¡ï¼Œå†è®¡ç®—æ·±åº¦å·®ã€‚è¯¥æ–¹æ³•åœ¨è®¡ç®—æ·±åº¦çš„åŒæ—¶ï¼Œå°±å¯ä»¥åˆ¤æ–­å­æ ‘æ˜¯å¦å¹³è¡¡ï¼Œé¿å…äº†é‡å¤è®¡ç®—æ·±åº¦çš„è¿‡ç¨‹ï¼Œè¿™æ ·åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥æé«˜æ•ˆç‡

**ä»£ç å®ç°ï¼š**

```js
const isBalanced = function (root) {
    return balanced(root) !== -1
};
//è®¡ç®—ä»¥å½“å‰èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘çš„æ·±åº¦
const balanced = function (node) {
    if (!node) return 0
    const left = balanced(node.left)//é€’å½’åœ°è®¡ç®—å·¦å³å­æ ‘çš„æ·±åº¦
    const right = balanced(node.right)//é€’å½’åœ°è®¡ç®—å·¦å³å­æ ‘çš„æ·±åº¦
    //åˆ¤æ–­å·¦å³å­æ ‘æ˜¯å¦å¹³è¡¡,å½“å‰èŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æ·±åº¦å·®æ˜¯å¦å°äºç­‰äº1
    if (left === -1 || right === -1 || Math.abs(left - right) > 1) {
        return -1
    }
    return Math.max(left, right) + 1
}
```

> **å¤æ‚åº¦åˆ†æï¼š**
>
> - æ—¶é—´å¤æ‚åº¦ï¼šO(n)
> - ç©ºé—´å¤æ‚åº¦ï¼šO(n)



## å®Œå…¨äºŒå‰æ ‘

* å®Œå…¨äºŒå‰æ ‘çš„å®šä¹‰ï¼šè‹¥äºŒå‰æ ‘çš„æ·±åº¦ä¸º hï¼Œé™¤ç¬¬ h å±‚å¤–ï¼Œå…¶å®ƒå„å±‚çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬ h å±‚æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½è¿ç»­é›†ä¸­åœ¨æœ€å·¦è¾¹ï¼Œè¿™å°±æ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚ï¼ˆç¬¬ h å±‚å¯èƒ½åŒ…å« [1~2h] ä¸ªèŠ‚ç‚¹ï¼‰

### åˆ¤æ–­æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œç¡®å®šä»–æ˜¯å¦æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ã€‚

å®Œå…¨äºŒå‰æ ‘çš„å®šä¹‰ï¼šè‹¥äºŒå‰æ ‘çš„æ·±åº¦ä¸º hï¼Œé™¤ç¬¬ h å±‚å¤–ï¼Œå…¶å®ƒå„å±‚çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬ h å±‚æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½è¿ç»­é›†ä¸­åœ¨æœ€å·¦è¾¹ï¼Œè¿™å°±æ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚ï¼ˆç¬¬ h å±‚å¯èƒ½åŒ…å« [1~2h] ä¸ªèŠ‚ç‚¹ï¼‰

> æ ·ä¾‹å›¾1ï¼š
>
> ![img](../images/å®Œå…¨äºŒå‰æ ‘1.png)
>
> * è¾“å…¥ï¼š
>
> ```js
> {1,2,3,4,5,6}
> ```
>
> * è¿”å›å€¼ï¼štrue
>
> æ ·ä¾‹å›¾2ï¼š
>
> ![img](../images/å®Œå…¨äºŒå‰æ ‘2.png)
>
> * è¾“å…¥ï¼š
>
> ```js
> {1,2,3,4,5,6,7}
> ```
>
> * è¿”å›å€¼ï¼štrue
>
> æ ·ä¾‹å›¾3ï¼š
>
> ![img](../images/å®Œå…¨äºŒå‰æ ‘3.png)
>
> è¾“å…¥ï¼š
>
> ```js
> {1,2,3,4,5,null,6}
> ```
>
> è¿”å›å€¼ï¼šfalse

æ€è·¯ï¼š**å±‚æ¬¡éå†**

> å¯¹å®Œå…¨äºŒå‰æ ‘æœ€é‡è¦çš„å®šä¹‰å°±æ˜¯å¶å­èŠ‚ç‚¹åªèƒ½å‡ºç°åœ¨æœ€ä¸‹å±‚å’Œæ¬¡ä¸‹å±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³åˆ°å¯ä»¥ä½¿ç”¨é˜Ÿåˆ—è¾…åŠ©è¿›è¡Œå±‚æ¬¡éå†
>
> ä»ä¸Šåˆ°ä¸‹éå†æ‰€æœ‰å±‚ï¼Œæ¯å±‚ä»å·¦åˆ°å³ï¼Œåªæœ‰æ¬¡ä¸‹å±‚å’Œæœ€ä¸‹å±‚æ‰æœ‰å¶å­èŠ‚ç‚¹ï¼Œå…¶ä»–å±‚å‡ºç°å¶å­èŠ‚ç‚¹å°±æ„å‘³ç€ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘
>
> **å…·ä½“åšæ³•ï¼š**
>
> - step 1ï¼šå…ˆåˆ¤æ–­ç©ºæ ‘ä¸€å®šæ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚
> - step 2ï¼šåˆå§‹åŒ–ä¸€ä¸ªé˜Ÿåˆ—è¾…åŠ©å±‚æ¬¡éå†ï¼Œå°†æ ¹èŠ‚ç‚¹åŠ å…¥ã€‚
> - step 3ï¼š
>   - é€æ¸ä»é˜Ÿåˆ—ä¸­å¼¹å‡ºå…ƒç´ è®¿é—®èŠ‚ç‚¹ï¼Œå¦‚æœé‡åˆ°æŸä¸ªèŠ‚ç‚¹ä¸ºç©ºï¼Œè¿›è¡Œæ ‡è®°ï¼ˆä»£è¡¨è®¿é—®åˆ°äº†å¶å­èŠ‚ç‚¹ï¼‰ï¼›
>   - è‹¥æ˜¯åç»­è¿˜æœ‰è®¿é—®ï¼Œåˆ™è¯´æ˜å¶å­èŠ‚ç‚¹å·¦å­èŠ‚ç‚¹ä¸ºç©ºï¼Œå³å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œä¸ç¬¦åˆå®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨ã€‚
> - step 4ï¼šå¦åˆ™ï¼Œç»§ç»­åŠ å…¥å·¦å³å­èŠ‚ç‚¹è¿›å…¥é˜Ÿåˆ—æ’é˜Ÿï¼Œç­‰å¾…è®¿é—®ã€‚

```js
/*
 * function TreeNode(x) {
 *   this.val = x;
 *   this.left = null;
 *   this.right = null;
 * }
 */
/**
 * ä»£ç ä¸­çš„ç±»åã€æ–¹æ³•åã€å‚æ•°åå·²ç»æŒ‡å®šï¼Œè¯·å‹¿ä¿®æ”¹ï¼Œç›´æ¥è¿”å›æ–¹æ³•è§„å®šçš„å€¼å³å¯
 *
 * 
 * @param root TreeNodeç±» 
 * @return boolå¸ƒå°”å‹
 */
function isCompleteTree( root ) {
    let isEmptyNode = false; // è®°å½•å·¦å­èŠ‚ç‚¹æ˜¯å¦ä¸ºç©º
    if(root == null) return true;
    const queue = [];
    queue.push(root);
    while(queue.length > 0) {
        const cur = queue.shift();
        if(cur === null) {
            isEmptyNode = true;
        }else {
            if(isEmptyNode) return false; // ä¸Šä¸€ä¸ªèŠ‚ç‚¹ä¸ºç©ºèŠ‚ç‚¹ï¼Œè€Œå½“å‰èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºå·¦å­èŠ‚ç‚¹ä¸ºç©ºï¼Œä¸ç¬¦åˆ
            queue.push(cur.left);
            queue.push(cur.right);
        }
    }
    return true;
}
module.exports = {
    isCompleteTree : isCompleteTree
};
```



## çº¢é»‘æ ‘

çº¢é»‘æ ‘ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„ã€ŒäºŒå‰æŸ¥æ‰¾æ ‘ã€ã€‚

åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å­¦ä¹ çš„ AVL æ ‘å’Œå³å°†å­¦ä¹ çš„çº¢é»‘æ ‘éƒ½æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘çš„å˜ä½“ï¼Œå¯è§äºŒå‰æŸ¥æ‰¾æ ‘çœŸçš„æ˜¯éå¸¸é‡è¦åŸºç¡€äºŒå‰æ ‘ï¼Œå¦‚æœå¿˜äº†å®ƒçš„å®šä¹‰å¯ä»¥å…ˆå›å¤´çœ‹çœ‹ã€‚

çº¢é»‘æ ‘æ˜¯ä¸€ç§æ¯”è¾ƒéš¾çš„æ•°æ®ç»“æ„ï¼Œé¢è¯•ä¸­å¾ˆå°‘æœ‰é¢è¯•å®˜è®©ä½ æ‰‹å†™ä¸€ä¸ªçº¢é»‘æ ‘ï¼Œæœ€å¤šçš„è¯æ˜¯è€ƒå¯Ÿä½ æ˜¯å¦ç†è§£çº¢é»‘æ ‘ï¼Œä»¥åŠä¸ºä»€ä¹ˆæœ‰äº† AVL æ ‘è¿˜éœ€è¦çº¢é»‘æ ‘ï¼Œæœ¬éƒ¨åˆ†å°±ä¸»è¦ä»‹ç»è¿™å—ã€‚

### ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘

çº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡ï¼ˆå¹¶ä¸æ˜¯ç»å¯¹å¹³è¡¡ï¼‰çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒé™¤äº†æ»¡è¶³äºŒåˆ†æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹å¤–ï¼Œè¿˜æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

- èŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²
- æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²èŠ‚ç‚¹
- æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹éƒ½å¿…é¡»æ˜¯å€¼ä¸º NULL çš„é»‘èŠ‚ç‚¹
- å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„
- ä»ä»»ä¸€èŠ‚ç‚¹åˆ°è¾¾å®ƒçš„æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„æ‰€æœ‰çš„è·¯å¾„ï¼Œéƒ½æœ‰ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹

![å›¾ç‰‡](../images/çº¢é»‘æ ‘.png)

è¿™äº›æ¡æ¡æ¡†æ¡†ä¿è¯çº¢é»‘æ ‘çš„è‡ªå¹³è¡¡ï¼Œä¿è¯çº¢é»‘æ ‘ä»æ ¹èŠ‚ç‚¹åˆ°è¾¾æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸ä¼šè¶…è¿‡æœ€çŸ­è·¯å¾„çš„ 2 å€ã€‚

è€ŒèŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦å†³å®šç€å¯¹èŠ‚ç‚¹çš„æŸ¥è¯¢æ•ˆç‡ï¼Œè¿™æ ·æˆ‘ä»¬ç¡®ä¿äº†ï¼Œæœ€åæƒ…å†µä¸‹çš„æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸è¶…è¿‡ O(logn) ï¼Œå¹¶ä¸”æœ‰è¾ƒé«˜çš„æ’å…¥å’Œåˆ é™¤æ•ˆç‡ã€‚

### çº¢é»‘æ ‘ VS å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLæ ‘ï¼‰

- æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œä¸€èˆ¬è®¤ä¸ºçº¢é»‘æ ‘çš„åˆ é™¤å’Œæ’å…¥ä¼šæ¯” AVL æ ‘æ›´å¿«ã€‚å› ä¸ºï¼Œçº¢é»‘æ ‘ä¸åƒ AVL æ ‘é‚£æ ·ä¸¥æ ¼çš„è¦æ±‚å¹³è¡¡å› å­å°äºç­‰äº1ï¼Œè¿™å°±å‡å°‘äº†ä¸ºäº†è¾¾åˆ°å¹³è¡¡è€Œè¿›è¡Œçš„æ—‹è½¬æ“ä½œæ¬¡æ•°ï¼Œå¯ä»¥è¯´æ˜¯ç‰ºç‰²ä¸¥æ ¼å¹³è¡¡æ€§æ¥æ¢å–æ›´å¿«çš„æ’å…¥å’Œåˆ é™¤æ—¶é—´ã€‚
- çº¢é»‘æ ‘ä¸è¦æ±‚æœ‰ä¸ä¸¥æ ¼çš„å¹³è¡¡æ€§æ§åˆ¶ï¼Œä½†æ˜¯çº¢é»‘æ ‘çš„ç‰¹ç‚¹ï¼Œä½¿å¾—ä»»ä½•ä¸å¹³è¡¡éƒ½ä¼šåœ¨ä¸‰æ¬¡æ—‹è½¬ä¹‹å†…è§£å†³ã€‚è€Œ AVL æ ‘å¦‚æœä¸å¹³è¡¡ï¼Œå¹¶ä¸ä¼šæ§åˆ¶æ—‹è½¬æ“ä½œæ¬¡æ•°ï¼Œæ—‹è½¬ç›´åˆ°å¹³è¡¡ä¸ºæ­¢ã€‚
- æŸ¥æ‰¾æ“ä½œï¼ŒAVLæ ‘çš„æ•ˆç‡æ›´é«˜ã€‚å› ä¸º AVL æ ‘è®¾è®¡æ¯”çº¢é»‘æ ‘æ›´åŠ å¹³è¡¡ï¼Œä¸ä¼šå‡ºç°å¹³è¡¡å› å­è¶…è¿‡ 1 çš„æƒ…å†µï¼Œå‡å°‘äº†æ ‘çš„å¹³å‡æœç´¢é•¿åº¦ã€‚

## Trie æ ‘

### ä»€ä¹ˆæ˜¯ Trie æ ‘

Trie æ ‘ï¼Œä¹Ÿç§°ä¸ºå­—å…¸æ ‘æˆ–å‰ç¼€æ ‘ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ç”¨æ¥å¤„ç†å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜çš„æ•°æ®ç»“æ„ï¼Œä»¥åŠç”¨æ¥è§£å†³é›†åˆä¸­æŸ¥æ‰¾å›ºå®šå‰ç¼€å­—ç¬¦ä¸²çš„æ•°æ®ç»“æ„ã€‚

### Trieæ ‘çš„åº”ç”¨ï¼šå­—ç¬¦ä¸²åŒ¹é…

åœ¨æœç´¢å¼•æ“ä¸­è¾“å…¥å…³é”®å­—ï¼Œæœç´¢å¼•æ“éƒ½ä¼šå¼¹å‡ºä¸‹æ‹‰æ¡†ï¼Œæ˜¾ç¤ºå„ç§å…³é”®å­—æç¤ºï¼Œä¾‹å¦‚å¿…åº”ï¼š

![å›¾ç‰‡](../images/å­—ç¬¦ä¸²åŒ¹é…(æ ‘).png)

å¿…åº”æ˜¯å¦‚ä½•å¤„ç†è¿™ä¸€è¿‡ç¨‹çš„å–ƒï¼Ÿ

æˆ–è€…ï¼Œå‡è®¾æˆ‘ä»¬æœ‰nä¸ªå•è¯çš„æ•°æ®é›†ï¼Œä»»æ„è¾“å…¥ä¸€ä¸²å­—ç¬¦ï¼Œå¦‚ä½•åœ¨æ•°æ®é›†ä¸­å¿«é€ŸåŒ¹é…å‡ºå…·æœ‰è¾“å…¥å­—ç¬¦å‰ç¼€çš„å•è¯ï¼Ÿ

è¿™æ ·ç±»ä¼¼çš„é—®é¢˜è¿˜æœ‰å¾ˆå¤šï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»å¤„ç†ï¼Ÿé€‰æ‹©æ€æ ·çš„æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Ÿå°¤å…¶æ˜¯é‡åˆ°å¤§è§„æ¨¡æ•°æ®æ—¶ï¼Œå¦‚ä½•æ›´é«˜æ•ˆçš„å¤„ç†ï¼Ÿ

æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æš´åŠ›ï¼Œå°†æ•°æ®é›†ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œé€ä¸ªå­—ç¬¦çš„åŒ¹é…è¾“å…¥å­—ç¬¦ï¼Œæ‰€æœ‰å­—ç¬¦éƒ½åŒ¹é…ä¸Šåˆ™å‰ç¼€åŒ¹é…æˆåŠŸã€‚è¿™ç§æ–¹å¼ä¹Ÿæ˜¯æˆ‘ä»¬å¼€å‘å½“ä¸­æœ€å¸¸ç”¨ï¼Œæœ€ç®€å•çš„æ–¹å¼ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(m*n)` ï¼Œå…¶ä¸­ `m` ä¸ºè¾“å…¥å­—ç¬¦ä¸²é•¿åº¦ï¼Œ `n` ä¸ºæ•°æ®é›†è§„æ¨¡ã€‚

è¿™ä¸ªæ—¶é—´å¤æ‚åº¦æ˜¯å¾ˆé«˜çš„ï¼Œå½“ `n` å¾ˆå¤§æ—¶ï¼Œæš´åŠ›æ³•æ€§èƒ½å°±ä¼šå¾ˆå·®ï¼Œæ­¤æ—¶å¿…é¡»é‡æ–°å¯»æ‰¾åˆé€‚çš„ç®—æ³•ã€‚

æˆ‘ä»¬çŸ¥é“åœ¨æ ‘ä¸ŠæŸ¥æ‰¾ã€æ’å…¥éƒ½æ¯”è¾ƒæ–¹ä¾¿ï¼Œä¸€èˆ¬æ—¶é—´å¤æ‚åº¦åªä¸æ ‘çš„é«˜åº¦ç›¸å…³ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ ‘ç»“æ„æ¥å¤„ç†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦è¯´çš„ Trie æ ‘ã€‚å…¶å®ï¼Œå¼•æ“æœç´¢å…³é”®å­—æç¤ºåº•å±‚ä¹Ÿæ˜¯é€šè¿‡ Trie æ ‘å®ç°çš„ã€‚

ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾æ•°æ®é›†æœ‰ï¼š`are` ã€ `add` ã€ `adopt` ã€`set` ã€`so` ï¼Œå®ƒæ„é”®è¿‡ç¨‹ï¼š

![å›¾ç‰‡](../images/å­—ç¬¦ä¸²åŒ¹é…æ ‘.png)

å½“æ‰€ä»¥çš„å­—ç¬¦ä¸²æ’å…¥å®Œæˆï¼ŒTrieæ ‘å°±æ„å»ºå®Œæˆäº†ã€‚

**Trieæ ‘çš„æœ¬è´¨**æ˜¯åˆ©ç”¨å­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€ï¼Œå°†é‡å¤çš„å‰ç¼€åˆå¹¶åœ¨ä¸€èµ·ï¼Œå…¶ä¸­æ ¹èŠ‚ç‚¹ä¸åŒ…å«ä»»ä½•ä¿¡æ¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„ï¼Œè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

åœ¨å­—ç¬¦ä¸²åŒ¹é…çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªè¦æŒ‰ç…§æ ‘çš„ç»“æ„ä»ä¸Šåˆ°ä¸‹åŒ¹é…å³å¯ã€‚

### å®ç° Trieï¼ˆå‰ç¼€æ ‘ï¼‰

å®ç°ä¸€ä¸ª Trie (å‰ç¼€æ ‘)ï¼ŒåŒ…å« `insert` , `search` , å’Œ `startsWith` è¿™ä¸‰ä¸ªæ“ä½œã€‚

**ç¤ºä¾‹:**

```js
Trie trie = new Trie();

trie.insert("apple");
trie.search("apple");   // è¿”å› true
trie.search("app");     // è¿”å› false
trie.startsWith("app"); // è¿”å› true
trie.insert("app");   
trie.search("app");     // è¿”å› true
```

**è¯´æ˜:**

- ä½ å¯ä»¥å‡è®¾æ‰€æœ‰çš„è¾“å…¥éƒ½æ˜¯ç”±å°å†™å­—æ¯ a-z æ„æˆçš„ã€‚
- ä¿è¯æ‰€æœ‰è¾“å…¥å‡ä¸ºéç©ºå­—ç¬¦ä¸²ã€‚

**è§£ç­”ï¼š**

æˆ‘ä»¬å¯ä»¥æ­å»ºä¸€ä¸ªåˆå§‹ Trie æ ‘ç»“æ„ï¼š

```js
// Trie æ ‘
var Trie = function() {};
// æ’å…¥
Trie.prototype.insert = function(word) {};
// æœç´¢
Trie.prototype.search = function(word) {};
// å‰ç¼€åŒ¹é…
Trie.prototype.startsWith = function(prefix) {};
```

#### **å¦‚ä½•å­˜å‚¨ä¸€ä¸ª Trie æ ‘**

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª Trie æ ‘ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒäºŒå‰æ ‘çš„å­˜å‚¨ï¼ˆé“¾å¼å­˜å‚¨ï¼‰æ˜¯é€šè¿‡å·¦å³æŒ‡é’ˆæ¥å®ç°çš„ï¼Œå³äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ï¼š

```js
function BinaryTreeNode(key) {
    // ä¿å­˜å½“å‰èŠ‚ç‚¹ key å€¼
    this.key = key
    // æŒ‡å‘å·¦å­èŠ‚ç‚¹
    this.left = null
    // æŒ‡å‘å³å­èŠ‚ç‚¹
    this.right = null
}
```

åœ¨è¿™é‡Œï¼Œå®ƒä¸æ­¢æœ‰ä¸¤ä¸ªå­—èŠ‚ç‚¹ï¼Œå®ƒæœ€å¤šæœ‰ a-z æ€»å…±æœ‰26ä¸ªå­èŠ‚ç‚¹ã€‚æœ€ç®€å•çš„å®ç°æ˜¯æŠŠå¥¹ä»¬ä¿å­˜åœ¨ä¸€ä¸ªå­—å…¸é‡Œï¼š

- `isEnd` ï¼šå½“å‰æ˜¯å¦æ˜¯ç»“æŸèŠ‚ç‚¹
- `children` ï¼šå½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ `key:value` å½¢å¼å®ç°ï¼Œ`key` ä¸ºå­èŠ‚ç‚¹å­—ç¬¦ï¼Œ`value` æŒ‡å‘å­èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹

```json
var TrieNode = function() {
    // next æ”¾å…¥å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹
    this.next = {};
    // å½“å‰æ˜¯å¦æ˜¯ç»“æŸèŠ‚ç‚¹
    this.isEnd = false;
};
```

æ‰€ä»¥ï¼š

```js
// Trie æ ‘
var Trie = function() {
    this.root = new TrieNode()
};
```

#### **æ’å…¥**

> - é¦–å…ˆåˆ¤æ–­æ’å…¥èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™è¿”å›
> - éå†å¾…æ’å…¥å­—ç¬¦ï¼Œä»æ ¹èŠ‚ç‚¹é€å­—ç¬¦æŸ¥æ‰¾ Trie æ ‘ï¼Œå¦‚æœå­—ç¬¦æŸ¥æ‰¾å¤±è´¥åˆ™æ’å…¥ï¼Œå¦åˆ™ç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå­—ç¬¦
> - å¾…æ’å…¥å­—ç¬¦éå†å®Œæˆï¼Œè®¾ç½®æœ€åå­—ç¬¦çš„ `isEnd` ä¸º `true`
> - è¿”å›æ’å…¥æˆåŠŸ

```js
Trie.prototype.insert = function(word) {
    if (!word) return false
    let node = this.root
    for (let i = 0; i < word.length; i++) {
        if (!node.next[word[i]]) {
            node.next[word[i]] = new TrieNode()
        }
        node = node.next[word[i]]
    }
    node.isEnd = true
    return true
};
```

#### **æœç´¢**

> - é¦–å…ˆåˆ¤æ–­æ’å…¥èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™è¿”å›
> - éå†å¾…æ’å…¥å­—ç¬¦ï¼Œä»æ ¹èŠ‚ç‚¹é€å­—ç¬¦æŸ¥æ‰¾ Trie æ ‘ï¼Œå¦‚æœå­—ç¬¦æŸ¥æ‰¾å¤±è´¥åˆ™è¿”å›falseï¼Œå¦åˆ™ç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå­—ç¬¦
> - å¾…æ’å…¥å­—ç¬¦éå†å®Œæˆï¼Œè¿”å›æœ€åä¸€ä¸ªèŠ‚ç‚¹ isEnd

```js
Trie.prototype.search = function(word) {
    if (!word) return false
    let node = this.root
    for (let i = 0; i < word.length; ++i) {
        if (node.next[word[i]]) {
            node = node.next[word[i]]
        } else {
            return false
        }
    }
    return node.isEnd
};
```

#### **å‰ç¼€åŒ¹é…**

```js
Trie.prototype.startsWith = function(prefix) {
    if (!prefix) return true
    let node = this.root
    for (let i = 0; i < prefix.length; ++i) {
        if (node.next[prefix[i]]) {
            node = node.next[prefix[i]]
        } else {
            return false
        }
    }
    return true
};
```



## 10 B æ ‘ã€B+ æ ‘ï¼ˆæ„Ÿå…´è¶£è¿›ï¼‰

### å¤šå‰æŸ¥æ‰¾æ ‘

æ—¢ç„¶äºŒå‰æŸ¥æ‰¾æ ‘å·²ç»ç†è§£äº†ï¼Œé‚£å¤šå‰æŸ¥æ‰¾æ ‘å°±å¾ˆå¥½ç†è§£äº†ï¼Œå®ƒä¸äºŒå‰æŸ¥æ‰¾æ ‘å”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯å¤šå‰çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤šå‰æŸ¥æ‰¾æ ‘å…è®¸ä¸€ä¸ªèŠ‚ç‚¹å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥æ‹¥æœ‰å¤šä¸ªå­æ ‘ã€‚

![å›¾ç‰‡](../images/båŠ æ ‘.png)

ä¸ºä»€ä¹ˆåœ¨æœ‰äºŒå‰æŸ¥æ‰¾æ ‘çš„æƒ…å†µä¸‹ï¼Œè¿˜è¦æœ‰å¤šå‰æŸ¥æ‰¾æ ‘å–ƒï¼Ÿ

æˆ‘ä»¬çŸ¥é“æ ‘çš„æ·±åº¦è¶Šé«˜ï¼Œæ—¶é—´å¤æ‚åº¦è¶Šé«˜ï¼Œæ€§èƒ½è¶Šå·®ï¼Œå¤šå‰æŸ¥æ‰¾æ ‘ç›¸å¯¹äºäºŒå‰æŸ¥æ‰¾æ ‘æ¥è¯´ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸æ­¢èƒ½æ‹¥æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œæ¯å±‚å­˜æ”¾çš„èŠ‚ç‚¹æ•°å¯æ¯”äºŒå‰æŸ¥æ‰¾æ ‘å¤šï¼Œè‡ªç„¶å¤šå‰æŸ¥æ‰¾æ ‘çš„çš„æ·±åº¦å°±è¦æ›´å°ï¼Œæ€§èƒ½ä¹Ÿå°±æ›´å¥½ã€‚ä¾‹å¦‚ä¸»è¦ç”¨äºå„å¤§å­˜å‚¨æ–‡ä»¶ç³»ç»Ÿä¸æ•°æ®åº“ç³»ç»Ÿä¸­çš„ B æ ‘ã€‚

### B æ ‘(B-tree)

B æ ‘ï¼Œåˆç§°å¹³è¡¡å¤šå‰æŸ¥æ‰¾æ ‘ã€‚å®ƒæ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„å¤šå‰æŸ¥æ‰¾æ ‘ã€‚

å¦‚æœä¸€æ£µå¤šè·¯æŸ¥æ‰¾æ ‘æ»¡è¶³ä»¥ä¸‹è§„åˆ™ï¼Œåˆ™ç§°ä¹‹ä¸º B æ ‘ï¼š

- æ’åºæ–¹å¼ï¼šæ‰€æœ‰èŠ‚ç‚¹å…³é”®å­—æ˜¯æŒ‰é€’å¢æ¬¡åºæ’åˆ—ï¼Œå¹¶éµå¾ªå·¦å°å³å¤§åŸåˆ™ï¼›
- å­èŠ‚ç‚¹æ•°ï¼šéå¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°>1ï¼Œä¸”<=M ï¼Œä¸”M>=2ï¼Œç©ºæ ‘é™¤å¤–ï¼ˆæ³¨ï¼šMé˜¶ä»£è¡¨ä¸€ä¸ªæ ‘èŠ‚ç‚¹æœ€å¤šæœ‰å¤šå°‘ä¸ªæŸ¥æ‰¾è·¯å¾„ï¼ŒM=Må‰ï¼ˆæˆ–è·¯ï¼‰ï¼Œå½“M=2åˆ™æ˜¯2å‰æ ‘ï¼ŒM=3åˆ™æ˜¯3å‰ï¼‰ï¼›
- å…³é”®å­—æ•°ï¼šæèŠ‚ç‚¹ï¼ˆéæ ¹éå¶ï¼‰çš„å…³é”®å­—æ•°é‡ï¼ˆKï¼‰åº”æ»¡è¶³ (M+1)/2  < K < M
- æ‰€æœ‰å¶å­èŠ‚ç‚¹å‡åœ¨åŒä¸€å±‚ã€å¶å­èŠ‚ç‚¹é™¤äº†åŒ…å«äº†å…³é”®å­—å’Œå…³é”®å­—è®°å½•çš„æŒ‡é’ˆå¤–ä¹Ÿæœ‰æŒ‡å‘å…¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆåªä¸è¿‡å…¶æŒ‡é’ˆåœ°å€éƒ½ä¸ºnullå¯¹åº”ä¸‹å›¾æœ€åä¸€å±‚èŠ‚ç‚¹çš„ç©ºæ ¼å­;

æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€å¼ å›¾åŠ æ·±ä¸€ä¸‹ç†è§£ï¼š

![å›¾ç‰‡](../images/bæ ‘.png)

### B+æ ‘

B+æ ‘ä¸Bæ ‘ä¸€æ ·éƒ½æ˜¯å¤šå‰å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼ˆåˆåå¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼‰ï¼ŒB+æ ‘ä¸Bæ ‘ä¸åŒçš„æ˜¯ï¼š

- B+æ ‘æ”¹è¿›äº†Bæ ‘ï¼Œè®©å†…ç»“ç‚¹ï¼ˆéå¶èŠ‚ç‚¹ï¼‰åªä½œç´¢å¼•ä½¿ç”¨ï¼Œå»æ‰äº†å…¶ä¸­æŒ‡å‘dataçš„æŒ‡é’ˆï¼Œä½¿å¾—æ¯ä¸ªç»“ç‚¹ä¸­èƒ½å¤Ÿå­˜æ”¾æ›´å¤šçš„keyï¼Œ å› æ­¤èƒ½æœ‰æ›´å¤§çš„å‡ºåº¦ã€‚

  è¿™æœ‰ä»€ä¹ˆç”¨ï¼Ÿè¿™æ ·å°±æ„å‘³ç€å­˜æ”¾åŒæ ·å¤šçš„keyï¼Œæ ‘çš„å±‚é«˜èƒ½è¿›ä¸€æ­¥è¢«å‹ç¼©ï¼Œä½¿å¾—æ£€ç´¢çš„æ—¶é—´æ›´çŸ­

- ä¸­é—´èŠ‚ç‚¹çš„å…ƒç´ æ•°é‡ä¸å­æ ‘ä¸€è‡´ï¼Œè€ŒBæ ‘å­æ ‘æ•°é‡ä¸å…ƒç´ æ•°é‡å¤š1

- å¶å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œå¯ä»¥é€šè¿‡æŒ‡é’ˆé¡ºåºæŸ¥æ‰¾

![å›¾ç‰‡](../images/b+æ ‘.png)

## ç¼–ç¨‹é¢˜

### äºŒå‰æ ‘è·¯å¾„æ€»å’Œ

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘å’Œä¸€ä¸ªç›®æ ‡å’Œï¼Œåˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’Œã€‚

**è¯´æ˜:** å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹:** ç»™å®šå¦‚ä¸‹äºŒå‰æ ‘ï¼Œä»¥åŠç›®æ ‡å’Œ `sum = 22` ï¼Œ

```
          5
         / \
        4   8
       /   / \
      11  13  4
     /  \      \
    7    2      1
```

è¿”å› `true` , å› ä¸ºå­˜åœ¨ç›®æ ‡å’Œä¸º `22` çš„æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ `5->4->11->2`ã€‚

>  **è§£é¢˜æ€è·¯ï¼š**
>
> * åªéœ€è¦éå†æ•´æ£µæ ‘
>
>   - å¦‚æœå½“å‰èŠ‚ç‚¹ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œé€’å½’å®ƒçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œä¼ é€’çš„å‚æ•°å°±æ˜¯ sum å‡å»å½“å‰çš„èŠ‚ç‚¹å€¼ï¼›
>
>   - å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ¤æ–­å‚æ•° sum æ˜¯å¦ç­‰äºå½“å‰èŠ‚ç‚¹å€¼ï¼Œå¦‚æœç›¸ç­‰å°±è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

**ä»£ç å®ç°ï¼š**

```js
var hasPathSum = function(root, sum) {
  // æ ¹èŠ‚ç‚¹ä¸ºç©º
  if (root === null) return false;
  
  // å¶èŠ‚ç‚¹ åŒæ—¶ sum å‚æ•°ç­‰äºå¶èŠ‚ç‚¹å€¼
  if (root.left === null && root.right === null) return root.val === sum;

  // æ€»å’Œå‡å»å½“å‰å€¼ï¼Œå¹¶é€’å½’
  sum = sum - root.val
  return hasPathSum(root.left, sum) || hasPathSum(root.right sum);
};
```

### ç¿»è½¬äºŒå‰æ ‘

ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root`ï¼Œè¯·å·¦å³ç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚

> ç¤ºä¾‹ï¼š
>
> ![img](../images/ç¿»è½¬äºŒå‰æ ‘.png)
>
> ```js
> è¾“å…¥ï¼šroot = [5,7,9,8,3,2,4]
> è¾“å‡ºï¼š[5,9,7,4,2,3,8]
> ```

æ€è·¯ï¼š**é€’å½’**

> * äºŒå‰æ ‘çš„å…ˆåºéå†
> * å½“å‰èŠ‚ç‚¹ä¸ºç©º,è¿”å›null
> * äº¤æ¢å·¦å³å­æ ‘
> * ä¾æ¬¡éå†å·¦å³èŠ‚ç‚¹

```js
var mirrorTree = function(root) {
    if(root == null){
        return null
    }
    [[root.left,root.right]] = [[root.right,root.left]]
    mirrorTree(root.left)
    mirrorTree(root.right)
    return root
};
```



### å¯¹ç§°äºŒå‰æ ‘

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦æ˜¯é•œåƒå¯¹ç§°çš„ã€‚

ä¾‹å¦‚ï¼ŒäºŒå‰æ ‘ `[1,2,2,3,4,4,3]` æ˜¯å¯¹ç§°çš„ã€‚

```js
    1
   / \
  2   2
 / \ / \
3  4 4  3
```

ä½†æ˜¯ä¸‹é¢è¿™ä¸ª `[1,2,2,null,3,null,3]` åˆ™ä¸æ˜¯é•œåƒå¯¹ç§°çš„:

```js
    1
   / \
  2   2
   \   \
   3    3
```

**è¿›é˜¶ï¼š**

ä½ å¯ä»¥è¿ç”¨é€’å½’å’Œè¿­ä»£ä¸¤ç§æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ

**è§£ç­”ï¼š**

ä¸€æ£µäºŒå‰æ ‘å¯¹ç§°ï¼Œåˆ™éœ€è¦æ»¡è¶³ï¼šæ ¹çš„å·¦å³å­æ ‘æ˜¯é•œåƒå¯¹ç§°çš„

ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ£µæ ‘çš„å·¦å­æ ‘éƒ½å’Œå¦å¤–ä¸€é¢—æ ‘çš„å³å­æ ‘é•œåƒå¯¹ç§°ï¼Œå·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹å€¼ä¸å³å­æ ‘çš„æ ¹èŠ‚ç‚¹å€¼ç›¸ç­‰

![å›¾ç‰‡](../images/å¯¹ç§°äºŒå‰æ ‘.png)

æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ¯”è¾ƒï¼š

- å·¦å³å­æ ‘çš„æ ¹èŠ‚ç‚¹å€¼æ˜¯å¦ç›¸ç­‰
- å·¦å³å­æ ‘æ˜¯å¦é•œåƒå¯¹ç§°

è¾¹ç•Œæ¡ä»¶ï¼š

- å·¦å³å­æ ‘éƒ½ä¸º `null` æ—¶ï¼Œè¿”å› `true`
- å·¦å³å­æ ‘æœ‰ä¸€ä¸ª `null` æ—¶ï¼Œè¿”å› `false`

**è§£æ³•ä¸€ï¼šé€’å½’**

```js
const isSymmetric = function(root) {
    if(!root) return true
    var isEqual = function(left, right) {
        if(!left && !right) return true
        if(!left || !right) return false
        return left.val === right.val
         && isEqual(left.left, right.right)
         && isEqual(left.right, right.left)
    }
    return isEqual(root.left, root.right)
};
```

>  **å¤æ‚åº¦åˆ†æï¼š**
>
> - æ—¶é—´å¤æ‚åº¦ï¼šO(n)
> - ç©ºé—´å¤æ‚åº¦ï¼šO(n)

**è§£æ³•äºŒï¼šè¿­ä»£**

> åˆ©ç”¨æ ˆæ¥è®°å½•æ¯”è¾ƒçš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šï¼Œé€’å½’å°±ä½¿ç”¨äº†è°ƒç”¨æ ˆï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ˆæ¥æ¨¡æ‹Ÿé€’å½’çš„è¿‡ç¨‹
>
> - é¦–å…ˆæ ¹çš„å·¦å³å­æ ‘å…¥æ ˆ
> - å°†å·¦å³å­æ ‘å‡ºæ ˆï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•°æ˜¯å¦äº’ä¸ºé•œåƒ
> - å¦‚æœå·¦å³å­æ ‘çš„æ ¹èŠ‚ç‚¹å€¼ç›¸ç­‰ï¼Œåˆ™å°†å·¦å­æ ‘çš„ `left` ã€å³å­æ ‘çš„ `right` ã€å·¦å­æ ‘çš„ `right` ã€å³å­æ ‘çš„ `left` ä¾æ¬¡å…¥æ ˆ
> - ç»§ç»­å‡ºæ ˆï¼ˆä¸€æ¬¡å‡ºæ ˆä¸¤ä¸ªè¿›è¡Œæ¯”è¾ƒï¼‰â€¦â€¦.
> - æ³¨æ„å…¥æ ˆé¡ºåºï¼Œåˆ¤æ–­é•œåƒå¯¹ç§°ï¼Œéœ€è¦æ¯”è¾ƒçš„æ˜¯ å·¦å­æ ‘çš„ `left` ä¸ å³å­æ ‘çš„ `right`  ï¼Œå·¦å­æ ‘çš„ `right` ä¸ å³å­æ ‘çš„ `left` ï¼Œæ ¹æ®æ ˆçš„å…ˆè¿›åå‡ºç‰¹ç‚¹ï¼Œå…ˆå…¥æ ˆ å·¦å­æ ‘çš„ `left` ã€å³å­æ ‘çš„ `right`  ï¼Œå› æ­¤åœ¨å‡ºæ ˆæ—¶ï¼Œè¿™ä¸¤ä¸ªæ‰ä¼šè¿›è¡Œå¯¹æ¯”ï¼›
>
> ä¾æ¬¡å¾ªç¯å‡ºæ ˆå…¥æ ˆï¼Œç›´åˆ°æ ˆä¸ºç©º

```js
const isSymmetric = function(root) {
    if(!root) return true
    let stack = [root.left, root.right]
    while(stack.length) {
        let right = stack.pop()
        let left = stack.pop()
        if(left && right) {
            if(left.val !== right.val) return false
            stack.push(left.left)
            stack.push(right.right)
            stack.push(left.right)
            stack.push(right.left)
        } else if(left || right) {
            return false
        }
    }
    return true
};
```

>  **å¤æ‚åº¦åˆ†æï¼š**
>
> - æ—¶é—´å¤æ‚åº¦ï¼šO(n)
> - ç©ºé—´å¤æ‚åº¦ï¼šO(n)



### [åˆå¹¶äºŒå‰æ ‘](https://leetcode.cn/problems/merge-two-binary-trees/)

ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ï¼š `root1` å’Œ `root2` ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ å°†å…¶ä¸­ä¸€æ£µè¦†ç›–åˆ°å¦ä¸€æ£µä¹‹ä¸Šæ—¶ï¼Œä¸¤æ£µæ ‘ä¸Šçš„ä¸€äº›èŠ‚ç‚¹å°†ä¼šé‡å ï¼ˆè€Œå¦ä¸€äº›ä¸ä¼šï¼‰ã€‚ä½ éœ€è¦å°†è¿™ä¸¤æ£µæ ‘åˆå¹¶æˆä¸€æ£µæ–°äºŒå‰æ ‘ã€‚åˆå¹¶çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹é‡å ï¼Œé‚£ä¹ˆå°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŠ ä½œä¸ºåˆå¹¶åèŠ‚ç‚¹çš„æ–°å€¼ï¼›å¦åˆ™ï¼Œ**ä¸ä¸º** null çš„èŠ‚ç‚¹å°†ç›´æ¥ä½œä¸ºæ–°äºŒå‰æ ‘çš„èŠ‚ç‚¹ã€‚

è¿”å›åˆå¹¶åçš„äºŒå‰æ ‘ã€‚

**æ³¨æ„:** åˆå¹¶è¿‡ç¨‹å¿…é¡»ä»ä¸¤ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚

>  **ç¤ºä¾‹ 1ï¼š**
>
> ![image-20231209150916381](../images/åˆå¹¶äºŒå‰æ ‘.png)
>
> ```
> è¾“å…¥ï¼šroot1 = [1,3,2,5], root2 = [2,1,3,null,4,null,7]
> è¾“å‡ºï¼š[3,4,5,5,4,null,7]
> ```
>
> **ç¤ºä¾‹ 2ï¼š**
>
> ```
> è¾“å…¥ï¼šroot1 = [1], root2 = [1,2]
> è¾“å‡ºï¼š[2,2]
> ```
>
>  
>
> **æç¤ºï¼š**
>
> - ä¸¤æ£µæ ‘ä¸­çš„èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ `[0, 2000]` å†…
> - `-104 <= Node.val <= 104`

æ–¹æ³•ä¸€ï¼š**é€’å½’ï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰**

> å¯ä»¥ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢åˆå¹¶ä¸¤ä¸ªäºŒå‰æ ‘ã€‚ä»æ ¹èŠ‚ç‚¹å¼€å§‹åŒæ—¶éå†ä¸¤ä¸ªäºŒå‰æ ‘ï¼Œå¹¶å°†å¯¹åº”çš„èŠ‚ç‚¹è¿›è¡Œåˆå¹¶ã€‚
>
> ä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹å¯èƒ½å­˜åœ¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼Œå¯¹äºæ¯ç§æƒ…å†µä½¿ç”¨ä¸åŒçš„åˆå¹¶æ–¹å¼ã€‚
>
> å¦‚æœä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹ä¹Ÿä¸ºç©ºï¼›
>
> å¦‚æœä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹ä¸ºå…¶ä¸­çš„éç©ºèŠ‚ç‚¹ï¼›
>
> å¦‚æœä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹çš„å€¼ä¸ºä¸¤ä¸ªäºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹çš„å€¼ä¹‹å’Œï¼Œæ­¤æ—¶éœ€è¦æ˜¾æ€§åˆå¹¶ä¸¤ä¸ªèŠ‚ç‚¹ã€‚
>
> å¯¹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œåˆå¹¶ä¹‹åï¼Œè¿˜è¦å¯¹è¯¥èŠ‚ç‚¹çš„å·¦å³å­æ ‘åˆ†åˆ«è¿›è¡Œåˆå¹¶ã€‚è¿™æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ã€‚

```js
/**
 * Definition for a binary tree node.
 * function TreeNode(val, left, right) {
 *     this.val = (val===undefined ? 0 : val)
 *     this.left = (left===undefined ? null : left)
 *     this.right = (right===undefined ? null : right)
 * }
 */
/**
 * @param {TreeNode} root1
 * @param {TreeNode} root2
 * @return {TreeNode}
 */
var mergeTrees = function(root1, root2) {
    if(root1 == null) return root2;
    if(root2 == null) return root1;
    const node = new TreeNode(root1.val + root2.val);
    node.left = mergeTrees(root1.left, root2.left); // æ³¨æ„åˆå¹¶åå°†é€’å½’æ–°èŠ‚ç‚¹çš„å­èŠ‚ç‚¹
    node.right = mergeTrees(root1.right, root2.right);
    return node;
};
```

æ–¹æ³•äºŒï¼š**å¹¿åº¦ä¼˜å…ˆæœç´¢**

> * é¦–å…ˆåˆ¤æ–­ä¸¤ä¸ªäºŒå‰æ ‘æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸¤ä¸ªäºŒå‰æ ‘éƒ½ä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘ä¹Ÿä¸ºç©º
> * å¦‚æœåªæœ‰ä¸€ä¸ªäºŒå‰æ ‘ä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘ä¸ºå¦ä¸€ä¸ªéç©ºçš„äºŒå‰æ ‘ã€‚
> * å¦‚æœä¸¤ä¸ªäºŒå‰æ ‘éƒ½ä¸ä¸ºç©ºï¼Œåˆ™é¦–å…ˆè®¡ç®—åˆå¹¶åçš„æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åä»åˆå¹¶åçš„äºŒå‰æ ‘ä¸ä¸¤ä¸ªåŸå§‹äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹åŒæ—¶éå†æ¯ä¸ªäºŒå‰æ ‘ï¼Œå¹¶å°†å¯¹åº”çš„èŠ‚ç‚¹è¿›è¡Œåˆå¹¶ã€‚
>
> å…·ä½“è¿‡ç¨‹ï¼š
>
> * ä½¿ç”¨ä¸‰ä¸ªé˜Ÿåˆ—åˆ†åˆ«å­˜å‚¨åˆå¹¶åçš„äºŒå‰æ ‘çš„èŠ‚ç‚¹ä»¥åŠä¸¤ä¸ªåŸå§‹äºŒå‰æ ‘çš„èŠ‚ç‚¹ã€‚
>
> * åˆå§‹æ—¶å°†æ¯ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹åˆ†åˆ«åŠ å…¥ç›¸åº”çš„é˜Ÿåˆ—ã€‚
>
> * æ¯æ¬¡ä»æ¯ä¸ªé˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ¤æ–­ä¸¤ä¸ªåŸå§‹äºŒå‰æ ‘çš„èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºã€‚
>
>   * å¦‚æœä¸¤ä¸ªåŸå§‹äºŒå‰æ ‘çš„å½“å‰èŠ‚ç‚¹ä¸­è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘çš„å¯¹åº”èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¹Ÿä¸ä¸ºç©ºã€‚å¯¹äºå³å­èŠ‚ç‚¹åŒç†ã€‚
>
> * å¦‚æœåˆå¹¶åçš„äºŒå‰æ ‘çš„å·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™éœ€è¦æ ¹æ®ä¸¤ä¸ªåŸå§‹äºŒå‰æ ‘çš„å·¦å­èŠ‚ç‚¹è®¡ç®—åˆå¹¶åçš„äºŒå‰æ ‘çš„å·¦å­èŠ‚ç‚¹ä»¥åŠæ•´ä¸ªå·¦å­æ ‘ã€‚è€ƒè™‘ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š
>
>   * å¦‚æœä¸¤ä¸ªåŸå§‹äºŒå‰æ ‘çš„å·¦å­èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘çš„å·¦å­èŠ‚ç‚¹çš„å€¼ä¸ºä¸¤ä¸ªåŸå§‹äºŒå‰æ ‘çš„å·¦å­èŠ‚ç‚¹çš„å€¼ä¹‹å’Œï¼Œåœ¨åˆ›å»ºåˆå¹¶åçš„äºŒå‰æ ‘çš„å·¦å­èŠ‚ç‚¹ä¹‹åï¼Œå°†æ¯ä¸ªäºŒå‰æ ‘ä¸­çš„å·¦å­èŠ‚ç‚¹éƒ½åŠ å…¥ç›¸åº”çš„é˜Ÿåˆ—ï¼›
>
>   * å¦‚æœä¸¤ä¸ªåŸå§‹äºŒå‰æ ‘çš„å·¦å­èŠ‚ç‚¹æœ‰ä¸€ä¸ªä¸ºç©ºï¼Œå³æœ‰ä¸€ä¸ªåŸå§‹äºŒå‰æ ‘çš„å·¦å­æ ‘ä¸ºç©ºï¼Œåˆ™åˆå¹¶åçš„äºŒå‰æ ‘çš„å·¦å­æ ‘å³ä¸ºå¦ä¸€ä¸ªåŸå§‹äºŒå‰æ ‘çš„å·¦å­æ ‘ï¼Œæ­¤æ—¶ä¹Ÿä¸éœ€è¦å¯¹éç©ºå·¦å­æ ‘ç»§ç»­éå†ï¼Œå› æ­¤ä¸éœ€è¦å°†å·¦å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ã€‚
>
> * å¯¹äºå³å­èŠ‚ç‚¹å’Œå³å­æ ‘ï¼Œå¤„ç†æ–¹æ³•ä¸å·¦å­èŠ‚ç‚¹å’Œå·¦å­æ ‘ç›¸åŒã€‚
>
> ![](../images/åˆå¹¶äºŒå‰æ ‘.gif)

```js
/**
 * Definition for a binary tree node.
 * function TreeNode(val, left, right) {
 *     this.val = (val===undefined ? 0 : val)
 *     this.left = (left===undefined ? null : left)
 *     this.right = (right===undefined ? null : right)
 * }
 */
/**
 * @param {TreeNode} root1
 * @param {TreeNode} root2
 * @return {TreeNode}
 */
var mergeTrees = function (root1, root2) {
    if (root1 == null) return root2;
    if (root2 == null) return root1;
    // åˆ›å»ºåˆå¹¶èŠ‚ç‚¹
    const mergedNode = new TreeNode(root1.val + root2.val);
    let queue = [], queue1 = [], queue2 = []; //åˆ›å»ºä¸‰ä¸ªé˜Ÿåˆ—åˆ†åˆ«å­˜å‚¨åˆå¹¶èŠ‚ç‚¹å’ŒåŸå§‹å·¦å³èŠ‚ç‚¹
    queue.push(mergedNode); // å­˜å‚¨èŠ‚ç‚¹
    queue1.push(root1);
    queue2.push(root2);
    // éå†é˜Ÿåˆ—ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºï¼Œå³ä¸ºå±‚æ¬¡éå†ç»“æŸ
    while (queue1.length > 0 && queue2.length > 0) {
        // è·å–é˜Ÿåˆ—èŠ‚ç‚¹ï¼Œå³åˆå¹¶èŠ‚ç‚¹å’Œå¯¹æ¯”ä¸¤æ£µæ ‘çš„å¯¹æ¯”èŠ‚ç‚¹
        const node = queue.shift(), node1 = queue1.shift(), node2 = queue2.shift();
        // è·å–ä¸¤ä¸ªæ ‘çš„å¯¹æ¯”èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹
        const left1 = node1.left, left2 = node2.left, right1 = node1.right, right2 = node2.right;
        // å¯¹ä¸¤æ£µæ ‘çš„å·¦èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”
        if (left1 != null || left2 != null) {
            // å·¦èŠ‚ç‚¹å·¦å³èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œåˆå¹¶ä¸¤ä¸ªèŠ‚ç‚¹å†…å®¹ï¼Œå¹¶å°†ä¸‰ä¸ªæ ‘å·¦èŠ‚ç‚¹å…¥é˜Ÿåˆ—
            if (left1 != null && left2 != null) {
                const left = new TreeNode(left1.val + left2.val);
                node.left = left;
                queue.push(left);
                queue1.push(left1);
                queue2.push(left2);
            } else if (left1 != null) { // æ ‘2 å·¦èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™å°†æ ‘1 å·¦èŠ‚ç‚¹ä½œä¸ºæ–°æ ‘å·¦èŠ‚ç‚¹
                node.left = left1;
            } else if (left2 != null) {// æ ‘1 å·¦èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™å°†æ ‘2 å·¦èŠ‚ç‚¹ä½œä¸ºæ–°æ ‘å·¦èŠ‚ç‚¹
                node.left = left2;
            }
        }
        // å¯¹ä¸¤æ£µæ ‘çš„å³èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”
        if (right1 != null || right2 != null) {
               // å³èŠ‚ç‚¹å·¦å³èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œåˆå¹¶ä¸¤ä¸ªèŠ‚ç‚¹å†…å®¹ï¼Œå¹¶å°†ä¸‰ä¸ªæ ‘å·¦èŠ‚ç‚¹å…¥é˜Ÿåˆ—
            if (right1 != null && right2 != null) {
                const right = new TreeNode(right1.val + right2.val);
                node.right = right;
                queue.push(right);
                queue1.push(right1);
                queue2.push(right2);
            } else if (right1 != null) { // æ ‘2 å³èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™å°†æ ‘1 å³èŠ‚ç‚¹ä½œä¸ºæ–°æ ‘å·¦èŠ‚ç‚¹
                node.right = right1;
            } else if (right2 != null) {// æ ‘1 å³èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™å°†æ ‘2 å³èŠ‚ç‚¹ä½œä¸ºæ–°æ ‘å·¦èŠ‚ç‚¹
                node.right = right2;
            }
        }
       
    }
     return mergedNode;
};
```



### [äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.cn/problems/er-cha-shu-de-zui-jin-gong-gong-zu-xian-lcof/solutions/531784/er-cha-shu-de-zui-jin-gong-gong-zu-xian-6fdt7/)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€

ä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹äºŒå‰æ ‘: root = [3,5,1,6,2,0,8,null,null,7,4]

![å›¾ç‰‡](../images/äºŒå‰æ ‘æœ€å…ˆç¥–å…ˆ.png)

**ç¤ºä¾‹ 1:**

```js
è¾“å…¥: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
è¾“å‡º: 3
è§£é‡Š: èŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3ã€‚
```

**ç¤ºä¾‹ 2:**

```js
è¾“å…¥: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4
è¾“å‡º: 5
è§£é‡Š: èŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 5ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚
```

**è¯´æ˜**:

- æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚
- pã€q ä¸ºä¸åŒèŠ‚ç‚¹ä¸”å‡å­˜åœ¨äºç»™å®šçš„äºŒå‰æ ‘ä¸­ã€‚

**è§£æ³•ä¸€ï¼šé€’å½’å®ç°**

> å¦‚æœæ ‘ä¸ºç©ºæ ‘æˆ– `p` ã€ `q` ä¸­ä»»ä¸€èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ `p` ã€ `q` çš„æœ€è¿‘å…¬å…±èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹
>
> å¦‚æœä¸æ˜¯ï¼Œå³äºŒå‰æ ‘ä¸ä¸ºç©ºæ ‘ï¼Œä¸” `p` ã€ `q` ä¸ºéæ ¹èŠ‚ç‚¹ï¼Œåˆ™é€’å½’éå†å·¦å³å­æ ‘ï¼Œè·å–å·¦å³å­æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œ
>
> - æƒ…å†µä¸€ï¼šå·¦å­æ ‘å’Œå³å­æ ‘å‡åŒ…å«  p èŠ‚ç‚¹æˆ–  q èŠ‚ç‚¹ï¼Œå¦‚æœå·¦å­æ ‘åŒ…å«çš„æ˜¯  p èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå³å­æ ‘åªèƒ½åŒ…å«  q èŠ‚ç‚¹ï¼Œåä¹‹äº¦ç„¶ï¼Œå› ä¸º p  èŠ‚ç‚¹å’Œ q èŠ‚ç‚¹éƒ½æ˜¯ä¸åŒä¸”å”¯ä¸€çš„èŠ‚ç‚¹ï¼Œå› æ­¤å¦‚æœæ»¡è¶³è¿™ä¸ªåˆ¤æ–­æ¡ä»¶å³å¯è¯´æ˜ x  å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼›
> - æƒ…å†µäºŒï¼šx æ°å¥½æ˜¯ p èŠ‚ç‚¹æˆ– q èŠ‚ç‚¹ä¸”å®ƒçš„å·¦å­æ ‘æˆ–å³å­æ ‘æœ‰ä¸€ä¸ªåŒ…å«äº†å¦ä¸€ä¸ªèŠ‚ç‚¹çš„æƒ…å†µï¼Œå› æ­¤å¦‚æœæ»¡è¶³è¿™ä¸ªåˆ¤æ–­æ¡ä»¶äº¦å¯è¯´æ˜ x å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
> - æƒ…å†µä¸‰ï¼šp èŠ‚ç‚¹å’ŒqèŠ‚ç‚¹éƒ½åˆ†å¸ƒåœ¨ x çš„å·¦å­æ ‘æˆ–å³å­æ ‘ï¼Œåˆ™ x æ˜¯ p èŠ‚ç‚¹å’Œq èŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚
>   - ç¤ºä¾‹ï¼šæœç´¢æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹ `9` å’Œ `11` çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ![](../images/äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ.gif)

**ä»£ç å®ç°ï¼š**

```js
var lowestCommonAncestor = function(root, p, q) {
    let ans;
    const dfs = (root, p, q) => {
        if (root === null) return false;// æ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œä¸å­˜åœ¨å…¬å…±ç¥–å…ˆ
        const lson = dfs(root.left, p, q); // æ·±åº¦æœç´¢å·¦å­æ ‘pã€q çš„å…¬å…±ç¥–å…ˆ,å…¶ä¸­ lson ä»£è¡¨ x èŠ‚ç‚¹çš„å·¦å­©å­
        const rson = dfs(root.right, p, q);// æ·±åº¦æœç´¢å³å­æ ‘pã€q çš„å…¬å…±ç¥–å…ˆ,å…¶ä¸­ Rson ä»£è¡¨ x èŠ‚ç‚¹çš„å³å­©å­
        if ((lson && rson) || ((root.val === p.val || root.val === q.val) && (lson || rson))) {
            ans = root;
        } 
        return lson || rson || (root.val === p.val || root.val === q.val);
    }
    dfs(root, p, q);
    return ans;
};

```

>  **å¤æ‚åº¦åˆ†æï¼š**
>
>  - æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ Næ˜¯äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ã€‚äºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹æœ‰ä¸”åªä¼šè¢«è®¿é—®ä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O(N)ã€‚
>  - ç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N æ˜¯äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ã€‚é€’å½’è°ƒç”¨çš„æ ˆæ·±åº¦å–å†³äºäºŒå‰æ ‘çš„é«˜åº¦ï¼ŒäºŒå‰æ ‘æœ€åæƒ…å†µä¸‹ä¸ºä¸€æ¡é“¾ï¼Œæ­¤æ—¶é«˜åº¦ä¸º Nï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º O(N)ã€‚



**è§£æ³•äºŒï¼šå“ˆå¸Œè¡¨å­˜å‚¨çˆ¶èŠ‚ç‚¹**

> * æˆ‘ä»¬å¯ä»¥ç”¨å“ˆå¸Œè¡¨å­˜å‚¨æ‰€æœ‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¿¡æ¯ä» p ç»“ç‚¹å¼€å§‹ä¸æ–­å¾€ä¸Šè·³ï¼Œå¹¶è®°å½•å·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹ï¼Œå†ä» q èŠ‚ç‚¹å¼€å§‹ä¸æ–­å¾€ä¸Šè·³ï¼Œå¦‚æœç¢°åˆ°å·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚
>
> * ç®—æ³•
>   * ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ•´æ£µäºŒå‰æ ‘ï¼Œç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æŒ‡é’ˆã€‚
>   * ä» p èŠ‚ç‚¹å¼€å§‹ä¸æ–­å¾€å®ƒçš„ç¥–å…ˆç§»åŠ¨ï¼Œå¹¶ç”¨æ•°æ®ç»“æ„è®°å½•å·²ç»è®¿é—®è¿‡çš„ç¥–å…ˆèŠ‚ç‚¹ã€‚
>   * åŒæ ·ï¼Œæˆ‘ä»¬å†ä» q èŠ‚ç‚¹å¼€å§‹ä¸æ–­å¾€å®ƒçš„ç¥–å…ˆç§»åŠ¨ï¼Œå¦‚æœæœ‰ç¥–å…ˆå·²ç»è¢«è®¿é—®è¿‡ï¼Œå³æ„å‘³ç€è¿™æ˜¯ p å’Œ q çš„æ·±åº¦æœ€æ·±çš„å…¬å…±ç¥–å…ˆï¼Œå³ LCA èŠ‚ç‚¹ã€‚

```js
var lowestCommonAncestor = function(root,p,q) {
    const parents = new Map() // ä½¿ç”¨mapå­˜å‚¨è®¿æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„èŠ‚ç‚¹
    const visited = new Set() // ä½¿ç”¨ set å­˜å‚¨pã€q è®¿é—®çš„çˆ¶èŠ‚ç‚¹æŸ¥æ‰¾é“¾
    // æ·±åº¦æœç´¢ï¼Œéå†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å­˜å‚¨å…¶çˆ¶èŠ‚ç‚¹
    const dfs = function(root) {
        if(root.left !=null) {
            parents.set(root.left.value,root) // ä¿å­˜å½“å‰å€¼å’Œå®ƒå¯¹åº”çš„æ ¹èŠ‚ç‚¹
            dfs(root.left)
        }
        if(root.right !=null) {
            parents.set(root.right.value,root) // ä¿å­˜å½“å‰å€¼å’Œå®ƒå¯¹åº”çš„æ ¹èŠ‚ç‚¹
            dfs(root.right)
        }
    }
    
    const getLowestCommonAncestor = function(root,p,q){
        dfs(root) // æ·±åº¦ä¼˜å…ˆæœç´¢è®°å½•æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹é“¾æ¡
        while(p!=null) {// é€†å‘æŸ¥æ‰¾ p çš„çˆ¶èŠ‚ç‚¹é“¾æ¡
            visited.push(p.value) // ä¿å­˜pçš„è®¿é—®è·¯å¾„
            p = parents.get(p.value) // è·å– p çš„çˆ¶äº²èŠ‚ç‚¹
        }
        while(q!=null) {
            // p çš„çˆ¶èŠ‚ç‚¹è®¿é—®è·¯å¾„ä¸­å­˜åœ¨ q èŠ‚ç‚¹ï¼Œåˆ™ q æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ
            if(visited.has(q.value)) {
                return q
            }
            q = parents.get(q.value)
        }
        return null
    }
    getLowestCommonAncestor(root,p,q)
}
```

> * å¤æ‚åº¦åˆ†æ
>
>   * æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N æ˜¯äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ã€‚äºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹æœ‰ä¸”åªä¼šè¢«è®¿é—®ä¸€æ¬¡ï¼Œä» p å’Œ q èŠ‚ç‚¹å¾€ä¸Šè·³ç»è¿‡çš„ç¥–å…ˆèŠ‚ç‚¹ä¸ªæ•°ä¸ä¼šè¶…è¿‡ Nï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ã€‚
>
>   * ç©ºé—´å¤æ‚åº¦ï¼šO(N) ï¼Œå…¶ä¸­ N æ˜¯äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ã€‚é€’å½’è°ƒç”¨çš„æ ˆæ·±åº¦å–å†³äºäºŒå‰æ ‘çš„é«˜åº¦ï¼ŒäºŒå‰æ ‘æœ€åæƒ…å†µä¸‹ä¸ºä¸€æ¡é“¾ï¼Œæ­¤æ—¶é«˜åº¦ä¸º Nï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º O(N)ï¼Œå“ˆå¸Œè¡¨å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¹Ÿéœ€è¦ O(N)çš„ç©ºé—´å¤æ‚åº¦ï¼Œå› æ­¤æœ€åæ€»çš„ç©ºé—´å¤æ‚åº¦ä¸º O(N)ã€‚





### äºŒå‰æ ‘æŒ‡å®šèŠ‚ç‚¹é—´çš„æœ€çŸ­è·ç¦»

* ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹é—´çš„æœ€çŸ­è·ç¦»

> **è§£ç­”ï¼š**
>
> æ±‚æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ï¼Œç„¶åå†æ±‚æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹åˆ°ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„è·¯å¾„ï¼Œå†æ±‚ä¸¤ä¸ªèŠ‚ç‚¹çš„è·¯å¾„ä¹‹å’Œ

```js
const shortestDistance = function(root, p, q) {
    // æœ€è¿‘å…¬å…±ç¥–å…ˆ
    let lowestCA = lowestCommonAncestor(root, p, q)
    // åˆ†åˆ«æ±‚å‡ºå…¬å…±ç¥–å…ˆåˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„è·¯ç»
    let pDis = [], qDis = []
    getPath(lowestCA, p, pDis)
    getPath(lowestCA, q, qDis)
    // è¿”å›è·¯å¾„ä¹‹å’Œ
    return (pDis.length + qDis.length)
}

// æœ€è¿‘å…¬å…±ç¥–å…ˆ
const lowestCommonAncestor = function(root, p, q) {
    if(root === null || root === p || root === q) return root
    const left = lowestCommonAncestor(root.left, p, q)
    const right = lowestCommonAncestor(root.right, p, q)
    if(left === null) return right
    if(right === null) return left
    return root
}

const getPath = function(root, p, paths) {
    // æ‰¾åˆ°èŠ‚ç‚¹ï¼Œè¿”å› true
    if(root === p) return true
    // å½“å‰èŠ‚ç‚¹åŠ å…¥è·¯å¾„ä¸­
    paths.push(root)
    let hasFound = false
    // å…ˆæ‰¾å·¦å­æ ‘
    if (root.left !== null)
        hasFound = getPath(root.left, p, paths)
    // å·¦å­æ ‘æ²¡æœ‰æ‰¾åˆ°ï¼Œå†æ‰¾å³å­æ ‘
    if (!hasFound && root.right !== null)
        hasFound = getPath(root.right, p, paths)
    // æ²¡æœ‰æ‰¾åˆ°ï¼Œè¯´æ˜ä¸åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸‹é¢ï¼Œåˆ™å¼¹å‡º
    if (!hasFound)
        paths.pop()
    return hasFound
}
```

### äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ 

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•° `kthSmallest` æ¥æŸ¥æ‰¾å…¶ä¸­ç¬¬ `k` ä¸ªæœ€å°çš„å…ƒç´ ã€‚

**è¯´æ˜ï¼š**ä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œ1 â‰¤ k â‰¤ äºŒå‰æœç´¢æ ‘å…ƒç´ ä¸ªæ•°ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: root = [3,1,4,null,2], k = 1
   3
  / \
 1   4
  \
   2
è¾“å‡º: 1
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: root = [5,3,6,2,4,null,null,1], k = 3
       5
      / \
     3   6
    / \
   2   4
  /
 1
è¾“å‡º: 3
```

**è¿›é˜¶ï¼š**å¦‚æœäºŒå‰æœç´¢æ ‘ç»å¸¸è¢«ä¿®æ”¹ï¼ˆæ’å…¥/åˆ é™¤æ“ä½œï¼‰å¹¶ä¸”ä½ éœ€è¦é¢‘ç¹åœ°æŸ¥æ‰¾ç¬¬ k å°çš„å€¼ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ– kthSmallest å‡½æ•°ï¼Ÿ

**è§£ç­”ï¼š**

æˆ‘ä»¬çŸ¥é“ï¼šä¸­åºéå†å…¶å®æ˜¯å¯¹ğŸŒ²è¿›è¡Œæ’åºæ“ä½œ ï¼Œå¹¶ä¸”æ˜¯æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºæ’åºï¼Œæ‰€ä»¥æœ¬é¢˜å°±å¾ˆç®€å•äº†

**è§£é¢˜æ€è·¯ï¼š** ä¸­åºéå†äºŒå‰æœç´¢æ ‘ï¼Œè¾“å‡ºç¬¬ k ä¸ªæ—¢å¯

**ä»£ç å®ç°ï¼ˆé€’å½’ï¼‰ï¼š**

```js
const kthSmallest = function(root, k) {
    let res = null
    let inOrderTraverseNode = function(node) {
        if(node !== null && k > 0) {
            // å…ˆéå†å·¦å­æ ‘
            inOrderTraverseNode(node.left)
            // ç„¶åæ ¹èŠ‚ç‚¹
            if(--k === 0) {
                res = node.val
                return 
            }
            // å†éå†å³å­æ ‘
            inOrderTraverseNode(node.right)
        }
    }
    inOrderTraverseNode(root)
    return res
}
```

> **å¤æ‚åº¦åˆ†æï¼š**
>
> - æ—¶é—´å¤æ‚åº¦ï¼šO(k)
> - ç©ºé—´å¤æ‚åº¦ï¼šä¸è€ƒè™‘é€’å½’æ ˆæ‰€å ç”¨çš„ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)



**ä»£ç å®ç°ï¼ˆè¿­ä»£ï¼‰ï¼š**

```js
const kthSmallest = function(root, k) {
    let stack = []
    let node = root
    
    while(node || stack.length) {
        // éå†å·¦å­æ ‘
        while(node) {
            stack.push(node)
            node = node.left
        }
      
        node = stack.pop()
        if(--k === 0) {
            return node.val
        }
        node = node.right
    }
    return null
}
```

> **å¤æ‚åº¦åˆ†æï¼š**
>
> - æ—¶é—´å¤æ‚åº¦ï¼šO(H+K)
> - ç©ºé—´å¤æ‚åº¦ï¼šç©ºé—´å¤æ‚åº¦ä¸º O(H+K)



### 
