# è®°å¿†åŒ–æœç´¢

> **è®°å¿†åŒ–æœç´¢ï¼ˆMemoization Searchï¼‰**ï¼šæ˜¯ä¸€ç§é€šè¿‡å­˜å‚¨å·²ç»éå†è¿‡çš„çŠ¶æ€ä¿¡æ¯ï¼Œä»è€Œé¿å…å¯¹åŒä¸€çŠ¶æ€é‡å¤éå†çš„æœç´¢ç®—æ³•ã€‚

è®°å¿†åŒ–æœç´¢æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸€ç§å®ç°æ–¹å¼ã€‚

åœ¨è®°å¿†åŒ–æœç´¢ä¸­ï¼Œå½“ç®—æ³•éœ€è¦è®¡ç®—æŸä¸ªå­é—®é¢˜çš„ç»“æœæ—¶ï¼Œå®ƒé¦–å…ˆæ£€æŸ¥æ˜¯å¦å·²ç»è®¡ç®—è¿‡è¯¥é—®é¢˜ã€‚å¦‚æœå·²ç»è®¡ç®—è¿‡ï¼Œåˆ™ç›´æ¥è¿”å›å·²ç»å­˜å‚¨çš„ç»“æœï¼›å¦åˆ™ï¼Œè®¡ç®—è¯¥é—®é¢˜ï¼Œå¹¶å°†ç»“æœå­˜å‚¨ä¸‹æ¥ä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ã€Œæ–æ³¢é‚£å¥‘æ•°åˆ—ã€çš„å®šä¹‰æ˜¯ï¼šğ‘“(0)=0,ğ‘“(1)=1,ğ‘“(ğ‘›)=ğ‘“(ğ‘›âˆ’1)+ğ‘“(ğ‘›âˆ’2) ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨é€’å½’ç®—æ³•æ±‚è§£ç¬¬ ğ‘›  ä¸ªæ–æ³¢é‚£å¥‘æ•°ï¼Œåˆ™å¯¹åº”çš„é€’æ¨è¿‡ç¨‹å¦‚ä¸‹ï¼š

![è®°å¿†åŒ–æœç´¢](../../../images/20240514110503.png) 

ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼šå¦‚æœä½¿ç”¨æ™®é€šé€’å½’ç®—æ³•ï¼Œæƒ³è¦è®¡ç®— ğ‘“(5) ï¼Œéœ€è¦å…ˆè®¡ç®— f*(3) å’Œ  f*(4)ï¼Œè€Œåœ¨è®¡ç®—  f*(4) æ—¶è¿˜éœ€è¦è®¡ç®—  f*(3)ã€‚è¿™æ · ğ‘“(3) å°±è¿›è¡Œäº†å¤šæ¬¡è®¡ç®—ï¼ŒåŒç† f*(0)ã€ f*(1)ã€ f(2) éƒ½è¿›è¡Œäº†å¤šæ¬¡è®¡ç®—ï¼Œä»è€Œå¯¼è‡´äº†é‡å¤è®¡ç®—é—®é¢˜ã€‚

ä¸ºäº†é¿å…é‡å¤è®¡ç®—ï¼Œåœ¨é€’å½’çš„åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¼“å­˜ï¼ˆæ•°ç»„æˆ–å“ˆå¸Œè¡¨ï¼‰æ¥ä¿å­˜å·²ç»æ±‚è§£è¿‡çš„ f*(*k*) çš„ç»“æœã€‚*

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“é€’å½’è°ƒç”¨ç”¨åˆ° f*(*k ) æ—¶ï¼Œå…ˆæŸ¥çœ‹ä¸€ä¸‹ä¹‹å‰æ˜¯å¦å·²ç»è®¡ç®—è¿‡ç»“æœï¼Œå¦‚æœå·²ç»è®¡ç®—è¿‡ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­å–å€¼è¿”å›ï¼Œè€Œä¸ç”¨å†é€’æ¨ä¸‹å»ï¼Œè¿™æ ·å°±é¿å…äº†é‡å¤è®¡ç®—é—®é¢˜ã€‚

ä½¿ç”¨ã€Œè®°å¿†åŒ–æœç´¢ã€æ–¹æ³•è§£å†³æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä»£ç å¦‚ä¸‹ï¼š

```typescript
function fib(n: number): number {
    // ä½¿ç”¨æ•°ç»„ç¼“å­˜è®¡ç®—è¿‡çš„ç»“æœ
    const memo: number[] = new Array(n + 1).fill(null);  
    return myFib(n, memo);  
}  
  
function myFib(n: number, memo: number[]): number {  
    if (n === 0) {  
        return 0;  
    }  
    if (n === 1) {  
        return 1;  
    }  
   	// ç¼“å­˜ä¸­å­˜åœ¨ç»“æœï¼Œè¿”å›ç»“æœ
    if (memo[n] !== null) {  
        return memo[n];  
    }  
  	// è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—
    memo[n] = myFib(n - 1, memo) + myFib(n - 2, memo);  
    return memo[n];  
}  
```



## è®°å¿†åŒ–æœç´¢ä¸é€’æ¨åŒºåˆ«

ã€Œè®°å¿†åŒ–æœç´¢ã€ä¸ã€Œé€’æ¨ã€éƒ½æ˜¯åŠ¨æ€è§„åˆ’çš„å®ç°æ–¹å¼ï¼Œä½†æ˜¯ä¸¤è€…ä¹‹é—´æœ‰ä¸€äº›åŒºåˆ«ã€‚

> **è®°å¿†åŒ–æœç´¢**ï¼šã€Œè‡ªé¡¶å‘ä¸‹ã€çš„è§£å†³é—®é¢˜ï¼Œé‡‡ç”¨è‡ªç„¶çš„é€’å½’æ–¹å¼ç¼–å†™è¿‡ç¨‹ï¼Œåœ¨è¿‡ç¨‹ä¸­ä¼šä¿å­˜æ¯ä¸ªå­é—®é¢˜çš„è§£ï¼ˆé€šå¸¸ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„æˆ–å“ˆå¸Œè¡¨ä¸­ï¼‰æ¥é¿å…é‡å¤è®¡ç®—ã€‚
>
> - ä¼˜ç‚¹ï¼šä»£ç æ¸…æ™°æ˜“æ‡‚ï¼Œå¯ä»¥æœ‰æ•ˆçš„å¤„ç†ä¸€äº›å¤æ‚çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚æœ‰äº›çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯éå¸¸å¤æ‚çš„ï¼Œä½¿ç”¨è®°å¿†åŒ–æœç´¢å¯ä»¥å°†å¤æ‚çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ‹†åˆ†æˆå¤šä¸ªå­é—®é¢˜ï¼Œé€šè¿‡é€’å½’è°ƒç”¨æ¥è§£å†³ã€‚
> - ç¼ºç‚¹ï¼šå¯èƒ½ä¼šå› ä¸ºé€’å½’æ·±åº¦è¿‡å¤§è€Œå¯¼è‡´æ ˆæº¢å‡ºé—®é¢˜ã€‚
>
> **é€’æ¨**ï¼šã€Œè‡ªåº•å‘ä¸Šã€çš„è§£å†³é—®é¢˜ï¼Œé‡‡ç”¨å¾ªç¯çš„æ–¹å¼ç¼–å†™è¿‡ç¨‹ï¼Œåœ¨è¿‡ç¨‹ä¸­é€šè¿‡ä¿å­˜æ¯ä¸ªå­é—®é¢˜çš„è§£ï¼ˆé€šå¸¸ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„æˆ–å“ˆå¸Œè¡¨ä¸­ï¼‰æ¥é¿å…é‡å¤è®¡ç®—ã€‚
>
> - ä¼˜ç‚¹ï¼šé¿å…äº†æ·±åº¦è¿‡å¤§é—®é¢˜ï¼Œä¸å­˜åœ¨æ ˆæº¢å‡ºé—®é¢˜ã€‚è®¡ç®—é¡ºåºæ¯”è¾ƒæ˜ç¡®ï¼Œæ˜“äºå®ç°ã€‚
> - ç¼ºç‚¹ï¼šæ— æ³•å¤„ç†ä¸€äº›å¤æ‚çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚æœ‰äº›çŠ¶æ€è½¬ç§»æ–¹ç¨‹éå¸¸å¤æ‚ï¼Œå¦‚æœä½¿ç”¨é€’æ¨æ–¹æ³•æ¥è®¡ç®—ï¼Œå°±ä¼šå¯¼è‡´ä»£ç å®ç°å˜å¾—éå¸¸å›°éš¾ã€‚

æ ¹æ®è®°å¿†åŒ–æœç´¢å’Œé€’æ¨çš„ä¼˜ç¼ºç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒåœºæ™¯ä¸‹ä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•ã€‚

é€‚åˆä½¿ç”¨ã€Œè®°å¿†åŒ–æœç´¢ã€çš„åœºæ™¯ï¼š

1. é—®é¢˜çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œé€’æ¨å…³ç³»ä¸æ˜¯å¾ˆæ˜ç¡®ã€‚
2. é—®é¢˜é€‚åˆè½¬æ¢ä¸ºé€’å½’å½¢å¼ï¼Œå¹¶ä¸”é€’å½’æ·±åº¦ä¸ä¼šå¤ªæ·±ã€‚

é€‚åˆä½¿ç”¨ã€Œé€’æ¨ã€çš„åœºæ™¯ï¼š

1. é—®é¢˜çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¯”è¾ƒç®€å•ï¼Œé€’å½’å…³ç³»æ¯”è¾ƒæ˜ç¡®ã€‚
2. é—®é¢˜ä¸å¤ªé€‚åˆè½¬æ¢ä¸ºé€’å½’å½¢å¼ï¼Œæˆ–è€…é€’å½’æ·±åº¦è¿‡å¤§å®¹æ˜“å¯¼è‡´æ ˆæº¢å‡ºã€‚

## è®°å¿†åŒ–æœç´¢è§£é¢˜æ­¥éª¤

æˆ‘ä»¬åœ¨ä½¿ç”¨è®°å¿†åŒ–æœç´¢è§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œå…¶åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š

1. å†™å‡ºé—®é¢˜çš„åŠ¨æ€è§„åˆ’ã€ŒçŠ¶æ€ã€å’Œã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€ã€‚
2. å®šä¹‰ä¸€ä¸ªç¼“å­˜ï¼ˆæ•°ç»„æˆ–å“ˆå¸Œè¡¨ï¼‰ï¼Œç”¨äºä¿å­˜å­é—®é¢˜çš„è§£ã€‚
3. å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œç”¨äºè§£å†³é—®é¢˜ã€‚åœ¨é€’å½’å‡½æ•°ä¸­ï¼Œé¦–å…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å·²ç»å­˜åœ¨éœ€è¦è®¡ç®—çš„ç»“æœï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥è¿”å›ç»“æœï¼Œå¦åˆ™è¿›è¡Œè®¡ç®—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°ç¼“å­˜ä¸­ï¼Œå†è¿”å›ç»“æœã€‚
4. åœ¨ä¸»å‡½æ•°ä¸­ï¼Œè°ƒç”¨é€’å½’å‡½æ•°å¹¶è¿”å›ç»“æœã€‚

## ç®—æ³•é¢˜

| é¢˜å· | æ ‡é¢˜                                                         | æ ‡ç­¾                                                         | éš¾åº¦ |
| :--- | :----------------------------------------------------------- | :----------------------------------------------------------- | :--- |
| 1137 | [ç¬¬ N ä¸ªæ³°æ³¢é‚£å¥‘æ•°](https://leetcode.cn/problems/n-th-tribonacci-number/) | è®°å¿†åŒ–æœç´¢ã€æ•°å­¦ã€åŠ¨æ€è§„åˆ’                                   | ç®€å• |
| 0494 | [ç›®æ ‡å’Œ](https://leetcode.cn/problems/target-sum/)           | æ•°ç»„ã€åŠ¨æ€è§„åˆ’ã€å›æº¯                                         | ä¸­ç­‰ |
| 0375 | [çŒœæ•°å­—å¤§å° II](https://leetcode.cn/problems/guess-number-higher-or-lower-ii/) | æ•°å­¦ã€åŠ¨æ€è§„åˆ’ã€åšå¼ˆ                                         | ä¸­ç­‰ |
| 0576 | [å‡ºç•Œçš„è·¯å¾„æ•°](https://leetcode.cn/problems/out-of-boundary-paths/) | åŠ¨æ€è§„åˆ’                                                     | ä¸­ç­‰ |
| 0087 | [æ‰°ä¹±å­—ç¬¦ä¸²](https://leetcode.cn/problems/scramble-string/)  | å­—ç¬¦ä¸²ã€åŠ¨æ€è§„åˆ’                                             | å›°éš¾ |
| 0403 | [é’è›™è¿‡æ²³](https://leetcode.cn/problems/frog-jump/)          | æ•°ç»„ã€åŠ¨æ€è§„åˆ’                                               | å›°éš¾ |
| 0552 | [å­¦ç”Ÿå‡ºå‹¤è®°å½• II](https://leetcode.cn/problems/student-attendance-record-ii/) | åŠ¨æ€è§„åˆ’                                                     | å›°éš¾ |
| 0913 | [çŒ«å’Œè€é¼ ](https://leetcode.cn/problems/cat-and-mouse/)      | å›¾ã€æ‹“æ‰‘æ’åºã€è®°å¿†åŒ–æœç´¢ã€æ•°å­¦ã€åŠ¨æ€è§„åˆ’ã€åšå¼ˆ               | å›°éš¾ |
| 0329 | [çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„](https://leetcode.cn/problems/longest-increasing-path-in-a-matrix/) | æ·±åº¦ä¼˜å…ˆæœç´¢ã€å¹¿åº¦ä¼˜å…ˆæœç´¢ã€å›¾ã€æ‹“æ‰‘æ’åºã€è®°å¿†åŒ–æœç´¢ã€æ•°ç»„ã€åŠ¨æ€è§„åˆ’ã€çŸ©é˜µ | å›°éš¾ |



### [ç¬¬ N ä¸ªæ³°æ³¢é‚£å¥‘æ•°](https://leetcode.cn/problems/n-th-tribonacci-number/)

#### é¢˜ç›®

æ³°æ³¢é‚£å¥‘åºåˆ— Tn å®šä¹‰å¦‚ä¸‹ï¼š 

T0 = 0, T1 = 1, T2 = 1, ä¸”åœ¨ n >= 0 çš„æ¡ä»¶ä¸‹ Tn+3 = Tn + Tn+1 + Tn+2

ç»™ä½ æ•´æ•° `n`ï¼Œè¯·è¿”å›ç¬¬ n ä¸ªæ³°æ³¢é‚£å¥‘æ•° Tn çš„å€¼ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 4
è¾“å‡ºï¼š4
è§£é‡Šï¼š
T_3 = 0 + 1 + 1 = 2
T_4 = 1 + 1 + 2 = 4
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 25
è¾“å‡ºï¼š1389537
```



#### è§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’+è®°å¿†åŒ–æœç´¢

æ ¹æ®é¢˜ç›®é€’å½’å…¬å¼ï¼Œç›´æ¥ä» n åˆ° 0 å¼€å§‹éå†ï¼Œè®¡ç®—æ¯ä¸€é¡¹çš„å€¼ï¼Œå¹¶å°†æ¯ä¸€é¡¹ç›®çš„å€¼å­˜å…¥ map æ•°ç»„ä¸­ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚

```typescript
function tribonacci(n: number): number {
  // æ³¨æ„ï¼š æ„é€ æ•°ç»„é•¿åº¦ä¸º n+1,é¿å…è¾¹ç•Œ n æ—¶å­˜å‚¨æ•°æ®ä¸º undefine
  let map = new Array(n + 1).fill(0)
  return tribonaccis(n, map)
};

function tribonaccis(n: number, map: Array<number>): number {

  if (n === 0) return 0
  if (n == 1 || n == 2) return 1
  // map æ•°ç»„ä¸­å­˜åœ¨å€¼ï¼Œç›´æ¥è¿”å›
  if (map[n] !== 0) {
    return map[n]
  }
  //è‡ªé¡¶å‘ä¸‹æœç´¢ï¼Œ ä» n åˆ° 3 å¼€å§‹éå†ï¼Œæ ¹æ®é€’æ¨å…¬å¼è¿›è¡Œè®¡ç®—
  for (let i = n; i >= 3; i--) {
    map[i] = tribonaccis(i - 1, map) + tribonaccis(i - 2, map) + tribonaccis(i - 3, map)
    // è¿”å›è®¡ç®—ç»“æœ
    return map[i]
  }
  // æœ€ç»ˆè¿”å›ç¬¬né¡¹ç»“æœ
  return map[n]
}
```

è¯¥è®°å¿†åŒ–æœç´¢æ˜¯ä¸€ç§ã€Œè‡ªé¡¶å‘ä¸‹ã€çš„è§£å†³é—®é¢˜ï¼Œé‡‡ç”¨è‡ªç„¶çš„é€’å½’æ–¹å¼ç¼–å†™è¿‡ç¨‹ã€‚

#### è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’+æ»šåŠ¨æ•°ç»„

æ³°æ³¢é‚£å¥‘æ•°çš„è¾¹ç•Œæ¡ä»¶æ˜¯ `T(0)=0,T(1)=1,T(2)=1` ã€‚

å½“ n>2 æ—¶ï¼Œæ¯ä¸€é¡¹çš„å’Œéƒ½ç­‰äºå‰ä¸‰é¡¹çš„å’Œï¼Œå› æ­¤æœ‰å¦‚ä¸‹é€’æ¨å…³ç³»ï¼š `T(n)=T(nâˆ’1)+T(nâˆ’2)+T(nâˆ’3)` 

ç”±äºæ³°æ³¢é‚£å¥‘æ•°å­˜åœ¨é€’æ¨å…³ç³»ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ±‚è§£ã€‚åŠ¨æ€è§„åˆ’çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å³ä¸ºä¸Šè¿°é€’æ¨å…³ç³»ï¼Œè¾¹ç•Œæ¡ä»¶ä¸º T(0) ã€T(1)  å’Œ T(2) ã€‚

æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹å’Œè¾¹ç•Œæ¡ä»¶ï¼Œå¯ä»¥å¾—åˆ°æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯ O(n)  çš„å®ç°ã€‚ç”±äº T(n) åªå’Œå‰ä¸‰é¡¹æœ‰å…³ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ã€Œæ»šåŠ¨æ•°ç»„æ€æƒ³ã€å°†ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–æˆ O(1)ã€‚

![ ](../../../images/1137.gif)

å¦‚ä¸‹çš„ä»£ç ä¸­ç»™å‡ºçš„å°±æ˜¯è¿™ç§å®ç°ã€‚

```javascript
var tribonacci = function(n) {
    if (n === 0) {
        return 0;
    }
    if (n <= 2) {
        return 1;
    }
    // pã€qã€rã€s åˆ†åˆ«æ˜¯ç¬¬ n-1ï¼Œn-2ï¼Œn-3,n é¡¹ 
    let p = 0, q = 0, r = 1, s = 1;
    // è‡ªåº•å‘ä¸Šå¾ªç¯é€’æ¨
    for (let i = 3; i <= n; ++i) {
        p = q;
        q = r;
        r = s;
        s = p + q + r;
    }
    return s;
}; 
```

æ»šåŠ¨æ•°ç»„æ˜¯ä¸€ç§ã€Œè‡ªåº•å‘ä¸Šã€çš„è§£å†³é—®é¢˜ï¼Œé‡‡ç”¨å¾ªç¯çš„æ–¹å¼ç¼–å†™è¿‡ç¨‹ï¼Œåœ¨è¿‡ç¨‹ä¸­é€šè¿‡ä¿å­˜æ¯ä¸ªå­é—®é¢˜çš„è§£ã€‚

 



### [ç›®æ ‡å’Œ](https://leetcode.cn/problems/target-sum/)

#### é¢˜ç›®

ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `target` ã€‚

å‘æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°å‰æ·»åŠ  `'+'` æˆ– `'-'` ï¼Œç„¶åä¸²è”èµ·æ‰€æœ‰æ•´æ•°ï¼Œå¯ä»¥æ„é€ ä¸€ä¸ª **è¡¨è¾¾å¼** ï¼š

- ä¾‹å¦‚ï¼Œ`nums = [2, 1]` ï¼Œå¯ä»¥åœ¨ `2` ä¹‹å‰æ·»åŠ  `'+'` ï¼Œåœ¨ `1` ä¹‹å‰æ·»åŠ  `'-'` ï¼Œç„¶åä¸²è”èµ·æ¥å¾—åˆ°è¡¨è¾¾å¼ `"+2-1"` ã€‚

è¿”å›å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•æ„é€ çš„ã€è¿ç®—ç»“æœç­‰äº `target` çš„ä¸åŒ **è¡¨è¾¾å¼** çš„æ•°ç›®ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,1,1,1], target = 3
è¾“å‡ºï¼š5
è§£é‡Šï¼šä¸€å…±æœ‰ 5 ç§æ–¹æ³•è®©æœ€ç»ˆç›®æ ‡å’Œä¸º 3 ã€‚
-1 + 1 + 1 + 1 + 1 = 3
+1 - 1 + 1 + 1 + 1 = 3
+1 + 1 - 1 + 1 + 1 = 3
+1 + 1 + 1 - 1 + 1 = 3
+1 + 1 + 1 + 1 - 1 = 3
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1], target = 1
è¾“å‡ºï¼š1
```



#### è§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’

**é—®é¢˜åˆ†æ**

è®°æ•°ç»„çš„å…ƒç´ å’Œä¸º `sum` ï¼Œæ·»åŠ   `-`  å·çš„å…ƒç´ ä¹‹å’Œä¸º `neg` ï¼Œåˆ™å…¶ä½™æ·»åŠ  `+` çš„å…ƒç´ ä¹‹å’Œä¸º `sumâˆ’neg` ï¼Œå¾—åˆ°çš„è¡¨è¾¾å¼çš„ç»“æœä¸ºï¼š

`(sumâˆ’neg)âˆ’neg=sumâˆ’2â‹…neg=targe` å³ï¼š `neg = (sumâˆ’target) / 2`ã€‚

ç”±äºæ•°ç»„ `nums` ä¸­çš„å…ƒç´ éƒ½æ˜¯éè´Ÿæ•´æ•°ï¼Œ`neg`  ä¹Ÿå¿…é¡»æ˜¯éè´Ÿæ•´æ•°ï¼Œæ‰€ä»¥ä¸Šå¼æˆç«‹çš„å‰ææ˜¯ `sum âˆ’ target` æ˜¯éè´Ÿå¶æ•°ã€‚è‹¥ä¸ç¬¦åˆè¯¥æ¡ä»¶å¯ç›´æ¥è¿”å› 0ã€‚

**é—®é¢˜è½¬æ¢**

è‹¥ä¸Šå¼æˆç«‹ï¼Œé—®é¢˜è½¬åŒ–æˆåœ¨æ•°ç»„ `nums`  ä¸­é€‰å–è‹¥å¹²å…ƒç´ ï¼Œä½¿å¾—è¿™äº›å…ƒç´ ä¹‹å’Œç­‰äº `neg` ï¼Œè®¡ç®—é€‰å–å…ƒç´ çš„æ–¹æ¡ˆæ•°ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•æ±‚è§£ã€‚

**åŠ¨æ€è§„åˆ’æ±‚è§£**

å®šä¹‰äºŒç»´æ•°ç»„ `dp` ï¼Œå…¶ä¸­ `dp[i][j]` è¡¨ç¤ºåœ¨æ•°ç»„ `nums` çš„å‰ `i` ä¸ªæ•°ä¸­é€‰å–å…ƒç´ ï¼Œä½¿å¾—è¿™äº›å…ƒç´ ä¹‹å’Œç­‰äº `j` çš„æ–¹æ¡ˆæ•°ã€‚

å‡è®¾æ•°ç»„ `nums` çš„é•¿åº¦ä¸º `n` ï¼Œåˆ™æœ€ç»ˆç­”æ¡ˆä¸º `dp[n][neg]`ã€‚

**è¾¹ç•Œæ¡ä»¶**

å½“æ²¡æœ‰ä»»ä½•å…ƒç´ å¯ä»¥é€‰å–æ—¶ï¼Œå…ƒç´ å’Œåªèƒ½æ˜¯ 0 ï¼Œå¯¹åº”çš„æ–¹æ¡ˆæ•°æ˜¯ 1 ï¼Œå› æ­¤åŠ¨æ€è§„åˆ’çš„è¾¹ç•Œæ¡ä»¶æ˜¯ï¼š


![](../../../images/image-20240521103049661.png)


å½“ `1â‰¤iâ‰¤n` æ—¶ï¼Œå¯¹äºæ•°ç»„ `nums`  ä¸­çš„ç¬¬ `i` ä¸ªå…ƒç´  `num` ï¼ˆi çš„è®¡æ•°ä» 1 å¼€å§‹ï¼‰ï¼Œéå† `0â‰¤jâ‰¤neg` ï¼Œè®¡ç®— `dp[i][j]` çš„å€¼ï¼š

* å¦‚æœ `j<num` ï¼Œåˆ™ä¸èƒ½é€‰ `num` ï¼Œæ­¤æ—¶æœ‰ `dp[i][j]=dp[iâˆ’1][j]`ï¼›

* å¦‚æœ `jâ‰¥num` ï¼Œåˆ™å¦‚æœä¸é€‰ `num` ï¼Œæ–¹æ¡ˆæ•°æ˜¯ `dp[iâˆ’1][j]`ï¼Œå¦‚æœé€‰ `num` ï¼Œæ–¹æ¡ˆæ•°æ˜¯ `dp[iâˆ’1][jâˆ’num]`ï¼Œæ­¤æ—¶æœ‰ `dp[i][j]=dp[iâˆ’1][j]+dp[iâˆ’1][jâˆ’num]`ã€‚

å› æ­¤çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š


![](../../../images/image-20240521103446928.png)


æœ€ç»ˆå¾—åˆ° `dp[n][neg]` çš„å€¼å³ä¸ºç­”æ¡ˆã€‚

ç”±æ­¤å¯ä»¥å¾—åˆ°ç©ºé—´å¤æ‚åº¦ä¸º `O(nÃ—neg)` çš„å®ç°ã€‚

 ```javascript
 var findTargetSumWays = function(nums, target) {
     let sum = 0;
     // è®¡ç®—æ‰€æœ‰æ•°å’Œ
     for (const num of nums) {
         sum += num;
     }
     // è®¡ç®—æ€»å’Œä¸ç›®æ ‡å€¼å·®å€¼
     const diff = sum - target;
     // æ€»å’Œå°äºç›®æ ‡å€¼ï¼Œè¡¨ç¤ºæ— æ³•è®¡ç®—å‡ºç›®æ ‡å€¼ï¼› å·®å€¼ä¸ä¸ºå¶æ•°ï¼Œè¡¨ç¤ºä¹Ÿæ— æ³•è®¡ç®—å‡ºç›®æ ‡å€¼
     if (diff < 0 || diff % 2 !== 0) {
         return 0;
     }
     // è®¡ç®—æ•°ç»„é•¿åº¦å’Œé—®é¢˜è½¬åŒ–ï¼š dp[i][j] è¡¨ç¤ºåœ¨æ•°ç»„ nums çš„å‰ i ä¸ªæ•°ä¸­é€‰å–å…ƒç´ ï¼Œä½¿å¾—è¿™äº›å…ƒç´ ä¹‹å’Œç­‰äº j çš„æ–¹æ¡ˆæ•°
     const n = nums.length, neg = diff / 2;
     const dp = new Array(n + 1).fill(0).map(() => new Array(neg + 1).fill(0));
     dp[0][0] = 1;
     for (let i = 1; i <= n; i++) {
         const num = nums[i - 1];
         for (let j = 0; j <= neg; j++) {
             dp[i][j] = dp[i - 1][j];
             if (j >= num) {
                 dp[i][j] += dp[i - 1][j - num];
             }
         }
     }
     return dp[n][neg];
 };
 ```



#### æ–¹æ³•äºŒï¼šå›æº¯

æ•°ç»„ `nums`  çš„æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥æ·»åŠ ç¬¦å· `+` æˆ– `-` ï¼Œå› æ­¤æ¯ä¸ªå…ƒç´ æœ‰  2 ç§æ·»åŠ ç¬¦å·çš„æ–¹æ³•ï¼Œn  ä¸ªæ•°å…±æœ‰ `2^n` ç§æ·»åŠ ç¬¦å·çš„æ–¹æ³•ï¼Œå¯¹åº” `2^n`   ç§ä¸åŒçš„è¡¨è¾¾å¼ã€‚

å½“ n ä¸ªå…ƒç´ éƒ½æ·»åŠ ç¬¦å·ä¹‹åï¼Œå³å¾—åˆ°ä¸€ç§è¡¨è¾¾å¼ï¼Œå¦‚æœè¡¨è¾¾å¼çš„ç»“æœç­‰äºç›®æ ‡æ•° target ï¼Œåˆ™è¯¥è¡¨è¾¾å¼å³ä¸ºç¬¦åˆè¦æ±‚çš„è¡¨è¾¾å¼ã€‚

å¯ä»¥ä½¿ç”¨å›æº¯çš„æ–¹æ³•éå†æ‰€æœ‰çš„è¡¨è¾¾å¼ï¼Œå›æº¯è¿‡ç¨‹ä¸­ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ count ï¼Œå½“é‡åˆ°ä¸€ç§è¡¨è¾¾å¼çš„ç»“æœç­‰äºç›®æ ‡æ•° target æ—¶ï¼Œå°† count çš„å€¼åŠ   1ã€‚

éå†å®Œæ‰€æœ‰çš„è¡¨è¾¾å¼ä¹‹åï¼Œå³å¯å¾—åˆ°ç»“æœç­‰äºç›®æ ‡æ•° target çš„è¡¨è¾¾å¼çš„æ•°ç›®ã€‚

```typescript
var findTargetSumWays = function(nums, target) {
    let count = 0;
    const backtrack = (nums, target, index, sum) => {
        if (index === nums.length) { //ä¸€æ¬¡éå†å®Œæˆ
            if (sum === target) { // æŸ¥çœ‹è®¡ç®—ç»“æœæ˜¯å¦ç­‰äº target
                count++;
            }
        } else {
            // å›æº¯è®¡ç®—
            backtrack(nums, target, index + 1, sum + nums[index]);
            backtrack(nums, target, index + 1, sum - nums[index]);
        }
    }
    // 
    backtrack(nums, target, 0, 0);
    return count;
};
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š `O(2^n)` ï¼Œå…¶ä¸­ n  æ˜¯æ•°ç»„ nums çš„é•¿åº¦ã€‚å›æº¯éœ€è¦éå†æ‰€æœ‰ä¸åŒçš„è¡¨è¾¾å¼ï¼Œå…±æœ‰ `2^n` ç§ä¸åŒçš„è¡¨è¾¾å¼ï¼Œæ¯ç§è¡¨è¾¾å¼è®¡ç®—ç»“æœéœ€è¦ O(1) çš„æ—¶é—´ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ `O(2^n)` ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼šO(n) ï¼Œå…¶ä¸­ n  æ˜¯æ•°ç»„ nums çš„é•¿åº¦ã€‚ç©ºé—´å¤æ‚åº¦ä¸»è¦å–å†³äºé€’å½’è°ƒç”¨çš„æ ˆç©ºé—´ï¼Œæ ˆçš„æ·±åº¦ä¸è¶…è¿‡ n ã€‚

 

 