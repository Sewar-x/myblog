---
order: 3
category:
  - æ•°æ®ç»“æ„å’Œç®—æ³•
tag:
  - æ•°æ®ç»“æ„

---



# é˜Ÿåˆ—

## å®šä¹‰å’Œç‰¹ç‚¹

**é˜Ÿåˆ—ï¼ˆQueueï¼‰**ï¼šä¸€ç§çº¿æ€§è¡¨æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§åªå…è®¸åœ¨è¡¨çš„ä¸€ç«¯è¿›è¡Œæ’å…¥æ“ä½œï¼Œè€Œåœ¨è¡¨çš„å¦ä¸€ç«¯è¿›è¡Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ã€‚

* é˜Ÿåˆ—æ˜¯ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„ï¼Œå…·æœ‰å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„ç‰¹æ€§ã€‚
* å¯ä»¥ç±»æ¯”ä¸ºæ’é˜Ÿä¹°ç¥¨ï¼Œå…ˆæ¥çš„äººå…ˆè¢«æœåŠ¡ã€‚
* å¯ä»¥ä½¿ç”¨æ•°ç»„çš„`push()`å’Œ`shift()`æ–¹æ³•æ¥å®ç°ã€‚

![é˜Ÿåˆ—ç»“æ„](../../images/202405092254785.png)



## åŸºæœ¬æ“ä½œ

* å…¥é˜Ÿï¼ˆEnqueueï¼‰ï¼šå°†å…ƒç´ æ”¾å…¥é˜Ÿåˆ—çš„æœ«å°¾ã€‚
* å‡ºé˜Ÿï¼ˆDequeueï¼‰ï¼šä»é˜Ÿåˆ—çš„å¤´éƒ¨ç§»é™¤å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤çš„å…ƒç´ ã€‚
* è·å–é˜Ÿå¤´å…ƒç´ ï¼ˆFrontï¼‰ï¼šè¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œå¹¶ä¸ç§»é™¤è¯¥å…ƒç´ ã€‚
* åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼ˆisEmptyï¼‰ï¼šæ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€‚

```javascript
class Queue {  
    // åˆå§‹åŒ–ç©ºé˜Ÿåˆ—  
    constructor(size = 100) {  
        this.size = size;  
        this.queue = new Array(size).fill(null); // åˆå§‹åŒ–é˜Ÿåˆ—æ•°ç»„  
        this.front = -1;  
        this.rear = -1;  
    }  
  
    // åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º  
    isEmpty() {  
        return this.front === this.rear;  
    }  
  
    // åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡  
    isFull() {  
        return (this.rear + 1) % this.size === this.front; // ä½¿ç”¨å–æ¨¡æ“ä½œæ¥å¤„ç†å¾ªç¯é˜Ÿåˆ—  
    }  
  
    // å…¥é˜Ÿæ“ä½œ  
    enqueue(value) {  
        if (this.isFull()) {  
            throw new Error('Queue is full');  
        } else {  
            this.rear = (this.rear + 1) % this.size; // æ›´æ–°é˜Ÿå°¾æŒ‡é’ˆï¼Œä½¿ç”¨å–æ¨¡æ“ä½œæ¥å¤„ç†å¾ªç¯  
            this.queue[this.rear] = value;  
        }  
    }  
  
    // å‡ºé˜Ÿæ“ä½œ  
    dequeue() {  
        if (this.isEmpty()) {  
            throw new Error('Queue is empty');  
        } else {  
            let value = this.queue[this.front + 1]; // æ³¨æ„JavaScriptä¸­æ•°ç»„ç´¢å¼•ä»0å¼€å§‹  
            this.front = (this.front + 1) % this.size; // æ›´æ–°é˜Ÿå¤´æŒ‡é’ˆï¼Œä½¿ç”¨å–æ¨¡æ“ä½œæ¥å¤„ç†å¾ªç¯  
            return value;  
        }  
    }  
  
    // è·å–é˜Ÿå¤´å…ƒç´   
    frontValue() {  
        if (this.isEmpty()) {  
            throw new Error('Queue is empty');  
        } else {  
            return this.queue[(this.front + 1) % this.size]; // æ³¨æ„JavaScriptä¸­æ•°ç»„ç´¢å¼•ä»0å¼€å§‹ï¼Œå¹¶ä½¿ç”¨å–æ¨¡æ“ä½œ  
        }  
    }  
  
    // è·å–é˜Ÿå°¾å…ƒç´   
    rearValue() {  
        if (this.isEmpty()) {  
            throw new Error('Queue is empty');  
        } else {  
            return this.queue[this.rear];  
        }  
    }  
}  
  
// ä½¿ç”¨ç¤ºä¾‹  
let q = new Queue(5);  
q.enqueue(1);  
q.enqueue(2);  
console.log(q.frontValue()); // è¾“å‡ºï¼š1  
console.log(q.rearValue()); // è¾“å‡ºï¼š2  
q.dequeue();  
console.log(q.frontValue()); // è¾“å‡ºï¼š2
```



## ä¼˜å…ˆé˜Ÿåˆ—

> **ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆPriority Queueï¼‰**ï¼šä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ã€‚åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œå…ƒç´ è¢«èµ‹äºˆä¼˜å…ˆçº§ï¼Œå½“è®¿é—®é˜Ÿåˆ—å…ƒç´ æ—¶ï¼Œå…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ æœ€å…ˆåˆ é™¤ã€‚
>
> ä¼˜å…ˆé˜Ÿåˆ—ä¸æ™®é€šé˜Ÿåˆ—æœ€å¤§çš„ä¸åŒç‚¹åœ¨äº **å‡ºé˜Ÿé¡ºåº**ã€‚
>
> ä¼˜å…ˆé˜Ÿåˆ—çš„å‡ºé˜Ÿé¡ºåºè·Ÿå…¥é˜Ÿé¡ºåºæ— å…³ï¼Œä¼˜å…ˆé˜Ÿåˆ—æ˜¯æŒ‰ç…§å…ƒç´ çš„ä¼˜å…ˆçº§æ¥å†³å®šå‡ºé˜Ÿé¡ºåºçš„ï¼š
>
> * ä¼˜å…ˆçº§é«˜çš„å…ƒç´ ä¼˜å…ˆå‡ºé˜Ÿï¼Œä¼˜å…ˆçº§ä½çš„å…ƒç´ åå‡ºé˜Ÿã€‚
>
> ä¼˜å…ˆé˜Ÿåˆ—ç¬¦åˆ **ã€Œæœ€é«˜çº§å…ˆå‡ºï¼ˆFirst in, Largest outï¼‰ã€** çš„è§„åˆ™ã€‚

![ä¼˜å…ˆé˜Ÿåˆ—](../../images/ä¼˜å…ˆé˜Ÿåˆ—.png)

###  **ä¼˜å…ˆé˜Ÿåˆ—çš„é€‚ç”¨åœºæ™¯**

- **æ•°æ®å‹ç¼©**ï¼šèµ«å¤«æ›¼ç¼–ç ç®—æ³•ï¼›
- **æœ€çŸ­è·¯å¾„ç®—æ³•**ï¼šDijkstra ç®—æ³•ï¼›
- **æœ€å°ç”Ÿæˆæ ‘ç®—æ³•**ï¼šPrim ç®—æ³•ï¼›
- **ä»»åŠ¡è°ƒåº¦å™¨**ï¼šæ ¹æ®ä¼˜å…ˆçº§æ‰§è¡Œç³»ç»Ÿä»»åŠ¡ï¼›
- **äº‹ä»¶é©±åŠ¨ä»¿çœŸ**ï¼šé¡¾å®¢æ’é˜Ÿç®—æ³•ï¼›
- **æ’åºé—®é¢˜**ï¼šæŸ¥æ‰¾ç¬¬ k ä¸ªæœ€å°å…ƒç´ ã€‚



### **ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°æ–¹å¼**

ä¼˜å…ˆé˜Ÿåˆ—æ‰€æ¶‰åŠçš„åŸºæœ¬æ“ä½œè·Ÿæ™®é€šé˜Ÿåˆ—å·®ä¸å¤šï¼Œä¸»è¦æ˜¯ **ã€Œå…¥é˜Ÿæ“ä½œã€** å’Œ **ã€Œå‡ºé˜Ÿæ“ä½œã€**ã€‚

è€Œä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œé™¤äº†ä½¿ç”¨ã€Œæ•°ç»„ï¼ˆé¡ºåºå­˜å‚¨ï¼‰å®ç°ã€ä¸ã€Œé“¾è¡¨ï¼ˆé“¾å¼å­˜å‚¨ï¼‰å®ç°ã€ä¹‹å¤–ï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„æ˜¯ä½¿ç”¨ **ã€ŒäºŒå‰å †ç»“æ„å®ç°ã€**ä¼˜å…ˆé˜Ÿåˆ—ã€‚ä»¥ä¸‹æ˜¯ä¸‰ç§æ–¹æ¡ˆçš„ä»‹ç»å’Œæ€»ç»“ã€‚

- **æ•°ç»„ï¼ˆé¡ºåºå­˜å‚¨ï¼‰å®ç°ä¼˜å…ˆé˜Ÿåˆ—**ï¼šå…¥é˜Ÿæ“ä½œç›´æ¥æ’å…¥åˆ°æ•°ç»„é˜Ÿå°¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º ğ‘‚(1)ã€‚å‡ºé˜Ÿæ“ä½œéœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œæ‰¾åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼Œè¿”å›å¹¶åˆ é™¤è¯¥å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º ğ‘‚(ğ‘›)ã€‚
- **é“¾è¡¨ï¼ˆé“¾å¼å­˜å‚¨ï¼‰å®ç°ä¼˜å…ˆé˜Ÿåˆ—**ï¼šé“¾è¡¨ä¸­çš„å…ƒç´ æŒ‰ç…§ä¼˜å…ˆçº§æ’åºï¼Œå…¥é˜Ÿæ“ä½œéœ€è¦ä¸ºå¾…æ’å…¥å…ƒç´ åˆ›å»ºèŠ‚ç‚¹ï¼Œå¹¶åœ¨é“¾è¡¨ä¸­æ‰¾åˆ°åˆé€‚çš„æ’å…¥ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º ğ‘‚(ğ‘›)ã€‚å‡ºé˜Ÿæ“ä½œç›´æ¥è¿”å›é“¾è¡¨é˜Ÿå¤´å…ƒç´ ï¼Œå¹¶åˆ é™¤é˜Ÿå¤´å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º ğ‘‚(1)ã€‚
- **äºŒå‰å †ç»“æ„å®ç°ä¼˜å…ˆé˜Ÿåˆ—**ï¼šæ„å»ºä¸€ä¸ªäºŒå‰å †ç»“æ„ï¼ŒäºŒå‰å †æŒ‰ç…§ä¼˜å…ˆçº§è¿›è¡Œæ’åºã€‚å…¥é˜Ÿæ“ä½œå°±æ˜¯å°†å…ƒç´ æ’å…¥åˆ°äºŒå‰å †ä¸­åˆé€‚ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º ğ‘‚(log2â¡ğ‘›)ã€‚å‡ºé˜Ÿæ“ä½œåˆ™è¿”å›äºŒå‰å †ä¸­ä¼˜å…ˆçº§æœ€å¤§èŠ‚ç‚¹å¹¶åˆ é™¤ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ ğ‘‚(logâ¡ğ‘›)ã€‚

ä¸‹é¢æ˜¯ä¸‰ç§ç»“æ„å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—å…¥é˜Ÿæ“ä½œå’Œå‡ºé˜Ÿæ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ€»ç»“ã€‚

|      | å…¥é˜Ÿæ“ä½œæ—¶é—´å¤æ‚åº¦ | å‡ºé˜Ÿæ“ä½œï¼ˆå–å‡ºä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼‰æ—¶é—´å¤æ‚åº¦ |
| ---- | ------------------ | ------------------------------------------ |
| å †   | ğ‘‚(logâ¡ğ‘›)            | ğ‘‚(logâ¡ğ‘›)                                    |
| æ•°ç»„ | ğ‘‚(1)               | ğ‘‚(ğ‘›)                                       |
| é“¾è¡¨ | ğ‘‚(ğ‘›)               | ğ‘‚(1)                                       |

ä»ä¸Šé¢çš„è¡¨æ ¼å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ã€ŒäºŒå‰å †ã€è¿™ç§æ•°æ®ç»“æ„æ¥å®ç°ä¼˜å…ˆé˜Ÿåˆ—æ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è®²è§£ä¸€ä¸‹äºŒå‰å †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—ã€‚

### **äºŒå‰å †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—**

> äºŒå‰å †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—ä¸äºŒå‰å †ç›¸åŒï¼Œè¯¦ç»†çŸ¥è¯†å‚è€ƒäºŒå‰å †ï¼š[å † | Sewen åšå®¢ (sewar-x.github.io)](https://sewar-x.github.io/myblog/article/ç®—æ³•å’Œæ•°æ®ç»“æ„/æ•°æ®ç»“æ„/å †.html)

é€šè¿‡æ‰‹å†™äºŒå‰å †çš„æ–¹å¼å®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€‚ä¸»è¦å®ç°äº†ä»¥ä¸‹äº”ç§æ–¹æ³•ï¼š

- `heapAdjust`ï¼šå°†å®Œå…¨äºŒå‰æ ‘è°ƒæ•´ä¸ºäºŒå‰å †ã€‚
- `heapify`ï¼š å°†æ•°ç»„æ„å»ºä¸ºäºŒå‰å †æ–¹æ³•ï¼ˆåˆå§‹å †å»ºç«‹æ–¹æ³•ï¼‰ã€‚
- `heappush`ï¼šå‘å †ä¸­æ·»åŠ å…ƒç´ ï¼Œä¹Ÿæ˜¯ä¼˜å…ˆé˜Ÿåˆ—çš„å…¥é˜Ÿæ“ä½œã€‚
- `heappop`ï¼šåˆ é™¤å †é¡¶å…ƒç´ ï¼Œä¹Ÿæ˜¯ä¼˜å…ˆé˜Ÿåˆ—çš„å‡ºé˜Ÿæ“ä½œï¼Œå¼¹å‡ºä¼˜å…ˆé˜Ÿåˆ—ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚
- `heapSort`ï¼šå †æ’åºã€‚

```typescript
class Heapq {
    // å †è°ƒæ•´æ–¹æ³•ï¼šè°ƒæ•´ä¸ºå¤§é¡¶å †
    heapAdjust(nums: number[], index: number, end: number): void {
        let left = index * 2 + 1;// å½“å‰èŠ‚ç‚¹å·¦å­èŠ‚ç‚¹
        let right = left + 1; // å³å­èŠ‚ç‚¹
        while (left <= end) {
            // å½“å‰èŠ‚ç‚¹ä¸ºéå¶å­ç»“ç‚¹
            let max_index = index;
            if (nums[left] > nums[max_index]) {
                max_index = left;
            }
            if (right <= end && nums[right] > nums[max_index]) {
                max_index = right;
            }
            if (index === max_index) {
                // å¦‚æœä¸ç”¨äº¤æ¢ï¼Œåˆ™è¯´æ˜å·²ç»äº¤æ¢ç»“æŸ
                break;
            }
            let temp = nums[index];
            nums[index] = nums[max_index];
            nums[max_index] = temp;
            // ç»§ç»­è°ƒæ•´å­æ ‘
            index = max_index;
            left = index * 2 + 1;
            right = left + 1;
        }
    }

    // å°†æ•°ç»„æ„å»ºä¸ºäºŒå‰å †
    heapify(nums: number[]): void {
        let size = nums.length;
        // (size - 2) / 2 æ˜¯æœ€åä¸€ä¸ªéå¶èŠ‚ç‚¹ï¼Œå¶èŠ‚ç‚¹ä¸ç”¨è°ƒæ•´ï¼Œä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹è°ƒæ•´
        for (let i = (size - 2) >> 1; i >= 0; i--) {
            // è°ƒç”¨è°ƒæ•´å †å‡½æ•°
            this.heapAdjust(nums, i, size - 1);
        }
    }

    // å…¥é˜Ÿæ“ä½œ
    heappush(nums: number[], value: number): void {
        nums.push(value);
        let size = nums.length;
        let i = size - 1;
        // å¯»æ‰¾æ’å…¥ä½ç½®
        while ((i - 1) >> 1 >= 0) {
            let cur_root = (i - 1) >> 1;
            // value å°äºå½“å‰æ ¹èŠ‚ç‚¹ï¼Œåˆ™æ’å…¥åˆ°å½“å‰ä½ç½®
            if (nums[cur_root] > value) {
                break;
            }
            // ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾
            nums[i] = nums[cur_root];
            i = cur_root;
        }
        // æ‰¾åˆ°æ’å…¥ä½ç½®æˆ–è€…åˆ°è¾¾æ ¹ä½ç½®ï¼Œå°†å…¶æ’å…¥
        nums[i] = value;
    }

    // å‡ºé˜Ÿæ“ä½œ
    heappop(nums: number[]): number {
        let size = nums.length;
        let top = nums[0];
        nums[0] = nums[size - 1];
        nums.pop();
        if (size > 0) {
            this.heapAdjust(nums, 0, size - 2);
        }
        return top;
    }

    // å‡åºå †æ’åº
    heapSort(nums: number[]): number[] {
        this.heapify(nums);
        let size = nums.length;
        for (let i = 0; i < size; i++) {
            nums[0] = nums[size - i - 1];
            nums[size - i - 1] = top;
            this.heapAdjust(nums, 0, size - i - 2);
        }
        return nums;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const heap = new Heapq();
const nums = [3, 2, 5, 1, 7];
console.log(heap.heapSort(nums)); // è¾“å‡ºæ’åºåçš„æ•°ç»„
```







## ç®—æ³•é¢˜

| é¢˜å· | æ ‡é¢˜                                                         | æ ‡ç­¾                     | éš¾åº¦ |
| :--- | :----------------------------------------------------------- | :----------------------- | :--- |
| 0622 | [è®¾è®¡å¾ªç¯é˜Ÿåˆ—](https://leetcode.cn/problems/design-circular-queue/) | è®¾è®¡ã€é˜Ÿåˆ—ã€æ•°ç»„ã€é“¾è¡¨   | ä¸­ç­‰ |
| 0346 | [æ•°æ®æµä¸­çš„ç§»åŠ¨å¹³å‡å€¼](https://leetcode.cn/problems/moving-average-from-data-stream/) | è®¾è®¡ã€é˜Ÿåˆ—ã€æ•°ç»„ã€æ•°æ®æµ | ç®€å• |
| 0225 | [ç”¨é˜Ÿåˆ—å®ç°æ ˆ](https://leetcode.cn/problems/implement-stack-using-queues/) | æ ˆã€è®¾è®¡ã€é˜Ÿåˆ—           | ç®€å• |

### ä¼˜å…ˆé˜Ÿåˆ—

| é¢˜å· | æ ‡é¢˜                                                         | æ ‡ç­¾                                                         | éš¾åº¦ |
| :--- | :----------------------------------------------------------- | :----------------------------------------------------------- | :--- |
| 0703 | [æ•°æ®æµä¸­çš„ç¬¬ K å¤§å…ƒç´ ](https://leetcode.cn/problems/kth-largest-element-in-a-stream/) | æ ‘ã€è®¾è®¡ã€äºŒå‰æœç´¢æ ‘ã€äºŒå‰æ ‘ã€æ•°æ®æµã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰         | ç®€å• |
| 0347 | [å‰ K ä¸ªé«˜é¢‘å…ƒç´ ](https://leetcode.cn/problems/top-k-frequent-elements/) | æ•°ç»„ã€å“ˆå¸Œè¡¨ã€åˆ†æ²»ã€æ¡¶æ’åºã€è®¡æ•°ã€å¿«é€Ÿé€‰æ‹©ã€æ’åºã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ | ä¸­ç­‰ |
| 0451 | [æ ¹æ®å­—ç¬¦å‡ºç°é¢‘ç‡æ’åº](https://leetcode.cn/problems/sort-characters-by-frequency/) | å“ˆå¸Œè¡¨ã€å­—ç¬¦ä¸²ã€æ¡¶æ’åºã€è®¡æ•°ã€æ’åºã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰           | ä¸­ç­‰ |
| 0973 | [æœ€æ¥è¿‘åŸç‚¹çš„ K ä¸ªç‚¹](https://leetcode.cn/problems/k-closest-points-to-origin/) | å‡ ä½•ã€æ•°ç»„ã€æ•°å­¦ã€åˆ†æ²»ã€å¿«é€Ÿé€‰æ‹©ã€æ’åºã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰       | ä¸­ç­‰ |
| 1296 | [åˆ’åˆ†æ•°ç»„ä¸ºè¿ç»­æ•°å­—çš„é›†åˆ](https://leetcode.cn/problems/divide-array-in-sets-of-k-consecutive-numbers/) | è´ªå¿ƒã€æ•°ç»„ã€å“ˆå¸Œè¡¨ã€æ’åº                                     | ä¸­ç­‰ |
| 0239 | [æ»‘åŠ¨çª—å£æœ€å¤§å€¼](https://leetcode.cn/problems/sliding-window-maximum/) | é˜Ÿåˆ—ã€æ•°ç»„ã€æ»‘åŠ¨çª—å£ã€å•è°ƒé˜Ÿåˆ—ã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰               | å›°éš¾ |
| 0295 | [æ•°æ®æµçš„ä¸­ä½æ•°](https://leetcode.cn/problems/find-median-from-data-stream/) | è®¾è®¡ã€åŒæŒ‡é’ˆã€æ•°æ®æµã€æ’åºã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰                   | å›°éš¾ |
| 0023 | [åˆå¹¶ K ä¸ªå‡åºé“¾è¡¨](https://leetcode.cn/problems/merge-k-sorted-lists/) | é“¾è¡¨ã€åˆ†æ²»ã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ã€å½’å¹¶æ’åº                         | å›°éš¾ |
| 0218 | [å¤©é™…çº¿é—®é¢˜](https://leetcode.cn/problems/the-skyline-problem/) | æ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘ã€æ•°ç»„ã€åˆ†æ²»ã€æœ‰åºé›†åˆã€æ‰«æçº¿ã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ | å›°éš¾ |



### æ»‘åŠ¨çª—å£æœ€å¤§å€¼ (åŒç«¯é˜Ÿåˆ—)ï¼ˆè¾ƒéš¾ï¼‰

é¢˜ç›®ï¼š

ç»™å®šä¸€ä¸ªæ•°ç»„ numsï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º k çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£ k å†…çš„æ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚ è¿”å›æ»‘åŠ¨çª—å£æœ€å¤§å€¼ã€‚

```shell
è¾“å…¥: nums = [1,3,-1,-3,5,3,6,7], å’Œ k = 3
è¾“å‡º: [3,3,5,5,6,7] 
è§£é‡Š: 
æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼
---------------               -----
[1  3  -1] -3  5  3  6  7       3
1 [3  -1  -3] 5  3  6  7       3
1  3 [-1  -3  5] 3  6  7       5
1  3  -1 [-3  5  3] 6  7       5
1  3  -1  -3 [5  3  6] 7       6
1  3  -1  -3  5 [3  6  7]      7

```



#### **è§£æ³•ä¸€ï¼šä¼˜å…ˆé˜Ÿåˆ—**

1. åˆå§‹çš„æ—¶å€™å°†å‰ ğ‘˜ ä¸ªå…ƒç´ åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—çš„äºŒå‰å †ä¸­:
   * å­˜å…¥ä¼˜å…ˆé˜Ÿåˆ—çš„æ˜¯æ•°ç»„å€¼ä¸ç´¢å¼•æ„æˆçš„å…ƒç»„ã€‚
   * ä¼˜å…ˆé˜Ÿåˆ—å°†æ•°ç»„å€¼ä½œä¸ºä¼˜å…ˆçº§ã€‚
2. ç„¶åæ»‘åŠ¨çª—å£ä»ç¬¬ ğ‘˜ ä¸ªå…ƒç´ å¼€å§‹éå†ï¼Œå°†å½“å‰æ•°ç»„å€¼å’Œç´¢å¼•çš„å…ƒç»„æ’å…¥åˆ°äºŒå‰å †ä¸­ã€‚
3. å½“äºŒå‰å †å †é¡¶å…ƒç´ çš„ç´¢å¼•å·²ç»ä¸åœ¨æ»‘åŠ¨çª—å£çš„èŒƒå›´ä¸­æ—¶ï¼Œå³ `ğ‘[0][1]â‰¤ğ‘–âˆ’ğ‘˜` æ—¶ï¼Œä¸æ–­åˆ é™¤å †é¡¶å…ƒç´ ï¼Œç›´åˆ°æœ€å¤§å€¼å…ƒç´ çš„ç´¢å¼•åœ¨æ»‘åŠ¨çª—å£çš„èŒƒå›´ä¸­ã€‚
4. å°†æœ€å¤§å€¼åŠ å…¥åˆ°ç­”æ¡ˆæ•°ç»„ä¸­ï¼Œç»§ç»­å‘å³æ»‘åŠ¨ã€‚
5. æ»‘åŠ¨ç»“æŸæ—¶ï¼Œè¾“å‡ºç­”æ¡ˆæ•°ç»„ã€‚





#### **è§£æ³•äºŒï¼šåŒç«¯é˜Ÿåˆ—**

1. åˆ›å»ºä¸€ä¸ªåŒå‘é˜Ÿåˆ—ï¼ˆdequeï¼‰æ¥ä¿å­˜æ»‘åŠ¨çª—å£ä¸­çš„**å…ƒç´ ç´¢å¼•**ï¼š

   * é˜Ÿåˆ—ä¼šæŒ‰ç…§å…ƒç´ å¤§å°çš„é™åºæ’åˆ—ï¼Œå³é˜Ÿé¦–å…ƒç´ ä¸ºå½“å‰æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼ã€‚

   * (æ³¨æ„ï¼šé˜Ÿåˆ—ä¿å­˜çš„æ˜¯æ»‘åŠ¨çª—å£çš„å…ƒç´ ç´¢å¼•ï¼Œä½†æ˜¯é˜Ÿåˆ—å†…ç´¢å¼•å¯¹åº”å…ƒç´ æ˜¯é™åºæ’åºçš„)

2. éå†æ•°ç»„ numsï¼Œå¯¹äºæ¯ä¸ªå…ƒç´  nums[i]ï¼š

   * åœ¨æ’å…¥å…ƒç´ ä¹‹å‰ï¼Œé¦–å…ˆæ£€æŸ¥é˜Ÿé¦–å…ƒç´ æ˜¯å¦å·²ç»è¶…å‡ºæ»‘åŠ¨çª—å£çš„èŒƒå›´ï¼ˆç´¢å¼•èŒƒå›´è¶…è¿‡ i-kï¼‰ã€‚

   - å¦‚æœé˜Ÿé¦–å…ƒç´ è¿‡æœŸï¼Œåˆ™ä»é˜Ÿåˆ—ä¸­åˆ é™¤å®ƒï¼Œä¿è¯é˜Ÿåˆ—ä¸­çš„å…ƒç´ éƒ½åœ¨æ»‘åŠ¨çª—å£èŒƒå›´å†…ã€‚
   - ç„¶åï¼Œå°†å½“å‰å…ƒç´  nums[i] ä¸é˜Ÿåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼š
     - ä»é˜Ÿåˆ—çš„å°¾éƒ¨å¼€å§‹ï¼Œå¦‚æœå°¾éƒ¨å…ƒç´ å°äºç­‰äºå½“å‰å…ƒç´  nums[i]ï¼Œåˆ™å°†å°¾éƒ¨å…ƒç´ ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…é˜Ÿåˆ—çš„å°¾éƒ¨å…ƒç´ å¤§äºå½“å‰å…ƒç´ ã€‚
     - å°†å½“å‰å…ƒç´ çš„ç´¢å¼•æ’å…¥åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚
   - æ£€æŸ¥å½“å‰ç´¢å¼• i æ˜¯å¦å·²ç»è¾¾åˆ°æ»‘åŠ¨çª—å£çš„å¤§å° kã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ»‘åŠ¨çª—å£å½¢æˆï¼Œæ­¤æ—¶é˜Ÿé¦–å…ƒç´ å³ä¸ºå½“å‰çª—å£çš„æœ€å¤§å€¼ã€‚

3. å°†æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼ä¿å­˜åœ¨ç»“æœæ•°ç»„ä¸­ã€‚

4. è¿”å›ç»“æœæ•°ç»„ã€‚

![foo](../../images/æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼.png)

æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`

ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`

- ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ä¹Ÿå¯ä»¥å®ç°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º`O(nlogk)`

ä»£ç ï¼š

```javascript
function maxSlidingWindow(nums, k) {
  if (k <= 0 || nums.length === 0) {
    return [];
  }

  const result = [];
  const deque = []; // åŒå‘é˜Ÿåˆ—

  for (let i = 0; i < nums.length; i++) {
    // æ£€æŸ¥é˜Ÿé¦–å…ƒç´ æ˜¯å¦è¶…å‡ºæ»‘åŠ¨çª—å£çš„èŒƒå›´
    if (deque.length > 0 && deque[0] <= i - k) {
      deque.shift();
    }

    // ä¸é˜Ÿåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œä¿æŒé˜Ÿåˆ—ä¸­çš„å…ƒç´ æœ‰åº
    while (deque.length > 0 && nums[deque[deque.length - 1]] <= nums[i]) {
      deque.pop();
    }

    deque.push(i); // å°†å½“å‰å…ƒç´ çš„ç´¢å¼•æ’å…¥åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨

    // æ£€æŸ¥å½“å‰ç´¢å¼•æ˜¯å¦å·²ç»è¾¾åˆ°æ»‘åŠ¨çª—å£çš„å¤§å° k
    if (i >= k - 1) {
      result.push(nums[deque[0]]); // é˜Ÿé¦–å…ƒç´ å³ä¸ºå½“å‰çª—å£çš„æœ€å¤§å€¼
    }
  }

  return result;
}
```



### [å‰ K ä¸ªé«˜é¢‘å…ƒç´ ](https://leetcode.cn/problems/top-k-frequent-elements/description/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ `k` é«˜çš„å…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,1,1,2,2,3], k = 2
è¾“å‡º: [1,2]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [1], k = 1
è¾“å‡º: [1]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `k` çš„å–å€¼èŒƒå›´æ˜¯ `[1, æ•°ç»„ä¸­ä¸ç›¸åŒçš„å…ƒç´ çš„ä¸ªæ•°]`
- é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå”¯ä¸€ï¼Œæ¢å¥è¯è¯´ï¼Œæ•°ç»„ä¸­å‰ `k` ä¸ªé«˜é¢‘å…ƒç´ çš„é›†åˆæ˜¯å”¯ä¸€çš„

**è¿›é˜¶ï¼š**ä½ æ‰€è®¾è®¡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ **å¿…é¡»** ä¼˜äº `O(n log n)` ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„å¤§å°ã€‚



#### **è§£æ³•ä¸€ï¼šç»Ÿè®¡**

1. éå†æ•°ç»„ï¼Œä½¿ç”¨ å“ˆå¸Œ map è®°å½•æ¯ä¸ªå…ƒç´ å‡ºç°æ¬¡æ•°ï¼ˆå…ƒç´ ä½œä¸ºkeyï¼Œå‡ºç°æ¬¡æ•°ä½œä¸ºå€¼ï¼‰ï¼›
2. éå† å“ˆå¸Œmapï¼Œå°†å“ˆå¸Œ Map ä¸­æ¯ä¸ªå…ƒç´ ç»„æˆä¸€ä¸ªæ•°ç»„ [å…ƒç´ å€¼ï¼Œå‡ºç°é¢‘ç‡]ï¼Œå­˜å…¥ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼›
3. å°†æ–°çš„æ•°ç»„æ ¹æ®ç¬¬äºŒä¸ªå‡ºç°é¢‘ç‡è¿›è¡Œæ’åºï¼›
4. å–æ•°ç»„ä¸­å‰ k ä¸ªå…ƒç´ å³å¯ï¼›

```typescript
function topKFrequent(nums: number[], k: number): number[] {
    let map: object = {}
    let res: number[] = []
    let temp: number[][] = []
    for (let i = 0; i < nums.length; i++) {
        let key = nums[i]
        if (map[key] !== undefined) {
            map[key]++
        } else {
            map[key] = 1
        }
    }

    Object.keys(map).forEach(key => {
        let item = [key, map[key]] //ä»¥ [å½“å‰å€¼,å‡ºç°é¢‘ç‡] ä¿å­˜
        temp.push(item)
    })
    temp = temp.sort((num1, num2) => num2[1] - num1[1])
    res = temp.slice(0, k).map(item => item[0])
    return res
};
```



è§£æ³•äºŒï¼šå“ˆå¸Œè¡¨ + ä¼˜å…ˆé˜Ÿåˆ—

1. ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•ä¸‹æ•°ç»„ä¸­å„ä¸ªå…ƒç´ çš„é¢‘æ•°ã€‚
2. ç„¶åå°†å“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ å»é‡ï¼Œè½¬æ¢ä¸ºæ–°æ•°ç»„ã€‚æ—¶é—´å¤æ‚åº¦ ğ‘‚(ğ‘›)ï¼Œç©ºé—´å¤æ‚åº¦ ğ‘‚(ğ‘›)ã€‚
3. ä½¿ç”¨äºŒå‰å †æ„å»ºä¼˜å…ˆé˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§ä¸ºå…ƒç´ é¢‘æ•°ã€‚æ­¤æ—¶å †é¡¶å…ƒç´ å³ä¸ºé¢‘æ•°æœ€é«˜çš„å…ƒç´ ã€‚æ—¶é—´å¤æ‚åº¦ ğ‘‚(ğ‘›)ï¼Œç©ºé—´å¤æ‚åº¦ ğ‘‚(ğ‘›)ã€‚
4. å°†å †é¡¶å…ƒç´ åŠ å…¥åˆ°ç­”æ¡ˆæ•°ç»„ä¸­ï¼Œè¿›è¡Œå‡ºé˜Ÿæ“ä½œã€‚æ—¶é—´å¤æ‚åº¦ğ‘‚(logâ¡ğ‘›)ã€‚
   - å‡ºé˜Ÿæ“ä½œï¼šäº¤æ¢å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ ï¼Œå°†æœ«å°¾å…ƒç´ å·²ç§»å‡ºå †ã€‚ç»§ç»­è°ƒæ•´å¤§é¡¶å †ã€‚
5. ä¸æ–­é‡å¤ç¬¬ 4 æ­¥ï¼Œç›´åˆ° ğ‘˜ æ¬¡ç»“æŸã€‚è°ƒæ•´ ğ‘˜ æ¬¡çš„æ—¶é—´å¤æ‚åº¦ ğ‘‚(ğ‘›Ã—logâ¡ğ‘›)ã€‚



```typescript
class Heapq {
    // å †è°ƒæ•´æ–¹æ³•ï¼šè°ƒæ•´ä¸ºå¤§é¡¶å †
    heapAdjust(nums: number[], numsDict: { [key: number]: number }, index: number, end: number): void {
        let left = index * 2 + 1;
        let right = left + 1;
        while (left <= end) {
            // å½“å‰èŠ‚ç‚¹ä¸ºéå¶å­ç»“ç‚¹
            let max_index = index;
            if (numsDict[nums[left]] > numsDict[nums[max_index]]) {
                max_index = left;
            }
            if (right <= end && numsDict[nums[right]] > numsDict[nums[max_index]]) {
                max_index = right;
            }
            if (index === max_index) {
                // å¦‚æœä¸ç”¨äº¤æ¢ï¼Œåˆ™è¯´æ˜å·²ç»äº¤æ¢ç»“æŸ
                break;
            }
            [nums[index], nums[max_index]] = [nums[max_index], nums[index]];
            // ç»§ç»­è°ƒæ•´å­æ ‘
            index = max_index;
            left = index * 2 + 1;
            right = left + 1;
        }
    }

    // å°†æ•°ç»„æ„å»ºä¸ºäºŒå‰å †
    heapify(nums: number[], numsDict: { [key: number]: number }): void {
        const size = nums.length;
        // (size - 2) // 2 æ˜¯æœ€åä¸€ä¸ªéå¶èŠ‚ç‚¹ï¼Œå¶èŠ‚ç‚¹ä¸ç”¨è°ƒæ•´
        for (let i = (size - 2) >> 1; i >= 0; i--) {
            // è°ƒç”¨è°ƒæ•´å †å‡½æ•°
            this.heapAdjust(nums, numsDict, i, size - 1);
        }
    }

    // å…¥é˜Ÿæ“ä½œ
    heappush(nums: number[], numsDict: { [key: number]: number }, value: number): void {
        nums.push(value);
        const size = nums.length;
        let i = size - 1;
        // å¯»æ‰¾æ’å…¥ä½ç½®
        while ((i - 1) >> 1 >= 0) {
            const cur_root = (i - 1) >> 1;
            // value å°äºå½“å‰æ ¹èŠ‚ç‚¹ï¼Œåˆ™æ’å…¥åˆ°å½“å‰ä½ç½®
            if (numsDict[nums[cur_root]] > numsDict[value]) {
                break;
            }
            // ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾
            nums[i] = nums[cur_root];
            i = cur_root;
        }
        // æ‰¾åˆ°æ’å…¥ä½ç½®æˆ–è€…åˆ°è¾¾æ ¹ä½ç½®ï¼Œå°†å…¶æ’å…¥
        nums[i] = value;
    }

    // å‡ºé˜Ÿæ“ä½œ
    heappop(nums: number[], numsDict: { [key: number]: number }): number {
        const size = nums.length;
        [nums[0], nums[-1]] = [nums[-1], nums[0]];
        // å¾—åˆ°æœ€å¤§å€¼ï¼ˆå †é¡¶å…ƒç´ ï¼‰ç„¶åè°ƒæ•´å †
        const top = nums.pop();
        if (size > 0) {
            this.heapAdjust(nums, numsDict, 0, size - 2);
        }
        return top;
    }
}

class Solution {
    topKFrequent(nums: number[], k: number): number[] {
        // ç»Ÿè®¡å…ƒç´ é¢‘æ•°
        const numsDict: { [key: number]: number } = {};
        for (const num of nums) {
            if (numsDict[num]) {
                numsDict[num] += 1;
            } else {
                numsDict[num] = 1;
            }
        }

        // ä½¿ç”¨ set æ–¹æ³•å»é‡ï¼Œå¾—åˆ°æ–°æ•°ç»„ï¼Œå‡å°‘é‡å¤æ“ä½œ
        const newNums = Array.from(new Set(nums));
        const size = newNums.length;

        const heap = new Heapq();
        const queue: number[] = [];
        // éå†æ•°ç»„ï¼Œå°†æ¯ä¸ªå…ƒç´ å…¥ä¼˜å…ˆé˜Ÿåˆ—
        for (const num of newNums) {
            heap.heappush(queue, numsDict, num);
        }

        const res: number[] = [];
        // å°†ä¼˜å…ˆé˜Ÿåˆ—å‡ºé˜Ÿåˆ—
        for (let i = 0; i < k; i++) {
            res.push(heap.heappop(queue, numsDict));
        }
        return res;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const solution = new Solution();
const res = solution.topKFrequent([1, 1, 2, 2, 3], 2);
console.log(res); // è¾“å‡º: [1, 2]
```

